if(window.home&&home.mark){home.mark.add("main-js_start");}function getcss(t){setTimeout(function(){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head").item(0).appendChild(e)},0)}function MordaRT(){this.listRE={}}function CoversAPI(){this.current=null,this.currentStatus=0,this.area=null,this.shareInstance=null,this.fadeTimeout=600}function cp(t,e,i){var n="clck/lid="+t;Lego.params.statRoot&&(n+="/sid="+Lego.params.msid);try{if(i=i||{},i.host=Lego.params?Lego.params["click-host"]:null,window.mordaFromCache)return window.workerMessage("counter",{path:n}),!0;if(home&&home.getData&&home.getData("i-counter.useBeacon")){var o=function(t){if(!("sendBeacon"in navigator))return!1;for(var e,i,n=t.split("."),o=0;o<n.length;++o){var s={ctag:n[o]};i?i.children=[s]:e=[s],i=s}var r="/dtype=clck/session_id="+Lego.params.msid+'/events=[{"event":"click","parent-path":"'+Lego.params.statRoot+'","blocks":'+JSON.stringify(e)+"}]/*";return navigator.sendBeacon(home.getData("i-counter.clckBase")+"counter",r)},s=t.indexOf("news")>-1;if(o(t.replace(Lego.params.statRoot+".","")+(s?".beacon":"")))return!0;s&&(n=n.replace(t,t+".redir"))}Lego.c(n,e,i)}catch(r){}}function cpr(t,e,i){try{Lego.cred(t,e,i)}catch(n){}}function cpt(t,e){t+=(document.getElementById("form").text.value?".full":".empty")+"/u="+(new Date).getTime(),cp(t,e)}function c0(t){try{Lego.c(t)}catch(e){}}function csh(t,e){try{cp(t,e)}catch(i){}}function csh_ifmsid(t,e){Lego.params.statRoot&&csh(t,e)}function cpa(t){return t&&"undefined"!=typeof Lego.params.msid?"onmousedown=\"Lego.cp('132','71946','"+t+"',this)\"":""}function statRedirect(t,e,i){var n,o,s=e&&Lego.params.statRoot;return s&&(t=BEM.blocks["i-global"].param("click-href")+"redir/dtype=clck/lid="+e+"/sid="+Lego.params.msid+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(t.match(/^http/)?t:location.protocol+"//"+location.host+(t.match("^/")?t:"/"+t)))),"_blank"===i?(n=$("<form />"),o=function(){var e,i,o,r;if(s)return t;if(e=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),e&&e[2])for(i=e[2].split("&"),o=i.length;o--;)r=i[o].split("="),n.append($("<input/>").attr({type:"hidden",name:r[0],value:r[1]}));return e?e[1]:t}(),void n.attr({action:o,target:i}).appendTo($("body"))[0].submit()):void(location.href=t)}function CAWBrowser(){var t,e=[],i=6,n=35;for(t=i;n>t;t++)e[t]=!1;var o=navigator.userAgent;this.msie=o&&parseFloat(navigator.appVersion)>=4&&o.indexOf("Opera")<0&&o.indexOf("MSIE 4")<0&&o.indexOf("MSIE")>=0,this.win=o&&(o.indexOf("Windows 95")>=0||o.indexOf("Windows NT")>=0||o.indexOf("Windows 98")>=0),this.mac=navigator.platform&&-1!==navigator.platform.indexOf("Mac"),this.opera7=-1!==o.indexOf("Opera")&&window.opera&&document.readyState?1:0,this.gecko=-1!==o.toLowerCase().indexOf("gecko")&&-1===o.indexOf("safari");var s=navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(s)for(t=i;n>t;t++)e[t]=s,e[t]=parseInt(e[t].description.substring(e[t].description.indexOf(".")-2),10)>=t;else if(this.msie&&this.win&&!this.mac)for(t=i;n>t;t++)try{e[t]=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t)}catch(r){}for(this.other=!((this.gecko||this.msie)&&this.win&&!this.mac),this.flash=0,t=i;n>t;t++)e[t]&&(this.flash=t);this.full_version=this.flash+"",s&&s.version&&(this.full_version=s.version+"")}function workerMessage(t,e){var i=home&&home.getData&&home.getData("worker-message.data");return i?(window.chrome&&window.chrome.runtime&&window.chrome.runtime.sendMessage(i.extensionId,{to:i.workerName,data:{type:"frommorda",message:t,params:e}}),!0):!1}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):e(t)}("undefined"!=typeof global?global:this,function(t){var e=function(t){};if(e.version="1.0.29",e.isDebug=!1,e.isArray=function(t){return t instanceof Array},e.isArrayLike=function(t){return e.isObject(t)&&!e.isArray(t)&&"length"in t},e.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},e.isFunction=function(){for(var t=0,e=arguments.length;e>t;t++)if(!(arguments[t]instanceof Function))return!1;return!0},e.isObject=function(t){return"object"==typeof t},e.isString=function(){for(var t=0,e=arguments.length;e>t;t++)if("string"!=typeof arguments[t])return!1;return!0},e.stringf=function(t,e){var i=Array.prototype.slice.call(arguments,1);return t.replace(/%s/g,function(){return i.shift()||""})},"undefined"==typeof JSON)throw new Error("JSON is not supported");e.JSON=JSON,e.console={slog:function(t){this.log(e.stringf.apply(this,arguments))},log:function(e){"undefined"!=typeof debug?debug(e):t.console&&t.console.log&&t.console.log(e)},error:function(t){throw new Error(t)},dir:function(t){this.log(e.JSON.stringify(t))}},e.log=e.console.log,e.error=e.console.error;var i=/^https?:\/\/\S+/i;e.isURL=function(t){return"string"!=typeof t&&e.error("isURL expects string parameter instead "+typeof t),i.test(t)};var n=Array.prototype.filter?function(t,e){return t.filter(e)}:function(t,i){var n=[];return e.each(t,function(t,e){i(t,e,this)&&n.push(t)}),n};e.filter=function(t,i){return e.isArray(t)||e.error("first argument is expected to be an array instead of "+typeof t),e.isFunction(i)||e.error("second argument is expected to be a function instead of "+typeof i),n(t,i)},e.forEach=function(t,e,i){var n,o;for(i=i||t,n=0,o=t.length;o>n;n++)e.call(i,t[n],n,t);return this},e.indexOf=function(t,e,i){if(i=i||0,!(t instanceof Array))throw new Error("Function expects array as first argument");if("indexOf"in Array.prototype)return t.indexOf(e,i);for(var n=0,o=t.length;o>n;n++)if(t[n]===e&&n>=i)return n;return-1},e.map=function(t,i){var n=[];if(e.isArray(t)&&i instanceof Function)if(x.isFunction(t.map))n=t.map(i);else for(var o=0,s=t.length;s>o;o++)n[o]=i(t[o],o,t);return n},function(){var t=Array.prototype.some?function(t,e){return t.some(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(e(t[i],i,t))return!0;return!1};e.some=function(i,n){return e.isArray(i)||e.error("first argument is expected to be an array instead of "+typeof i),e.isFunction(n)||e.error("second argument is expected to be a function instead of "+typeof n),t(i,n)}}();var o={};e.each=o.each=function(t,i,n){if(e.isArray(t))e.forEach.apply(this,arguments);else{var o,s=n||t;for(o in t)t.hasOwnProperty(o)&&i.call(s,t[o],o,t)}return this};var s,r;"function"==typeof Object.create?s=Object.create:(r=function(){},s=function(t){return r.prototype=t,new r}),e.beget=function(t,e){var i=s(t);for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},e.getRandom=function(t){return Math.floor(Math.random()*(t||1e3))},e.getElementId=function(t){e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t);var i=t.getAttribute("id");return i||(i="_"+e.getRandom(1e16),t.setAttribute("id",i)),i};var a=function(t){for(var e=document.all,i=[],n=0,o=e.length;o>n;++n)"string"==typeof e[n].getAttribute(t)&&i.push(e[n]);return i};e.getElementsByAttr=function(e){var i=[],n=arguments[1]||t.document||null;if("getAttribute"in n&&n.getAttribute(e)&&i.push(n),n&&n.querySelectorAll)try{i=i.concat(Array.prototype.slice.call(n.querySelectorAll("["+e+"]")))}catch(o){}return i.length||(i=i.concat(a(e))),i};var c=(new RegExp).compile(/^\s+|\s+$/g);e.trim=function(t){var i=typeof t;return"string"!==i&&e.error("Argument must be string but"+i+" passed"),t.trim instanceof Function?t.trim():t.replace(c,"")},e.stripSpaces=function(t){return t.split(" ").join("")},e.bind=function(t,e){return function(){return t.apply(e,arguments)}};e.query=function(t,e){for(var i=e||this||{},n=t.split("."),o=0;i[n[o]];)i=i[n[o++]];return o===n.length?i:null},e.getJPathValue=function(t,i){return x.bind(e.query,t)(i)},e.getObject=function(t){return t.beget=function(t){return e.beget(this,t)},e.beget(t)},e.bem={getAttributes:function(t){if(!t)return"";var e,i="";for(e in t)if(t.hasOwnProperty(e)){var n=t[e];(n||0===n)&&(n=n.toString().replace(/"/g,"&quot;"),i+=" "+e+'="'+n+'"')}return i},getClassname:function(t,e){var i,n=e.mods,o=t;if(e.mix&&(o+=" "+e.mix),n)for(i in n)n.hasOwnProperty(i)&&(n[i]||0===n[i])&&(o+=" "+t+"_"+i+"_"+n[i]);return o},getBEMParams:function(t){return JSON.stringify(t).replace(/"/g,"&quot;")}},e.create=function(t){var e=function(){};return e.prototype=t,new e},e.constructURL=function(t,e){var i,n="",o=[],s=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),r=s&&s[3]?s[3]:"";if(s&&s[2])for(var a=s[2].split("&"),c=a.length;c--;)o.push(a[c]);for(i in e)e.hasOwnProperty(i)&&o.push(i+"="+e[i]);return n=s?s[1]+"?"+o.join("&")+r:t+"?"+o.join("&")+r};var u=/([a-z]{1})([A-Z]{1})/g;e.decamelCase=function(t){return t.replace(u,function(t,e,i){return e+"-"+i.toLowerCase()})},e.data=function(t,i){return e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t),t.getAttribute("data-"+i)},e.ComponentBase={data:function(t){var i=this.element;return i?e.data(i,t):void 0},setId:function(t){return this.id=t,this},baseInit:function(t,i){var n=this;this.element=i,e.each(e.dataset(i),function(t,e){n[x.decamelCase(e)]=t})}},e.Component=function(){var t=[],i=[],n={},o="data-xapp";return{extend:function(o){var s,r=t.length;if(e.isObject(o))s=e.beget(e.ComponentBase,o);else if(e.isString(o)&&e.isFunction(arguments[1]))s=e.beget(e.ComponentBase,{id:o,init:arguments[1]});else{if(!e.isString(o)||!e.isArray(arguments[1]))throw new Error('Unknown definition structure, try to use extend("yourName", function() { ... init code ... })');var a=arguments[1];s=e.beget(e.ComponentBase,{id:o,init:function(){var t=e.filter(a,function(t){return e.isString(t)});t=e.map(t,function(t){if(!i[t])throw new Error("Service "+t+" hasnt defined");return i[t]()});var n=e.filter(a,function(t){return e.isFunction(t)});if(n.length>1)throw new Error("Too much declaration functions");n[0].apply(this,t)}})}return s.id||e.error("extend method expects id field in description object"),t.push(s),n[s.id]=r,t[r]},factory:function(t,e){i[t]=e},initByHTML:function(t){var i=t||document,n=this,s=e.getElementsByAttr(o,i);return e.forEach(s,function(t){var i=e.data(t,"xapp");e.forEach(i.split(" "),function(i){n.initById(i,e.getElementId(t),t)})}),this},initById:function(e,i,o){var s=e in n?t[n[e]]:null;s&&("undefined"!=typeof i&&s.setId(i),s.baseInit(i,o),s.init(i))}}}();var l=/-([\da-z])/gi;e.camelCase=function(t){return t.replace(l,function(t,e){return e.toUpperCase()})},e.dataset=function(t){var i={};return e.isElement(t)&&(t.dataset&&"hasOwnProperty"in t.dataset&&e.isFunction(t.dataset.hasOwnProperty)?i=t.dataset:e.forEach(t.attributes,function(t){0===t.name.indexOf("data-")&&(i[x.camelCase(t.name.substr(5))]=t.value)})),i},e.generateId=function(){return String(Math.random()).substr(2)},e.ns=function(t,e,i){return t[e]||(t[e]={}),"undefined"!=typeof i&&i.call(t[e]),this},e.extend=function(t,e){var i=function(){};t.superclass=i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,e.prototype.constructor===Object.prototype.constructor&&(e.prototype.constructor=e)},e.Interface=function(t,i){var n=this;2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected exactly 2"),this.methods=[],this.name=t,e.forEach(i,function(t){"string"!=typeof t&&e.error("Interface constructor expects method names to be passed in as a string"),n.methods.push(t)})},e.Interface.ensureImplements=function(t,i){return 2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected at least 2"),e.forEach(i,function(i){i.constructor!==e.Interface&&e.error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface."),e.forEach(i.methods,function(n){t[n]&&"function"==typeof t[n]||e.error("Function Interface.ensureImplements: object does not implement the "+i.name+" interface. Method "+n+" was not found.")})}),!0},e.View=function(t){this.templates=t&&t.templates?e.beget(t.templates):{},this.re={parse:this.re.parse,rule:this.re.rule}},e.View.prototype={templates:{},re:{parse:/\[\%\s+([^%]+)\s+\%\]/g,rule:/:/},setParseRe:function(t){this.re.parse=t},getCustomRender:function(){var t="undefined"!==arguments[0]?arguments[0].split(this.re.rule):null;return t&&2===t.length?this.parseRules[t[0]]&&this.parseRules[t[0]].call(this,t[1]):void 0},parseRules:{l10n:function(t){return function(i){return e.isDebug&&!i.l10n(t)&&e.console.error("There is no translation for "+t),i.l10n?i.l10n(t):t}},jpath:function(t){return function(i){return e.getJPathValue(i,t)||""}},view:function(t){var e=this;return function(i){return e.get(t,i)}},bem:function(t){t=t.split(".");var i=t.pop(),n=t.pop(),o=t.pop();switch(i){case"class":return function(t){return e.bem.getClassname(n,(o?t[o]:t)||{})};case"attrs":return function(t){return e.bem.getAttributes(t[n||"attrs"])};case"js":return function(t){return e.bem.getBEMParams(t[n||"js"]||{})}}}},ruleFunction:function(t,i,n){var o=this;return this.getCustomRender(t)||function(s){var r=s&&s[t]||s&&s.views&&s.views.get(t,s)||"";return r||(r=n[t]?o.getContent(n[t],s):i?i[t]:""),e.isDebug&&!r&&e.console.log("Undefined variable "+t),r||""}},getContent:function(t,i){var n="";return n=e.isArray(t)?e.map(t,function(t){return"string"==typeof t?t:t(i)}).join(""):e.isFunction(t)?t(i):t.toString()},get:function(t,e){var i=this,n=e&&e.views?e.views.templates[t]:this.templates[t];return n?i.getContent(n,e):""}},e.View.prototype.let=function(t,i,n){var o=this.templates[t]=[],s=this,r=0;return e.isFunction(i)?this.templates[t]=i:(i.replace(this.re.parse,function(t,e,a){o.push(i.substr(r,a-r),s.ruleFunction(e,n,s.templates)),r=a+t.length}),r<i.length&&o.push(i.substr(r))),this},e.views=new e.View,e.getViewsForLangs=function(t,e){var i={},n=this;return t.forEach(function(t){var o;if(e){if(!(t in e))throw new Error('No lang "'+t+'" in base views.');o=e[t]}i[t]=new n.View(o)}),i},e.toArray=function(t){return Array.prototype.slice.call(t)};var h={},d={};return e.amd={define:function(t,e,i){return i=i||!0,h[t]=e,i&&(d[t]=!0),this},require:function(){var t=e.toArray(arguments).slice(0,arguments.length-1),i=arguments[arguments.length-1];return t=e.map(t,function(t){if(!h[t])throw new Error("Unmet dependency:"+t);return d[t]?(h[t]=e.isFunction(h[t])?h[t]():h[t],h[t]):h[t]()}),i.apply(this,t),this}},e.debounce=function(t,e,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,i||t.apply(o,s)},a=i&&!n;clearTimeout(n),n=setTimeout(r,e),a&&t.apply(o,s)}},e.Set=function(){this.items=[]},e.Set.prototype={add:function(t){return this.has(t)||this.items.push(t),this},has:function(t){return-1!==x.indexOf(this.items,t)},remove:function(t){var e;return this.has(t)&&(e=this.items.splice(x.indexOf(this.items,t),1)),e},removeFirst:function(){var t;return this.isEmpty()||(t=this.items.splice(0,1)),t},iterate:function(t){for(var e=0,i=this.items.length;i>e;e++)t(this.items[e],e,this.items);return this},size:function(){return this.items.length},isEmpty:function(){return 0===this.items.length}},e.range=function(t,e){var i=t.split("..."),n=0,o=0;for(i[0]&&!isNaN(i[0])&&(n=i[0]),i[1]&&!isNaN(i[1])&&(o=i[1]);o>n;)e(n++)},"function"==typeof define&&define.amd&&define("franky",[],function(){return e}),t.x=t.franky=e,e}),$(function(){x.Component.initByHTML()}),function(t){function e(t){var e=r(t);if(l)for(var i,n=0;i=p[n++];)t.hasOwnProperty(i)&&e.push(i);return e}function i(i,n,o){function s(e,o){var s=function(){var t=this.__base;this.__base=s.__base;var e=o.apply(this,arguments);return this.__base=t,e};return s.__base=i[e]?i[e]:"__constructor"===e?n.__self.__parent:t.noop,s}for(var r,a,c=e(o),l=0,h=c.length;h>l;)"__self"!==(r=c[l++])&&(a=o[r],n[r]=u(a)&&a.toString().indexOf(".__base")>-1?s(r,a):a)}function n(e,i){for(var n,o=1;n=e[o++];)i?u(n)?t.inheritSelf(i,n.prototype,n):t.inheritSelf(i,n):i=u(n)?t.inherit(e[0],n.prototype,n):t.inherit(e[0],n);return i||e[0]}var o=function(){},s=Object.create||function(t){var e=function(){};return e.prototype=t,new e},r=Object.keys,a=t.extend,c=Array.isArray,u=t.isFunction,l=!0,h={toString:""};for(var d in h)h.hasOwnProperty(d)&&(l=!1);var p=l?["toString","valueOf"]:null;t.inherit=function(){var t=arguments,e=c(t[0]),r=e||u(t[0]),l=r?e?n(t[0]):t[0]:o,h=t[r?1:0]||{},d=t[r?2:1],p=h.__constructor||r&&l.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:r?function(){return l.apply(this,arguments)}:function(){};if(!r)return p.prototype=h,p.prototype.__self=p.prototype.constructor=p,a(p,d);a(p,l),p.__parent=l;var f=l.prototype,m=p.prototype=s(f);return m.__self=m.constructor=p,h&&i(f,m,h),d&&i(l,p,d),p},t.inheritSelf=function(){var t=arguments,e=c(t[0]),o=e?n(t[0],t[0][0]):t[0],s=t[1],r=t[2],a=o.prototype;return s&&i(a,a,s),r&&i(o,o,r),o},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,i="__"+Number(new Date),n=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return n();var o="uniqueID"in t?"uniqueID":i;return e||o in t?t[o]:t[o]=n()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",i=function(e,i){return t.identify(e)+(i?t.identify(i):"")},n={buildEventName:function(t){return t},on:function(n,o,s,r,a){if("string"==typeof n){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var c,u=i(s,r),l=this[e]||(this[e]={}),h=n.split(" "),d=0;n=h[d++];)if(n=this.buildEventName(n),c=l[n]||(l[n]={ids:{},list:{}}),!(u in c.ids)){var p=c.list,f={fn:s,data:o,ctx:r,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,c.ids[u]=p.last=f}}else{var m=this;t.each(n,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,i,n){return this.on(t,e,i,n,{one:!0})},un:function(n,o,s){if("string"==typeof n||"undefined"==typeof n){var r=this[e];if(r)if(n){for(var a,c=n.split(" "),u=0;n=c[u++];)if(n=this.buildEventName(n),a=r[n])if(o){var l=i(o,s),h=a.ids;if(l in h){var d=a.list,p=h[l],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete h[l]}}else delete this[e][n]}else delete this[e]}else{var _=this;t.each(n,function(t,e){_.un(t,e,s)})}return this},trigger:function(i,n){var o,s=this,r=s[e];if("string"==typeof i?i=t.Event(s.buildEventName(o=i)):i.type=s.buildEventName(o=i.type),i.target||(i.target=s),r&&(r=r[i.type]))for(var a,c=r.list.first;c;)i.data=c.data,a=c.fn.call(c.ctx||s,i,n),"undefined"!=typeof a&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())),c.special&&c.special.one&&s.un(o,c.fn,c.ctx),c=c.next;return this}};t.observable=t.inherit(n,n)}(jQuery),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var i=this,n=t.call(arguments,1);return function(){return i.apply(e,n.concat(t.call(arguments)))}})}(),function(t,e){function i(t,e,i){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(i?"_"+i:"")}function n(t,e,n){if(c(t))return void(e[i(n,"*","*")]=t);var o,s,r;for(o in t)if(u(t,o))if(r=t[o],c(r))e[i(n,o,"*")]=r;else for(s in r)u(r,s)&&(e[i(n,o,s)]=r[s])}function o(t,e){return e?Array.isArray(e)?function(i){for(var n=0,o=e.length;o>n;)if(i.hasMod(t,e[n++]))return!0;return!1}:function(i){return i.hasMod(t,e)}:function(e){return e.hasMod(t)}}function s(t){t.onSetMod&&(n(t.onSetMod,t),delete t.onSetMod);var e,i;if(t.onElemSetMod){for(e in t.onElemSetMod)u(t.onElemSetMod,e)&&(i=t.onElemSetMod[e],n(i,t,e));delete t.onElemSetMod}}var r=[],a=t.inherit,c=t.isFunction,u=Function.prototype.call.bind(Object.prototype.hasOwnProperty),l={},h={};this.BEM=a(t.observable,{__constructor:function(t,e,i){var n=this;n._modCache=t||{},n._processingMods={},n._params=e,n.params=null,i!==!1?n._init():n.afterCurrentEvent(function(){n._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(this.changeThis(t,e))},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).__self.trigger(t,e),this},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,i,n){var o=arguments.length,s=!1;1==o?(n="",i=t,t=e,s=!0):2==o&&("string"==typeof t?(n=i,i=t,t=e):(n="",s=!0));var r=this.getMod(t,i)===n;return s?!r:r},getMod:function(t,e){var i=typeof t;if("string"===i||"undefined"===i){e=t||e;var n=this._modCache;return e in n?n[e]:n[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,i){return this._extractModVal(t,e,i)},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,n=[].slice.call(arguments,e?1:0);return n.length?n.reduce(function(t,e){return e in i&&(t[e]=i[e]),t},{}):i},setMod:function(i,n,o){"undefined"==typeof o&&(o=n,n=i,i=e);var s=this;if(!i||i[0]){var r=(i&&i[0]?t.identify(i[0]):"")+"_"+n;if(this._processingMods[r])return s;var a,c=i?s._getElemMod(n,i,a=s.__self._extractElemNameFrom(i)):s.getMod(n);if(c===o)return s;this._processingMods[r]=!0;var u=!0,l=[n,o,c];i&&l.unshift(i),[["*","*"],[n,"*"],[n,o]].forEach(function(t){u=s._callModFn(a,t[0],t[1],l)!==!1&&u}),!i&&u&&(s._modCache[n]=o),u&&s._afterSetMod(n,o,c,i,a),delete this._processingMods[r]}return s},_afterSetMod:function(t,e,i,n,o){},toggleMod:function(t,i,n,o,s){"string"==typeof t&&(s=o,o=n,n=i,i=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(s=o,o="");var r=this.getMod(t,i);return(r==n||r==o)&&this.setMod(t,i,"boolean"==typeof s?s?n:o:this.hasMod(t,i,n)?o:n),this},delMod:function(t,i){return i||(i=t,t=e),this.setMod(t,i,"")},_callModFn:function(t,n,o,s){var r=i(t,n,o);return this[r]?this[r].apply(this,s):e},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){}},t.extend(this.BEM,{_name:"i-bem",blocks:l,decl:function(i,n,r){"string"==typeof i?i={block:i}:i.name&&(i.block=i.name),s(n||(n={}));var u=l[i.baseBlock||i.block]||this;if(i.modName){var h=o(i.modName,i.modVal);t.each(n,function(t,i){c(i)&&(n[t]=function(){var o;if(h(this))o=i;else{var s=u.prototype[t];s&&s!==n[t]&&(o=this.__base)}return o?o.apply(this,arguments):e})})}if(r&&"boolean"==typeof r.live){var d=r.live;r.live=function(){return d}}var p,f=u;return i.baseMix&&(f=[f],i.baseMix.forEach(function(t){f.push(l[t])})),i.block==u._name?(p=a.self(f,n,r))._processLive(!0):((p=l[i.block]=a(f,n,r))._name=i.block,delete p._liveInitable),p},declMix:function(t,e,i){return s(e||(e={})),t=l[t]=a(e,i)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new l[t.block](t.mods,e)},getName:function(){return this._name},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==r.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=r.length;t&&r.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,i=e?0:1,n=arguments.length;for(e&&(t=this);n>i;)delete t[arguments[i++]];return this},channel:function(i,n){return"boolean"==typeof i&&(n=i,i=e),i||(i="default"),n?void(h[i]&&(h[i].un(),delete h[i])):h[i]||(h[i]=new t.observable)}}))}(jQuery),function(t,e,i){function n(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e}function o(t,e,i){null!=e&&e!==!1&&(i.push(c,t),e!==!0&&i.push(c,e))}function s(t,e,i,n){n.push(t),o(e,i,n)}function r(t,e,i,n,r){s(t,a,a,r),r.push(u,e),o(i,n,r)}var a,c="_",u="__",l="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:l,MOD_DELIM:c,ELEM_DELIM:u,buildModPostfix:function(t,e,i){var n=i||[];return o(t,e,n),i?n:n.join("")},buildClass:function(t,e,i,o,c){if(n(i)?n(o)||(c=o,o=i,i=e,e=a):"undefined"!=typeof i?(c=i,i=a):e&&"string"!=typeof e&&(c=e,e=a),!e&&"undefined"==typeof i&&!c)return t;var u=c||[];return e?r(t,e,i,o,u):s(t,i,o,u),c?u:u.join("")},buildClasses:function(t,n,o,a){n&&"string"!=typeof n&&(a=o,o=n,n=i);var c=a||[];return n?r(t,n,i,i,c):s(t,i,i,c),o&&e.each(o,function(e,i){i&&(c.push(" "),n?r(t,n,e,i,c):s(t,e,i,c))}),a?c:c.join("")}}}(BEM,jQuery),BEM.decl("framebuster",{onSetMod:{js:{inited:function(){var t=this._getWindow();if(t.top.location!==t.location){var e=this.matchDomain(t.document.referrer);e&&!this.isInWhitelist(e)&&(t.top.location=t.location)}}}},matchDomain:function(t){if(!t)return null;var e=t.match(/^https?:\/\/([^:\/\s]+)\/?.*/);return e&&e[1]},isInWhitelist:function(t){if(!t)return!0;var e=this.defaultWhitelist().concat(this.params.whitelist||[]);return e.some(function(e){return"string"==typeof e?e===t||-1!==t.indexOf(e,t.length-e.length):!!e.test(t)})},defaultWhitelist:function(){return[]},_getWindow:function(){return window}}),x.ns(this,"ya"),x.ns(this,"home"),function(t,e,i){function n(t,i){var n=t[0];e.each(a(n),function(r,a){s(a,n,r,i);var c=f[a.uniqId];c?c.domElem.index(n)<0&&(c.domElem=c.domElem.add(t),e.extend(c._params,a)):o(r,t,a)})}function o(t,n,o,r,c){"boolean"==typeof o&&(c=r,r=o,o=i);var u=n[0];o=s(o||a(u)[t],u,t);var l=o.uniqId;if(f[l])return f[l]._init();p[l]=p[l]?p[l].add(n):n;var h=u.parentNode;h&&11!==h.nodeType||e.unique(p[l]);var d=v[t]||S.decl(t,{},{live:!0});if(!(d._liveInitable=Boolean(d._processLive()))||r||o.live===!1){r&&n.addClass("i-bem");var m=new d(p[l],o,Boolean(r));return delete p[l],c&&c.apply(m,M.call(arguments,4)),m}}function s(t,i,n,o){(t||(t={})).uniqId||(t.uniqId=(t.id?n+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(i),r=m[s]||(m[s]={});return r[n]||(r[n]=t),t}function r(t,e,i){var n=t.find(e);return i?n:n.add(t.filter(e))}function a(t){var i=e.identify(t);return m[i]||(m[i]=c(t))}function c(t){var i,n,o=t.getAttribute("data-bem");return o?JSON.parse(o):(i=t.onclick||t.ondblclick,i||"body"!=t.tagName.toLowerCase()||(n=e(t),o=n.attr("onclick")||n.attr("ondblclick"),o&&(i=new Function(o))),i?i():{})}function u(t){delete m[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),p={},f={},m={},_={},g={},v=t.blocks,b=t.INTERNAL,y=b.NAME_PATTERN,w=b.MOD_DELIM,k=b.ELEM_DELIM,x=b.buildModPostfix,E=b.buildClass,M=Array.prototype.slice,T=Array.prototype.reverse;e.fn.bem=function(t,e){return o(t,this,e,!0)};var S=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,i,n){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},f[o._uniqId=i.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,i,n)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){return this._findBlocks("find",t,e,!0)},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,n,s,r){if(!this.domElem)return[];s||(s=n,n=i);var a=n?"string"==typeof n?this.findElem(n):n:this.domElem,c="string"==typeof s,u=c?s:s.block||s.blockName,l="."+(c?E(u):E(u,s.modName,s.modVal))+(r?":first":""),h=a.filter(l);if(t&&(h=h.add(a[t](l))),r)return h[0]?o(u,h.eq(0),!0):null;var d=[],p={};return e.each(h,function(t,i){var n=o(u,e(i),!0);p[n._uniqId]||(p[n._uniqId]=!0,d.push(n))}),d},bindToDomElem:function(t,i,n){var o=this;return n?t.bind(o._buildEventName(i),function(t){return(t.data||(t.data={})).domElem=e(this),n.apply(o,arguments)}):e.each(i,function(e,i){o.bindToDomElem(t,e,i)}),o},bindToDoc:function(t,e){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e)},bindToWin:function(t,e){var i,n,o=e;return"resize"===t&&(e=function(){var t=h.height(),e=h.width();i===t&&n===e||(i=t,n=e,o.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,e)},bindTo:function(t,i,n){return!i||e.isFunction(i)?(n=i,i=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,i,n)},unbindFromDomElem:function(t,e){return t.unbind(this._buildEventName(e)),this},unbindFromDoc:function(t){return this.unbindFromDomElem(d,t)},unbindFromWin:function(t){return this.unbindFromDomElem(h,t)},unbindFrom:function(t,e){return e?"string"==typeof t&&(t=this.elem(t)):(e=t,t=this.domElem),this.unbindFromDomElem(t,e)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var i="."+this._uniqId;if(-1===t.indexOf("."))return e[t]=t+i,e[t];var n=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+n:n+"_"+t}).join("")+i,e[t]},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).domElem&&this._ctxTrigger(t,e),this},_ctxTrigger:function(t,i){var n=this,o=_[n.__self._buildCtxEventName(t.type)],s={};o&&n.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var c=e.identify(r,!0);if(c){if(s[c])break;var u=o.ctxs[c];u&&(e.each(u,function(e,o){o.fn.call(o.ctx||n,t,i)}),a--),s[c]=!0}r=r.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,o=[].slice.call(arguments,e?1:0),s=this._extractMods(o,e?t:i);return e||(o.length?o.forEach(function(t){n[t]=s[t]}):n=s),s},setMod:function(t,i,n){if(t&&"undefined"!=typeof n&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,i,n)}),o}return this.__base(t,i,n)},_extractModVal:function(t,e,i){var n,o=(e||this.domElem)[0];return o&&(n=o.className.match(this.__self._buildModValRE(t,i||e))),n?n[2]:""},_extractMods:function(t,e){var i={},n=!t.length,o=0;return((e||this.domElem)[0].className.match(this.__self._buildModValRE("("+(n?y:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=(t=t.trim()).lastIndexOf(w),n=t.substr(0,e-1).lastIndexOf(w);i[t.substr(n+1,e-n-1)]=t.substr(e+1),++o}),o<t.length&&t.forEach(function(t){t in i||(i[t]="")}),i},_afterSetMod:function(t,i,n,o,s){if(!this._isDestructing){var r=this.__self,a=r._buildModClassPrefix(t,s),c=r._buildModValRE(t,s),u=""===i;(o||this.domElem).each(function(){var t=this.className;t.indexOf(a)>-1?this.className=t.replace(c,u?"":"$1"+a+i):u||e(this).addClass(a+i)}),s&&this.dropElemCache(s,t,n).dropElemCache(s,t,i)}},findElem:function(t,e,i,n){arguments.length%2?(n=i,i=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),s=x(i,n),a=[],c=e.map(function(t){return a.push("."+E(o,t,i,n)),t+s}),u=1===c.length,l=r(t,a.join(","));return t===this.domElem&&a.forEach(function(t,i){(this._elemCache[c[i]]=u?l:l.filter(t)).__bemElemName=e[i]},this),l},_elem:function(t,e,i){return this._elemCache[t+x(e,i)]||this.findElem(t,e,i)},elem:function(t,i,n){if(i&&"string"!=typeof i)return i.__bemElemName=t,i;if(t.indexOf(" ")<0)return this._elem(t,i,n);var o=e([]);return t.split(" ").forEach(function(t){o=o.add(this._elem(t,i,n))},this),o},dropElemCache:function(t,e,i){if(t){var n=x(e,i);t.indexOf(" ")<0?delete this._elemCache[t+n]:t.split(" ").forEach(function(t){delete this._elemCache[t+n]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),c(t[0])[E(this.__self.getName(),e)]||{}},elemify:function(t,i){return(t=e(t)).__bemElemName=i,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,i){return this.__self.buildSelector(t,e,i)},destruct:function(t){var i=this,n=i.__self;i._isDestructing||(i._isDestructing=!0,
i._needSpecialUnbind&&n.doc.add(n.win).unbind("."+i._uniqId),i.dropElemCache().domElem.each(function(t,i){var n=a(i);e.each(n,function(t,e){var n=f[e.uniqId];n?n._isDestructing||l(n,i):delete p[e.uniqId]}),u(i)}),t||i.domElem.remove(),delete f[i.un()._uniqId],delete i.domElem,delete i._elemCache,i.__base())}},{scope:null,doc:d,win:h,_processLive:function(t){var e=this._liveInitable;if("live"in this){var i="undefined"==typeof e;if(i^t){e=this.live()!==!1;var n=this.getName(),o=this.live;this.live=function(){return this.getName()===n?e:o.apply(this,arguments)}}}return e},init:function(t,i,o){!t||e.isFunction(t)?(o=i,i=t,t=d):"string"==typeof t&&(t=e(t));var s=e.identify();return r(t,".i-bem").each(function(){n(e(this),s)}),i&&this.afterCurrentEvent(function(){i.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,n,o){"boolean"!=typeof t&&(o=n,n=t,t=i),T.call(r(n,".i-bem",o)).each(function(t,i){var n=a(this);e.each(n,function(t,e){if(e.uniqId){var n=f[e.uniqId];n?l(n,i):delete p[e.uniqId]}}),u(this)}),t||(o?n.empty():n.remove())},update:function(t,e,i,n){return this.destruct(t,!0),this.init(t.html(e),i,n)},replace:function(t,i){return this.destruct(!0,t),this.init(e(i).replaceAll(t))},append:function(t,i){return this.init(e(i).appendTo(t))},prepend:function(t,i){return this.init(e(i).prependTo(t))},before:function(t,i){return this.init(e(i).insertBefore(t))},after:function(t,i){return this.init(e(i).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,i,n,o){var s=this;if(i.indexOf(" ")>-1)i.split(" ").forEach(function(e){s._liveClassBind(t,e,n,o)});else{var r=g[i],a=e.identify(n);r||(r=g[i]={},d.bind(i,s.changeThis(s._liveClassTrigger,s))),r=r[t]||(r[t]={uniqIds:{},fns:[]}),a in r.uniqIds||(r.fns.push({uniqId:a,fn:s._buildLiveEventFn(n,o)}),r.uniqIds[a]=r.fns.length-1)}return this},_liveClassUnbind:function(t,i,n){var o=g[i];if(o)if(n){if(o=o[t]){var s=e.identify(n);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);a>r;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var i=g[t.type];if(i){var n=t.target,o=Object.keys(i);do for(var s,r=" "+n.className+" ",a=0;s=o[a++];)if(-1!==r.indexOf(" "+s+" ")){var c=!1;if(i[s].fns.forEach(function(i){i.fn.call(e(n),t)===!1&&(c=!0)}),c&&t.preventDefault(),c||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(n=n.parentNode))}},_buildLiveEventFn:function(t,i){var n=this;return function(s){var r=[n._name,((s.data||(s.data={})).domElem=e(this)).closest(n.buildSelector()),!0],a=o.apply(null,i?r.concat([t,s]):r);return a&&!i&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,i){return this.liveBindTo(t,e,i,!0)},liveBindTo:function(t,n,o,s){n&&!e.isFunction(n)||(o=n,n=t,t=i),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(E(r._name,e,t.modName,t.modVal),n,o,s)}),r):r._liveClassBind(E(r._name,t.elem,t.modName,t.modVal),n,o,s)},liveUnbindFrom:function(t,n,o){n&&!e.isFunction(n)||(o=n,n=t,t=i);var s=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){s._liveClassUnbind(E(s._name,t),n,o)}),s):s._liveClassUnbind(E(s._name,t),n,o)},_liveInitOnBlockEvent:function(t,e,i,n){var o=this._name;return v[e].on(t,function(t){if(t.block.domElem){var e=arguments,s=t.block[n](o);i&&s.forEach(function(t){i.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOutside")},on:function(t,e,i,n,o){return t.jquery?this._liveCtxBind(t,e,i,n,o):this.__base(t,e,i,n)},un:function(t,e,i,n){return t.jquery?this._liveCtxUnbind(t,e,i,n):this.__base(t,e,i)},liveCtxBind:function(t,e,i,n,o){return this._liveCtxBind(t,e,i,n,o)},_liveCtxBind:function(t,n,o,s,r){var a=this;if("string"==typeof n)if(e.isFunction(o)&&(r=s,s=o,o=i),n.indexOf(" ")>-1)n.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var c=a._buildCtxEventName(n),u=_[c]||(_[c]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),i=u.ctxs[t];i||(i=u.ctxs[t]={},++u.counter),i[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(n,function(e,i){a._liveCtxBind(t,e,i,o)});return a},liveCtxUnbind:function(t,e,i,n){return this._liveCtxUnbind(t,e,i,n)},_liveCtxUnbind:function(t,i,n,o){var s=this,r=_[i=s._buildCtxEventName(i)];return r&&(t.each(function(){var t,i=e.identify(this,!0);i&&(t=r.ctxs[i])&&(n&&delete t[e.identify(n)+(o?e.identify(o):"")],n&&!e.isEmptyObject(t)||(r.counter--,delete r.ctxs[i]))}),r.counter||delete _[i]),s},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t[0].className.match(this._buildElemNameRE());return e?e[1]:i},extractParams:c,_buildModClassPrefix:function(t,e){return E(this._name)+(e?k+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+w+t+w},_buildModValRE:function(t,e,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"("+y+")(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+k+"("+y+")(?:\\s|$)")},buildSelector:function(t,e,i){return"."+E(this._name,t,e,i)},getBlockByUniqId:function(t){return f[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),function(t){BEM.decl("i-visibilitychange",{init:function(){var e=t.document,i=this.changeThis(this.normalize);this.hiddenProp="hidden",this.hiddenProp in e?e.addEventListener("visibilitychange",this.changeThis(function(){this.change(e.hidden)})):(this.hiddenProp="mozHidden")in e?e.addEventListener("mozvisibilitychange",i):(this.hiddenProp="webkitHidden")in e?e.addEventListener("webkitvisibilitychange",i):(this.hiddenProp="msHidden")in e?e.addEventListener("msvisibilitychange",i):"onfocusin"in e?e.onfocusin=e.onfocusout=i:t.onpageshow=t.onpagehide=t.onfocus=t.onblur=i},normalize:function(e){var i,n=t.document,o={focus:!1,focusin:!1,pageshow:!1,blur:!0,focusout:!0,pagehide:!0};e=e||t.event,i=e.type in o?o[e.type]:n[this.hiddenProp],n.hidden=i,$(t).trigger("visibilitychange"),this.change(i)},change:function(t){this.channel("sys").trigger("visibilitychange",{hidden:t}),this.channel("sys").trigger(t?"hidden":"visible")}}),BEM.create("i-visibilitychange").init()}(window),function(t){t.home=t.home||{},home.lang=home.lang||{},home.l10n=function(t){return x.query(t,home.lang)||""}}(this),function(t){var e,i;try{e=t.localStorage,i="ya_ls_test",e.setItem(i,"1"),"1"!==e.getItem(i)?e=null:e.removeItem(i)}catch(n){e=null}var o=t.home||(t.home={}),s=t.console&&function(t){console.log(t)}||function(){},r=function(t){var e="localStorage is disabled. "+(t?t:"");s(e)},a=function(t){try{return t()}catch(e){r(e)}};e?o.localStorage={setItem:function(t,i){return a(function(){return e.setItem(t,i)})},getItem:function(t){return a(function(){return e.getItem(t)})},removeItem:function(t){return a(function(){return e.removeItem(t)})},clear:function(){return a(function(){return e.clear()})},key:function(t){return a(function(){return e.key(t)})}}:(o.localStorage={removeItem:r,setItem:r,getItem:r,clear:r},o.disabledLS=!0)}(window),function(t){"use strict";for(var e=["ms","moz","webkit","o"],i=0;i<e.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[e[i]+"RequestAnimationFrame"];if(void 0===t.requestAnimationFrame){var n,o=[],s=+new Date,r=0,a=function(){var t=o;o=[],r=+new Date,n=0;for(var e=0,i=t.length;i>e;e++)t[e](r-s)};t.requestAnimationFrame=function(e){if(o.push(e),!n){var i=+new Date,s=Math.max(0,16-(i-r));n=t.setTimeout(a,s)}return n},t.requestAnimationFrame.fallback=!0}}(this),home.getTouchEvents=function(t){var e=t.originalEvent;return e.touches&&e.touches.length?e.touches:e.changedTouches},home.getTouchEvent=function(t){var e,i,n,o=home.getTouchEvents(t);return e=o&&o.length?o[0]:t.originalEvent,i=e.pageX||e.clientX,n=e.pageY||e.clientY,{x:i,y:n}},function(t,e,i){function n(t,e){var i={},n=t.originalEvent||{};e||(e={});for(var o,s=0;c>s;s++)o=r[s],i[o]=e[o]||t[o]||n[o]||a[s];return i.x=i.clientX,i.y=i.clientY,i.pressure=i.pressure||(i.buttons?.5:0),i.buttons||u||(i.buttons=l[i.which]||0),i.originalEvent=t.originalEvent||null,e.preventDefault?i.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(i.preventDefault=function(){t.preventDefault()},i._preventScroll=function(){}),i}function o(t,e){var n=i.Event(t),o=e.preventDefault,s=n.preventDefault.bind(n);return jQuery.extend(n,e),n.preventDefault=function(){o(),s()},n}var s={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},r=Object.keys(s),a=r.map(function(t){return s[t]}),c=r.length,u=!1,l=[0,1,4,2];try{u=1===new MouseEvent("test",{buttons:1}).buttons}catch(h){}var d=t.Map&&t.Map.prototype.forEach,p=d?new t.Map:{array:[],size:0,set:function(t,e){return void 0===e?this["delete"](t):(this.has(t)||this.size++,void(this.array[t]=e))},has:function(t){return void 0!==this.array[t]},"delete":function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(i,n){t.call(e,i,n,this)},this)}},f={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var i=e.events;i&&(i.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,i=this.eventSourceList.length,n=0;i>n&&(e=this.eventSourceList[n]);n++)e.register.call(e,t)},unregister:function(t){for(var e,i=this.eventSourceList.length,n=0;i>n&&(e=this.eventSourceList[n]);n++)e.unregister.call(e,t)},contains:function(t,e){return t.contains(e)},getCommonAncestor:function(t,i){for(;t&&t!==e.documentElement;){if(t.contains(i))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){i(t).on(e,this.boundHandler)},removeEvent:function(t,e){i(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var i=o(t,e);return i._target=i._target||e.target,i},fireEvent:function(t,e){var i=this.makeEvent(t,e);return this.dispatchEvent(i)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,n){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=n,this.implicitRelease=this.releaseCapture.bind(this,t),i(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n}))},releaseCapture:function(t){var n=this.captureInfo[t];n&&(this.captureInfo[t]=void 0,i(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n})))},dispatchEvent:function(t){var e=this.getTarget(t);return e?i.event.trigger(t,null,e,!t.bubbles):void 0},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};f.boundHandler=f.eventHandler.bind(f);var m,_,g={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,i=this.lastTouches,n=t.clientX,o=t.clientY,s=0,r=i.length;r>s&&(e=i[s]);s++){var a=Math.abs(n-e.x),c=Math.abs(o-e.y);if(a<=this.DEDUP_DIST&&c<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return n(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(p.has(this.POINTER_ID)&&this.cancel(t),p.set(this.POINTER_ID,t),f.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||f.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=p.get(this.POINTER_ID);e&&e.button===t.button&&(f.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||f.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||f.leaveOut(this.prepareEvent(t))},cancel:function(t){f.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){p["delete"](this.POINTER_ID)}},v={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===p.size||1===p.size&&p.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,o=this.currentTouchEvent,s=t.identifier+2;return n(o,i.extend({},t,{pointerId:s,target:f.captureInfo[s]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(o.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var i=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var n,o=0;o<i.length;o++)n=i[o],e.call(this,this.touchToPointer(n))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=this.scrollTypes;return t===e.EMITTER?"none":t===e.XSCROLLER?"X":t===e.YSCROLLER?"Y":e.SCROLLER.exec(t)?"XY":void 0},shouldScroll:function(t){if(void 0===this.shouldScrollCache){if(this.firstXY){var e,i,n=this.firstTouchTarget;do{if(e=n.getAttribute("touch-action"),null!==e)break;n=n.parentNode}while(n!==document);var o=this.touchActionToScrollType(e);if("none"===o)i=!1;else if("XY"===o||void 0===o)i=!0;else{var s=t.originalEvent.changedTouches[0],r=o,a="Y"===o?"X":"Y",c=Math.abs(s["client"+r]-this.firstXY[r]),u=Math.abs(s["client"+a]-this.firstXY[a]);i=c>=u}return this.shouldScrollCache=i,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache}return!0}return this.shouldScrollCache},findTouch:function(t,e){for(var i,n=0,o=t.length;o>n&&(i=t[n]);n++)if(i.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(p.size>=e.length){var i=[];p.forEach(function(t,n){if(1!==n&&!this.findTouch(e,n-2)){var o=t.out;i.push(o)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){p.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),f.over(t),f.enter(t),f.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=p.get(t.pointerId);if(e){var i=e.out,n=e.outTarget;f.move(t),i&&n!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=n,i.target=n,t.target?(f.leaveOut(i),f.enterOver(t)):(t.target=n,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(f.up(t),f.out(t),f.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){f.cancel(t),f.out(t),f.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){p["delete"](t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=g.lastTouches;if(this.isPrimaryTouch(t)){var i={x:t.clientX,y:t.clientY};e.push(i);var n=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}.bind(null,e,i);setTimeout(n,this.DEDUP_TIMEOUT)}}},b={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},prepareEvent:function(t){var e=n(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){p["delete"](t)},MSPointerDown:function(t){p.set(t.originalEvent.pointerId,t),f.down(this.prepareEvent(t))},MSPointerMove:function(t){f.move(this.prepareEvent(t))},MSPointerUp:function(t){f.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){f.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){f.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){f.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){f.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){f.fireEvent("lostpointercapture",this.prepareEvent(t))}},y=function(t){if(!p.has(t))throw new Error("InvalidPointerId")};t.Element&&Element.prototype.setPointerCapture?(m=function(t,e){t.setPointerCapture(e)},_=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(m=function(t,e){y(e),t.msSetPointerCapture(e)},_=function(t,e){y(e),t.msReleasePointerCapture(e)}):(m=function(t,e){y(e),f.setCapture(e,t)},_=function(t,e){y(e),f.releaseCapture(e,t)}),i.fn.extend({setPointerCapture:function(t){m(this[0],t)},releasePointerCapture:function(t){_(this[0],t)}}),t._pointerPolyfillInited||(t._pointerPolyfillInited=!0,t.PointerEvent?["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e=jQuery.event.fixHooks,i="pointer"+t;e[i]||(e[i]={}),e[i].props=r.concat(e[i].props||[])}):(delete i.event.special.pointerenter,delete i.event.special.pointerleave,t.navigator.msPointerEnabled?f.registerSource("ms",b):(f.registerSource("mouse",g),void 0!==t.ontouchstart&&f.registerSource("touch",v)),f.register(document)))}(window,document,jQuery),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,i){function n(i){var n,o=i.type;return"mouse"===i.pointerType&&1!==i.which||(i.type=e,n=t.event.dispatch.apply(this,arguments),i.type=o),n}t.event.special[e]={setup:function(){t(this).on(i,n)},teardown:function(){t(this).off(i,n)}}})}(jQuery),$.extend({util:{}}),function(){function t(t){return"[object Object]"===n.call(t)}function e(i,n,o){var s,r;i=Object(i),n=Object(n);for(s in n)r=o&&o(i[s],n[s],s),void 0!==r?i[s]=r:t(i[s])&&t(n[s])?i[s]=e(i[s],n[s],o):i[s]=n[s];return i}function i(t,i){return e(t,i,function(t,e,i){return"mix"===i?[].concat(t,e):void 0})}var n=Object.prototype.toString;$.extend($.util,{merge:e,mergeBemjson:i})}(),jQuery.cookie=function(t,e,i){if("undefined"==typeof e){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){n=decodeURIComponent(r.substring(t.length+1));break}}return n}i=i||{},null===e&&(e="",i.expires=-1);var a="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var c;"number"==typeof i.expires?(c=new Date,c.setTime(c.getTime()+24*i.expires*60*60*1e3)):c=i.expires,a="; expires="+c.toUTCString()}var u=i.path?"; path="+i.path:"",l=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,u,l,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return n[t]||t})}function i(t,i){var n="";try{n=t(i)}catch(o){try{n=t(e(i))}catch(s){n=i}}return n}var n={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return i(decodeURI,t)},decodeURIComponent:function(t){return i(decodeURIComponent,t)}})}(jQuery),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){return"undefined"==typeof e?(this._params||{})[t]:void(this._params&&(this._params[t]=e))}}),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(-1===i)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(-1===n?e.substring(i):e.substring(i,n))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(i){return(i=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":i.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},i,e.params))["show-counters"]=Math.round(100*Math.random())<=i["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},i),i}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(i,n){i=i||document,n=n||".g-js",t(i).find(n).each(function(){var i=t(this),n=this.onclick?this.onclick():{},o=n.name||"",s=e.block[o];s&&!i.data(o)&&(s.call(i,n),i.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=Boolean(t(document).ready(function(){e.blockInit()})))}(jQuery,window.Lego),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return Boolean(t.getCookie("yandex_login"))}}(window.Lego),function(t,e){var i=1,n=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?i=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(i=t.devicePixelRatio),"function"==typeof t.matchMedia){var o="only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)";n=t.matchMedia(o).matches}else n=i>=1.3;var s={};/msie|trident/i.test(e)?s.ie=parseInt(e.split(/msie|rv:/i)[1],10):t.opera&&(s.opera=parseInt(t.opera.version(),10));var r,a={},c={};(r=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?a.wp=r[1]:(r=e.match(/Android\s+([\d.]+)/))?a.android=r[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?a.android="2.3":(r=e.match(/iPhone\sOS\s([\d_]+)/))?(a.ios=r[1].replace(/_/g,"."),c.iphone=!0):(r=e.match(/iPad.*OS\s([\d_]+)/))?(a.ios=r[1].replace(/_/g,"."),c.ipad=!0):(r=e.match(/Bada\/([\d.]+)/))?a.bada=r[1]:(r=e.match(/MSIE\s9/))?a.wp="7.5":a.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(i){return t[i]&&(e=i)}),this.setMod("platform",e),t.hiDpi&&this.setMod("hi-dpi","yes")}}}},{ios:a.ios,iphone:c.iphone,ipad:c.ipad,android:a.android,bada:a.bada,wp:a.wp,other:a.other,dpr:i,hiDpi:n,ua:e,ie:s.ie,opera:s.opera})}(window,navigator.userAgent),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){return this.hasMod("disabled")?!1:void(this._focused||this._focus())},"":function(){this._focused&&this._blur()}},disabled:{"*":function(t,e){var i=this._getControl(),n=Boolean(e);i.prop("disabled",n).attr("aria-disabled",n),i.attr("tabindex",n?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.delMod("focused").unbindFrom("focusout")}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),this._url=this.domElem.attr("href"),this.domElem.removeAttr("href"),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),function(){function t(){i.hasClass("pointerfocus")&&(o=!0,setTimeout(function(){o=!1}))}var e=$(window),i=$(document.documentElement),n=0,o=!1;document.documentMode<=9?i.on("focusin",function(e){var i=e.originalEvent;!i||i.fromElement||i.relatedTarget||t()}):e.on("blur",function(){e.one("focus",t)}),i.addClass("utilityfocus").on({focusin:function(){i.toggleClass("pointerfocus",o).toggleClass("utilityfocus",!o)},keydown:function(){clearTimeout(n),o=!1},"pointerdown pointerup click":function(t){o=!0,clearTimeout(n),n=setTimeout(function(){o=!1},600)}})}(),function(t,e){function i(t){t.isPrimary&&(m.push(t),setTimeout(Array.prototype.shift.bind(m),p))}function n(t,e){return Math.abs(t.clientX-e.clientX)>h||Math.abs(t.clientY-e.clientY)>h}function o(t){var e=t.clientX,i=t.clientY,n="_compat"+t.type;if(!t._sourcePoint){for(var o=0;o<m.length;o++){var s=m[o];if(!s[n]&&!(Math.abs(e-s.clientX)>d||Math.abs(i-s.clientY)>d||s.target!==t.target&&document.elementFromPoint(s.clientX,s.clientY)===s.target)){t._sourcePoint=s,s[n]=t;break}}_.push(t),setTimeout(Array.prototype.shift.bind(_),p)}}function s(t){for(var e=0;e<_.length;e++)if(_[e]===t)return _[e]._sourcePoint}function r(t){var e=s(t);return Boolean(e)&&e.target!==t.target}function a(t){var i,n=t.type;return t.button||(t.type="pointerclick",i=e.event.dispatch.apply(this,arguments),t.type=n),i}if(!e.event.special.pointerclick){var c,u=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,l="touchAction"in document.documentElement.style,h=10,d=25,p=900,f=250,m=[],_=[],g=null,v=null,b=l?function(t){function e(t){return t===document.documentElement?!1:"manipulation"===getComputedStyle(t)["touch-action"]||e(t.parentElement)}return e(t)}:function(){return!1};u?(c={click:function(t){var e=Object(t.originalEvent)._sourcePoint;return e?void(e.isDefaultPrevented()&&t.preventDefault()):a.apply(this,arguments)},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==e&&"pointerup"!==e||!b(t.target)))if("pointerdown"===e)v=t;else if("pointermove"===e&&v&&(v.target!==t.target||n(v,t)))v=null;else if("pointerleave"===e||"pointercancel"===e)v=null;else if("pointerup"===e){if(i(t),!v)return;if(!(t.timeStamp-v.timeStamp>f))return g||(g=setTimeout(function(){g=v=null})),a.apply(this,arguments);v=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){o(t),r(t)&&(t.preventDefault(),t.stopPropagation())},!0)})):c={click:function(t){return a.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(c)},teardown:function(){e(this).off(c)}}}}(window,jQuery),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.afterCurrentEvent(function(){this.trigger("click",this._buildClickEventData(t))})},_onKeydown:function(t){t.shiftKey||t.altKey||BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){t.shiftKey||t.altKey||BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.afterCurrentEvent(function(){
this.trigger("click")}),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"click",function(t){t.preventDefault()}),this.__base()}}),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),window.home=window.home||{},function(t){t.getData=function(e,i){var n,o,s,r,a="export",c=e.split("."),u=c.length;if(u>1){for(o=t[a]||{},s=0;u>s;s++)if(n=c[s],o=o[n],"undefined"==typeof o)return"undefined"==typeof o?i:o;return"undefined"==typeof o?i:o}return a="export",r=t&&t[a]&&t[a][e],"undefined"==typeof r?i:r},t.dataCallbacks=t.dataCallbacks||[],t.subscribeData=function(e){t["export"]?e():t.dataCallbacks.push(e)}}(home),function(){var t,e={isAuthenticated:!1,isFeedbackReceived:!1,isRequestSent:!1},i=function(){};BEM.decl("i-mda-auth",{},{authenticate:function(n){if(t=Lego.params["mda-auth-url"]||home.getData("i-mda-auth.url")||"",""===t)return!1;var o=Lego.params["mda-auth-delay"]||10;i=n||function(){},setTimeout(function(){var i=document.createElement("iframe");i.style.visibility="hidden",i.style.position="absolute",i.setAttribute("src",t),i.name="i-mda-auth"+(Math.random()+"").substr(3,7),i.style.top=i.style.left=i.style.width=i.style.height=0,document.getElementsByTagName("body")[0].appendChild(i),e.isRequestSent=!0},o)},isRequestSent:function(){return e.isRequestSent},isFeedbackReceived:function(){return e.isFeedbackReceived},isAuthenticated:function(){return e.isAuthenticated},getUrl:function(){return t},registerFeedback:function(t){var n="success"===t;e.isFeedbackReceived=!0,e.isAuthenticated=n,i(n)}})}(),function(){"use strict";var t,e=!1,i=[];home.pseudoReady=function(n){e?setTimeout(n,0):(i.push(n),t||(t=setTimeout(function o(){if(document.body&&home["export"]){e=!0;for(var t=0;t<i.length;++t)setTimeout(i[t],0)}else setTimeout(o,100)},100)))}}(),function(){function t(t,e,i){n||(n=a('<iframe style="display:none" src="'+t+'" name="ga"></iframe>'));var r=function(){n.contentWindow.postMessage&&n.contentWindow.postMessage({type:"params",params:e,labels:i},"*")};s?r():n.onload=function(){s=!0,r()},o||(document.body.appendChild(n),o=!0)}function e(t){c||(c=a('<iframe style="display:none" src="'+t+'" name="ga-ex"></iframe>')),u||(document.body.appendChild(c),u=!0)}function i(){return window.home&&home.getData&&home.getData("ga-counter.data")}var n=null,o=!1,s=!1,r=document.createElement("div"),a=function(t){return r.innerHTML=t,r.firstChild},c=null,u=!1;window.home=window.home||{},window.home.gaCounter={track:function(e){var n=i();n&&n.customLabels&&n.customLabels[e]&&t(n.iframeSrc,null,n.customLabels[e])},trackCancel:function(){this.track("cancel")},trackCancelPopup:function(){this.track("cancelPopup")}},home.pseudoReady(function(){function n(){return d.swb}function o(){if(n())return!0;var t;try{t=localStorage.getItem("gaCounterShowTime")}catch(e){}return!t||Number(t)<d.ignoreLSBefore||+new Date-Number(t)>d.showTimeout}function s(){try{localStorage.setItem("gaCounterShowTime",+new Date)}catch(t){}}function r(){var t=window.performance&&performance.timing&&performance.timing.responseEnd&&performance.timing.responseStart?performance.timing.responseEnd-performance.timing.responseStart:null;if(d.statDownloadTime&&t){if(t>Number(d.statDownloadTime[1]))return"slow=2";if(t>Number(d.statDownloadTime[0]))return"slow=1"}return""}function a(){return d.csc?"csc="+d.csc:""}function c(){return d.refg?"refg=1":""}function u(){return d.swb?"swb=1":""}function l(){for(var t=[],e=0,i=arguments.length;i>e;e++)arguments[e]&&t.push(arguments[e]);return t.length?"?"+t.join("&"):""}function h(){d.iframeSrcEx?e(d.iframeSrcEx+l(r(),a(),c(),u())):d.iframeSrc&&t(d.iframeSrc,d.params,d.labels)}var d=i();d&&o()&&setTimeout(function(){h(),s()},d.timeout)})}(),BEM.DOM.decl("b-sethome",{hide:function(){this.setMod("state","hidden")}},{live:!0}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"ie"},{onSetMod:{js:function(){var t=this;t.homeUrl=t.params.homeUrl,t._getHomePage(),t.bindTo("link","pointerclick",function(){t._setHomePage()})}},_setHomePage:function(){try{return document.body.style.behavior="url(#default#homepage)",document.body.setHomePage(this.homeUrl),this._getHomePage(),!1}catch(t){}},_getHomePage:function(){var t=document.body,e=Lego.params["lang-zone"]||"ru";return t.style.behavior="url(#default#homepage)",t.isHomePage("http://yandex."+e+"/")||t.isHomePage("http://www.yandex."+e+"/")||t.isHomePage(this.homeUrl)?(this.setMod("show","bar"),!0):void 0}}),BEM.DOM.decl({name:"b-sethome",modName:"type",modVal:"chrome"},{_action:function(){var t=this,e=this.params,i=home.ds.decl(e.distStatParts);return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:"chrome"}},$.extend(e,{callbacks:{yes:function(){t.hide(),i.send("install")},no:function(){i.send("error")}}}))),i.send("click"),home.stat.logPath("click",e.counters.link),this._inlineInstall.request().fail(function(){t.hide()}),!1}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("link","pointerclick",function(){return this._action()})}}),BEM.KEYS={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9},function(){var t={};for(var e in BEM.KEYS)BEM.KEYS.hasOwnProperty(e)&&(t[BEM.KEYS[e]]=e);var i={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",META:"metaKey"},n=function(e){var n=t[e.which]||"";for(var o in i)i.hasOwnProperty(o)&&e[i[o]]&&(n=o+"+"+n);return n},o=function(t){var e={};return t.split(" ").forEach(function(t){var n=t.split("+");n.forEach(function(e){var n=e.toUpperCase();if(!(n in i||n in BEM.KEYS))throw"i-keys.js: Unknown key "+t}),e[t.toUpperCase()]=!0}),e};BEM.DOM.liveBindKey=function(t,e,i){var s;return $.isFunction(e)&&(i=e,e=t,t=void 0),s=o(e),this.liveBindTo(t,"keydown",function(t){var e=n(t);e in s&&i.call(this,t)===!1&&t.preventDefault()})},BEM.DOM.prototype.bindKeyTo=function(t,e,i){function s(t){var e=n(t);e in r&&i.call(this,t)===!1&&t.preventDefault()}var r;return $.isFunction(e)&&(i=e,e=t,t=void 0),r=o(e),t===document?this.bindToDoc("keydown",s):t===window?this.bindToWin("keydown",s):this.bindTo(t,"keydown",s)}}(),BEM.DOM.decl("dropdown",{onSetMod:{js:{inited:function(){var t=this,e=t.params,i=t.findBlockOn(t.elem(e.popupElem),"popup"),n=t.elem("switcher"),o=e.switcherBlock;t._popup=i,t._switcher=n,i.on("show",t._onPopupShow,t).on("hide",t._onPopupHide,t),e.popupMethods.map(function(e){t[e]=i[e].bind(i)}),o&&(t._switcher=t.findBlockOn(n,o).domElem),n.attr({"aria-haspopup":!0,"aria-expanded":!1})}},action:function(t,e){var i="open"===e;this.elem("switcher").attr("aria-expanded",i),this._getButton()&&this._getButton().toggleMod("arrow","up","down",i)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},_toggle:function(){var t=["button","link"].some(function(t){var e=this.findBlockOn("switcher",t);return e&&e.hasMod("disabled")},this);t&&!this._popup.isShown()||this._popup.toggle(this._switcher)},_onSwitcherClick:function(){this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase(),i=BEM.blocks.keycodes;"button"!==e&&("a"!==e&&t.keyCode===i.ENTER||t.keyCode===i.SPACE)&&(t.preventDefault(),this.params.switcherBlock||this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")},destruct:function(){this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}}},{live:function(){this.liveBindTo("switcher","pointerclick",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.decl("dropdown",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._switcher=this._switcher||this.elem("switcher")}},_onSwitcherClick:function(t){this._toggle(),t.preventDefault()}}),BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,i=this._repackDirParams(t.directions),n=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(n);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],n=i.directions[t];return n||(n=i.directions[e.to]),this._directions[t]=this._mergeParams(n,e,{tail:this._tailParamsHook}),t},this)}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e;var i=this._findParent(e);i&&this.setParent(i)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach(function(t){t.hide()}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var i=this;return this.beforeHide(function(){i.domElem&&i.delMod("visibility")}),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild(this),this},addChild:function(t){for(var e=this._childs,i=e.length,n=0;i>n;n++)if(e[n]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),e.push(t)},removeChild:function(t){for(var e=this._childs,i=e.length,n=0;i>n;n++)if(e[n]._uniqId===t._uniqId)return void e.splice(n,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this.bindToDoc("keydown",function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_onHidden:function(){this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));return this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0===this._firstFocusable.length?void(this._skipReturnFocus=!0):void this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown)},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){this._lastFocused.is(this._scope)&&!this._lastFocused.is(t.target)||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){var t=(this._parent||{})._skipReturnFocus||this._skipReturnFocus;t||this._lastFocused.focus()},_mergeParams:function(t,e,i){var n={},o=Object.prototype.hasOwnProperty;return i||(i={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(s){var r=o.call(i,s)?i[s].call(this,t[s],e[s]):e[s];!r||"object"!=typeof r||Array.isArray(r)?n[s]=r:t[s]?n[s]=this._mergeParams(t[s],r,i):n[s]=r},this),n},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],i=e,n=t.length,o=[],s=0;n>s;s++)for(var r=t[s],a=r.length,c=0;a>c;c++)for(var u=e[s],l=u.length,h=0;l>h;h++)for(var d=i[s],p=d.length,f=0;p>f;f++)o.push({direction:r[c],axis:u[h],tail:{axis:d[f]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e={},i=[];return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),i=t.map(function(t){if("string"==typeof t){var i=t.split("-");t={to:i[0],tail:{}},i[1]&&(t.axis=i[1]),i[2]&&(t.tail.axis=i[2])}var n=t.to;return e[n]||(e[n]=t),t.axis&&(n+="-"+t.axis),t.key=n,e[n]=t,n},this),{directions:e,keys:i}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,i=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;i>t;t++){var n=e[t],o=this._directions[n];this._resetPos(n)._pushPos(n,this._calcPos(o))._pushPos(n,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(n)._pushTailPos(n,this._calcTailPos(o))._pushTailPos(n,this._calcTailOffset(o))._pushPos(n,this._calcOffsetByTail(o)),this._pushPos(n,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[n],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),i=this.getOwnerSize(),n=this.getPlacingSize(),o=t.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":r={top:a.call(s,"top")?s.top:e.top+i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:e.top-n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left-n.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left+i.width}}return r},_calcTop:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=n.top:"middle"===t?e+=n.top+o.height/2-i.height/2:"bottom"===t&&(e+=n.top+o.height-i.height),e},_calcLeft:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=n.left:"center"===t?e+=n.left+o.width/2-i.width/2:"right"===t&&(e+=n.left+o.width-i.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,i=this._cache.offset||(this._cache.offset={}),n=t.key,o=t.offset;if(i[n])return i[n];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(n){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return i[n]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,i){i!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),i):(i=e,Object.keys(t).forEach(function(e){this._sum(t[e],i)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(i){t[i]=(t[i]||0)+e[i]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,i,n=this._viewport,o=this._getSizeOf(n),s=this.getPopupSize(),r=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},c=this.hasMod("position","fixed")?{top:0,left:0}:{top:n.scrollTop(),left:n.scrollLeft()},u=r.top+a.top-c.top,l=r.left+a.left-c.left,h=l+s.width-o.width,d=u+s.height-o.height,p={height:s.height,width:s.width},f=100;return d>0&&(p.height-=d),0>u&&(p.height+=u),0>l&&(p.width+=l),h>0&&(p.width-=h),p.height<0||p.width<0?f=0:(i=Math.abs(p.height*p.width),e=s.height*s.width,e!==i&&(f=i/e*100)),f},_findParent:function(t){return this.findBlockOutside(t,"popup")},destruct:function(){return this._childs.forEach(function(t){BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this.__base.apply(this,arguments)},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",function(){this.hide({source:"close-click"})})},_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var i="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(i=""),t.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),i=!0;return parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility")?!1:($(this).parentsUntil(e).each(function(){var t=$(this);return"none"===t.css("display")?i=!1:void 0}),i)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{_getPosOf:function(t){var e,i=t.offset();return i?(this._getPosOfTmpElem||(this._getPosOfTmpElem=$('<div class="popup__getposoffix" style="position:absolute;left:0;top:0">').appendTo("body")),e=this._getPosOfTmpElem.offset(),i.left-=e.left,i.top-=e.top,i):{left:0,top:0}}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",function(t){t.stopPropagation(),this.hide({source:"outside-click"})}),this.bindTo(t,"pointerdown",function(){this._skipReturnFocus=!0})),this.bindToDoc("pointerclick",function(t){if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}}),this.bindToDoc("pointerdown",function(){this._skipReturnFocus=!0})}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var i,n=this._childs.length;for(i=0;n>i;i++)if(this.containsDomElem.call({domElem:this._childs[i].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,i=this.getCurrPos(),n={opacity:1,top:i.top,left:i.left},o={opacity:0,top:i.top,left:i.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(n,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var i=e.to,n=this.getCurrPos(),o=this.domElem,s={top:n.top,left:n.left,opacity:0};return"bottom"===i?s.top+=10:"top"===i?s.top-=10:"left"===i?s.left-=10:"right"===i&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,function(){t(),o.css("opacity","")})}}),function(t){t.dom={getActiveElement:function(){try{return t(document.activeElement)}catch(e){return t()}}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(t){var e=t.to,i=this._positions[t.key],n=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(n,i):"left"!==e&&"right"!==e||(o.top=this._calcTailTop(n,i)),o},_calcTailTop:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,c=o.top-e.top,u=e.top+r.height-(o.top+n.height);return c>0&&(i+=c,a-=c),u>0&&(a-=u),"middle"===t?(a-=s,i+=a/2):"bottom"===t&&(a-=s,i+=a),0>i&&(i=0),i},_calcTailLeft:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-e.left,c=r.width,u=e.left+r.width-(o.left+n.width);return a>0&&(i+=a,c-=a),u>0&&(c-=u),"center"===t?(c-=s,i+=c/2):"right"===t&&(c-=s,i+=c),i},_calcOffsetByTail:function(t){var e=this.params.tail,i=e.height,n={};switch(t.to){case"top":n={top:-i};break;case"bottom":n={top:i};break;case"right":n={left:i};break;case"left":n={left:-i}}return n},_calcTailOffset:function(t){var e={},i=t.to,n=t.tail,o=n.offset,s=n.axis;return o?("top"===i||"bottom"===i?(e.left=0,"left"===s?e.left+=o.left:"center"===s?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===s&&(e.left-=o.right)):"left"!==i&&"right"!==i||(e.top=0,"top"===s?e.top+=o.top:"middle"===s?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===s&&(e.top-=o.bottom)),e):!1},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),$(function(){"use strict";var t=home.getData("i-bannerid.csl");BEM.decl("i-bannerid",{},{save:function(e){if(!t)throw new Error("i-bannerid: Cookie set link wasn't passed");if(!e)throw new Error("i-bannerid: Bannerid wasn't passed");var i=$(".i-bannerid"),n=x.stringf(t,e);i.length||(i=$('<iframe class="i-bannerid" name="i-bannerid" style="display:none"/>'),$(document.body).append(i)),i.attr("src")!==n&&i.attr("src",n)}})}),function(){"use strict";home.ds=function(t,e,i){var n=BEM.blocks["i-global"],o="tech.portal-ads."+t.el,s=["-reqid="+n.param("msid"),"-eventtype="+t.e,"-productname="+t.p].join();n.param("distStat")&&Lego.cp(198,198,o,s,e,i)},home.ds.decl=function(t){return{send:function(e){if("object"!=typeof t)throw new Error("ds: distStatParts isn't a object");if(!e)throw new Error("ds: there is no event passed");home.ds({el:t.el,p:t.p,e:e})}}}}(),BEM.decl("i-inline-install",{init:function(){if(!this.params||!this.params.url)throw new Error("Inline installation requires url of extension");this.message=null,this.agreement=null,this.inited=null,this.visitParams=this.__self._constructVisitParams(this.params.metrikaParams),this.counters=this.__self._getCounters(this.params.statPath),this.requestDeferred=null,this.reqStart=null;var t=this.params.metrikaParams||{};return t.goals&&t.id&&(this.metrika=this.__self._getPortalMetrika(t.id)),this.curtain=BEM.blocks["promo-curtain"].get(this.params.curtainOpts,this),this.__self._appendInlineUrlToHead(this.params.url),this.inited=!0,this},request:function(){if(this.inited||this.init(),this.requestDeferred&&"pending"===this.requestDeferred.state())return this.requestDeferred.promise();if(this.requestDeferred=$.Deferred(),this.reqStart=Date.now(),!this._checkApi())return home.stat.logPath("tech",this.counters.bad_ua),this.requestDeferred.reject().promise();try{this.trigger("request"),this._requestApi(this.params.url,this._onSuccess.bind(this),this._onFailure.bind(this)),["yes","no","bad_ua","bad_ext_url","fast_reject","install_error","error"].forEach(function(t){home.stat.logPath("show",this.counters[t])},this)}catch(t){this.requestDeferred.reject(),this.trigger("error"),"string"==typeof t&&0===t.indexOf("Invalid")?home.stat.logPath("tech",this.counters.bad_ext_url):(home.stat.logPath("tech",this.counters.error),this.__self._blockError([t&&t.message?"message:"+t.message:"",this.params.statPath?"stat:"+this.params.statPath:""].filter(Boolean).join(", ")))}return this.requestDeferred.promise()},_onSuccess:function(){this.requestDeferred.resolve(),home.stat.logPath("click",this.counters.yes),this._reachGoal("yes"),this._fireExternalCallback("yes"),this.trigger("success"),this.__self._saveToYsCookie(this.params.bannerid)},_onFailure:function(t,e){return this.trigger("cancel"),e&&"userCancelled"!==e?(this.requestDeferred.reject(),void home.stat.logPath("tech",this.counters.install_error)):(this.requestDeferred.resolve(),home.stat.logPath("click",this.counters.no),this._reachGoal("no"),this._fireExternalCallback("no"),Date.now()-this.reqStart<1e3&&home.stat.logPath("tech",this.counters.fast_reject),void window.home.gaCounter.trackCancel())},_fireExternalCallback:function(t){var e=this.params.callbacks||{};e[t]&&e[t]()},_checkApi:function(){},_requestApi:function(){return!1},_reachGoal:function(t){var e=this,i=this.params.metrikaParams;i&&i.goals&&i.goals[t]&&this.metrika.done(function(n){n.reachGoal(i.goals[t],e.visitParams)})}},{_constructVisitParams:function(t){if(t&&t.channel&&t.bannerid){var e={channel:{}};return e.channel[t.channel]={banner_id:t.bannerid},e}},_getPortalMetrika:function(t){var e=$.Deferred();try{window["yaCounter"+t]?e.resolve(window["yaCounter"+t]):(window["yaCounter"+t]=new window.Ya.Metrika({id:t,triggerEvent:!0}),$(document).one("yacounter"+t+"inited",function(){e.resolve(window["yaCounter"+t])}))}catch(i){e.reject()}return e.promise()},_saveToYsCookie:function(t){t&&BEM.blocks["i-bannerid"].save(t)},_getCounters:function(t){return t?{yes:t+".yes",no:t+".no",error:t+".error",fast_reject:t+".fast_reject",bad_ua:t+".bad_ua",bad_ext_url:t+".bad_ext_url",install_error:t+".install_error"}:{}},_appendInlineUrlToHead:function(t){return $(document.head).append($("<link />",{rel:"chrome-webstore-item",href:t}))},_blockError:function(t){home.getData("i-inline-install.logDisabled")||((new Image).src="/instant/log?type=blockerror&showid=%reqid%&message=[i-inline-install] %message%".replace("%reqid%",home.getData("timing.reqid")||"null").replace("%message%",t))}}),BEM.DOM.decl("promo-curtain",{onSetMod:{js:function(){this.params.langs=this.params.langs||home.getData("promo-curtain.langs"),this.params.offset={top:this.params.offset&&this.params.offset.top||this._getMessageOffsetTop(this.params.gap),left:this.__self.MESSAGE_OFFSET_LEFT},$(home.view("promo-curtain__message",this.params)).appendTo(this.domElem),
this.params.owner&&this.params.owner.on({request:this.show,"success cancel error":this.hide},this)}},show:function(){this.afterCurrentEvent(function(){this.setMod("active","yes")}),BEM.DOM.scope.addClass("b-page_overflow_hidden")},hide:function(){this.delMod("active"),BEM.DOM.scope.removeClass("b-page_overflow_hidden")},_getMessageOffsetTop:function(t){var e=this.__self.MESSAGE_OFFSET_TOP,i=this.__self["tr"===navigator.language?"GAP_TOP_OFFSET_COMTR":"GAP_TOP_OFFSET"][t];return i&&(e+=i),e}},{get:function(t,e){if(t&&t.theme){var i={};return e&&(i.owner=e),$(home.view("promo-curtain__layout",{mods:{theme:t.theme}})).appendTo("body").bem("promo-curtain",$.extend(t,i))}},GAP_TOP_OFFSET:{s:20,m:40,l:60},GAP_TOP_OFFSET_COMTR:{s:20,m:70,l:110},SHOW_MESSAGE_TIMEOUT:500,MESSAGE_OFFSET_TOP:335,MESSAGE_OFFSET_LEFT:175}),home.htmlFilter=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},home.getBEMParams=function(t){return home.htmlFilter(JSON.stringify(t))},home.getBEMClassname=function(t,e){var i,n=e.mods,o=t;if(e.mix&&(o+=" "+e.mix),n)for(i in n)n.hasOwnProperty(i)&&(n[i]||0===n[i])&&(o+=" "+t+"_"+i+"_"+n[i]);return o},home.getAttributes=function(t){if(!t)return"";var e,i="";for(e in t)if(t.hasOwnProperty(e)){var n=t[e];(n||0===n)&&(n=n.toString().replace(/"/g,"&quot;"),i+=" "+e+'="'+n+'"')}return i},BEM.decl({block:"i-inline-install",modName:"api",modVal:"chrome"},{_checkApi:function(){return!!window.chrome&&window.chrome.webstore&&window.chrome.webstore.install},_requestApi:function(t,e,i){window.chrome.webstore.install(t,e,i)}}),$(function(){function t(t){this.callback=t,this.items=0,this.results={}}if("undefined"!=typeof diskUploaderParams){t.prototype.add=function(t,e){var i=this;return this.items++,function(){var n=e.apply(e,arguments);i.check(t,n)}},t.prototype.check=function(t,e){this.results[t]=e,this.items--,0===this.items&&this.callback(this.results)},t.prototype.done=function(){this.callback(this.results)};var e=function(){this.sk=diskUploaderParams.sk,this.files=[],this.statusesTimers={},this.areaShown=!1,this.wrapTimer=null,this.uploadQueue=[],this.maxSize=314572800,this.disabled=!1,this.goLink=home.view("link",{mod:"b-disk-uploader__go",href:diskUploaderParams.uploadLinkUrl,content:diskUploaderParams.uploadLinkText})};e.prototype.push=function(t){this.files.push({file:t,status:0})},e.prototype.store=function(){for(var e,i=new t(function(t){var e,i,o=[],s=0;for(i in t)t.hasOwnProperty(i)&&(e=t[i],2===e.status&&o.push(e),s+=e.file.size);if(o.length)n.showForceDialog(o);else{var r=home.rnd(),a=0;n.uploadQueue.push(r);for(i in t)t.hasOwnProperty(i)&&(t[i].queueId=r,a++);n.uploadFiles()}}),n=this,o=0,s=this.files.length;s>o;o++)e=this.files[o],0!==e.status&&3!==e.status||(e.id||(e.id=home.rnd()),this.storeFile(e,i.add(e.id,this.storeFileHandler)));n.hideArea()},e.prototype.storeFile=function(t,e){return 3===t.status?void e(t):($.ajax({url:"https://mail.yandex."+diskUploaderParams.zone+"/api/disk_handler?handle=store&upload_from_main=1&sk="+this.sk+"&path=/disk/"+t.file.name+(t.force?"&force=1":""),method:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(i){i.oid&&i.upload_url?(t.status=3,t.oid=i.oid,t.upload_url=i.upload_url):47===i.code&&(t.status=2),e(t)},failure:function(){t.status=-1,e(t)}}),void(t.status=1))},e.prototype.storeFileHandler=function(t){return t},e.prototype.uploadFiles=function(){for(var t,e=0,i=0,n=this.files.length;n>i;i++)t=this.files[i],3===t.status&&(this.uploadFile(t),this.checkTimer(t,1e3,!1),e++);1===e?home.stat.logPath("click",diskUploaderParams.statUploadOne):e>1&&home.stat.logPath("click",diskUploaderParams.statUploadMany),this.updateStatuses()},e.prototype.uploadFile=function(t){var e=new FormData,i=this;e.append("file",t.file),t.xhr=$.ajax({url:t.upload_url,data:e,cache:!1,contentType:!1,processData:!1,type:"POST",error:function(){t.status>0&&(t.status=-1,i.updateStatuses())}}),t.status=4},e.prototype.showInfoDialog=function(t){this.disabled=!0,this.infoPopupTitle.text(diskUploaderParams[t?"incorrectFiles":"incorrectFilesPart"]),this.infoPopup.show()},e.prototype.showForceDialog=function(t){var e,i,n,o="";for(i=0,n=t.length;n>i;i++)e=t[i],o+=home.view("b-disk-uploader__force_item",{id:e.id,text:e.file.name});$(document).trigger("popupsClose.lego");var s=$(".popup_visibility_visible:not(.b-topbar__popup)"),r=$(".popup_visibility_visible");s.length&&s.bem("popup").hide(),r.length&&r.bem("popup").hide(),this.disabled=!0,this.forcePopupContent.html(o),this.forcePopup.show(),1===n&&($(".b-disk-uploader__force_box").attr("checked","checked").hide(),$(".b-disk-uploader__force_label").css("margin-left",0)),this.fixParanja()},e.prototype.collectForceFiles=function(){var t=this;$(".b-disk-uploader__force_box",this.forcePopupContent).each(function(){var e=t.gitFileInfo(this.id);e&&2===e.status&&(this.checked?(e.status=0,e.force=!0):e.status=-2)}),this.store(),this.forcePopup.hide()},e.prototype.gitFileInfo=function(t){for(var e=0,i=this.files.length;i>e;e++)if(this.files[e].id===t)return this.files[e];return null},e.prototype.checkTimer=function(t,e,i){var n=this;this.statusesTimers[t.id]=setTimeout(function(){i?n.checkFocus(t):n.checkStatus(t)},e)},e.prototype.focusEvents=function(){this.windowFocused=!0;var t=this;$.browser&&$.browser.msie?($(document).bind("focusout",function(){t.windowFocused=!1}),$(document).bind("focusin",function(){t.windowFocused=!0})):($(window).focus(function(){t.windowFocused=!0}),$(window).blur(function(){t.windowFocused=!1}))},e.prototype.checkFocus=function(t){var e=this;if(this.windowFocused)this.checkStatus(t);else{var i=function(){$.browser&&$.browser.msie?$(document).unbind("focusin",i):$(window).unbind("focus",i);var n=Math.round(4e3*Math.random());setTimeout(function(){e.checkStatus(t)},n)};$.browser&&$.browser.msie?$(document).bind("focusin",i):$(window).bind("focus",i)}},e.prototype.checkStatus=function(t){var e=this;$.ajax({url:"https://mail.yandex."+diskUploaderParams.zone+"/api/disk_handler?handle=status&sk="+this.sk+"&oid="+t.oid,method:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(i){t.mpfs=i,t.status>0&&("WAITING"===t.mpfs.status||"EXECUTING"===t.mpfs.status?e.checkTimer(t,2e3,!0):"DONE"===t.mpfs.status?(t.status=5,t.mpfs.progress=100):t.status=-1,e.updateStatuses())},failure:function(){t.status=-1,e.updateStatuses()}})},e.prototype.updateStatuses=function(){for(var t,e,i,n=0,o=0,s=[],r=0,a=0,c=0,u="",l=0,h=this.uploadQueue.length;h>l;l++){e=this.getFilesByQueue(this.uploadQueue[l]),n+=e.length;for(var d=0,p=e.length;p>d;d++)i=e[d],4===i.status?(t=i.mpfs&&i.mpfs.progress?i.mpfs.progress:0,o+=t,s.push(i),r++):5===i.status?(o+=100,a++):-1===i.status&&(u=i.file.name,c++)}if(r>0)this.showStatusesWrap(),this.showBg(),this.showCancel(),this.progress.css("width",Math.floor(o/n)+"%"),this.title.removeClass("b-disk-uploader__statuses_title_error"),1===r?this.title.html(home.htmlFilter(home.cleverString.cutMiddleOfString(s[0].file.name,15,14))):this.title.html(diskUploaderParams.uploadingFiles.replace("%1",a).replace("%2",n));else{var f,m=!1;1===c?(f=diskUploaderParams.errorFile.replace("%1",home.htmlFilter(u)),m=!0):c>1?(f=diskUploaderParams.errorFiles,m=!0):f=diskUploaderParams.loaded,this.finishUpload(f,m)}},e.prototype.finishUpload=function(t,e){this.uploadQueue=[],this.hideStatusesWrap(),this.hideBg(),this.hideCancel(),this.title.removeClass("b-disk-uploader__statuses_title_error"),"undefined"!=typeof e&&e?this.title.addClass("b-disk-uploader__statuses_title_error"):t+=this.goLink,this.title.html(t)},e.prototype.getFilesByQueue=function(t){for(var e=[],i=0,n=this.files.length;n>i;i++)this.files[i].queueId===t&&e.push(this.files[i]);return e},e.prototype.addCancelEvent=function(){var t,e=this;this.cancel.click(function(){for(var i=0,n=e.files.length;n>i;i++)t=e.files[i],t.xhr&&5!==t.status&&(t.status=-3,t.xhr.abort(),clearTimeout(e.statusesTimers[t.id]));return e.finishUpload(diskUploaderParams.cancel,!0),!1})},e.prototype.addCancelDialogEvent=function(){var t=this;this.infoPopup.on("hide",function(){t.disabled=!1}),this.forcePopup.on("hide",function(){t.disabled=!1,t.clearUploadQueue(),t.unfixParanja()}),$("#diskUploadCancel").click(function(){t.forcePopup.hide()})},e.prototype.clearUploadQueue=function(){for(var t,e=0,i=this.files.length;i>e;e++)t=this.files[e],2!==t.status&&3!==t.status||(t.status=-3)},e.prototype.fixParanja=function(){$(".popup__under_type_paranja").addClass("b-disk-force-popup__under"),$(".b-disk-force").closest(".popup").addClass("b-disk-force-popup"),this.hideBanner()},e.prototype.unfixParanja=function(){$(".popup__under_type_paranja").removeClass("b-disk-force-popup__under"),$(".b-disk-force").closest(".popup").removeClass("b-disk-force-popup"),this.showBanner()},e.prototype.checkFileTypes=function(t){if(!t.types)return!1;if(t.types.contains&&t.types.contains("application/x-moz-file-promise")&&!t.types.contains("application/x-moz-file"))return!1;var e=!1;if(t.types.length)for(var i=0,n=t.types.length;n>i;i++)"Files"===t.types[i]&&(e=!0);return e},e.prototype.checkFiles=function(e){if(e.files&&this.checkFileTypes(e)){var i=new t(function(t){var e=0,i=0;for(var o in t)t.hasOwnProperty(o)&&(++e,t[o].status!==!1&&(++i,n.push(t[o].file)));e===i&&e>0?n.store():n.showInfoDialog(0===i)}),n=this;if(e.files.length)for(var o=0,s=e.files.length;s>o;o++)this.isRegularFile(e.files[o],i.add("file"+o,this.checkFileHandler));else e.types.length&&i.done()}},e.prototype.isRegularFile=function(t,e){var i;try{i=t.size}catch(n){i=0}if(0===i)return void setTimeout(function(){e(!1,t)},0);if(t.size>102400)return void setTimeout(function(){e(!0,t)},0);if(!window.FileReader||window.opera&&navigator.platform.toLowerCase().indexOf("mac")>-1&&"12.00"===window.opera.version())setTimeout(function(){e(null,t)},0);else try{var o=new FileReader;o.onerror=function(){o.onloadend=o.onprogress=o.onerror=null,e(!1,t)},o.onloadend=o.onprogress=function(i){o.onloadend=o.onprogress=o.onerror=null,"loadend"!==i.type&&o.abort(),e(!0,t)},o.readAsDataURL(t)}catch(n){setTimeout(function(){e(!1,t)},0)}},e.prototype.checkFileHandler=function(t,e){return{file:e,status:t}},e.prototype.stopLeaveTimer=function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null)},e.prototype.startLeaveTimer=function(){this.stopLeaveTimer(),this.leaveTimer=setTimeout(function(){this.hideArea()}.bind(this),50)},e.prototype.init=function(){if(window.File&&window.FileList&&window.FileReader&&$(".b-disk-uploader").length){this.uploaderArea=$(".b-disk-uploader"),this.innerArea=$(".b-disk-uploader__inner"),this.forcePopup=$(".b-disk-force").bem("popup"),this.forcePopupContent=$(".b-disk-uploader__force_content"),this.infoPopup=$(".b-disk-info").bem("popup"),this.infoPopupTitle=$(".b-disk-uploader__info_title"),this.statusesWrap=$(".b-disk-uploader__statuses_wrap"),this.progress=$(".b-disk-uploader__statuses_progress"),this.bg=$(".b-disk-uploader__statuses_bg"),this.title=$(".b-disk-uploader__statuses_title"),this.cancel=$("#diskCancel");var t=this;$(window).bind({dragenter:function(e){return!t.disabled&&t.checkFileTypes(e.originalEvent.dataTransfer)?(t.areaShown||t.showArea(),!1):void 0},dragover:function(){return t.stopLeaveTimer(),!1},dragleave:function(){return!1},drop:function(e){return t.disabled||t.checkFiles(e.originalEvent.dataTransfer),!1}}),this.uploaderArea.bind("dragleave",this.startLeaveTimer.bind(this)),this.uploaderArea.click(function(){return t.hideArea(),!1}),$(document).mouseout(function(e){var i=e.relatedTarget||e.toElement;i&&"HTML"!==i.nodeName||t.hideArea()}),$(document).mouseover(function(){t.areaShown&&t.hideArea()}),$("#diskUploadOk").click(function(){return t.collectForceFiles(),!1}),$("#diskUploadClose").click(function(){return t.disabled=!1,t.infoPopup.hide(),t.store(),!1}),this.focusEvents(),this.addCancelEvent(),this.addCancelDialogEvent()}},e.prototype.hideBanner=function(){window.home&&home.leftBanner&&home.leftBanner.hideBanner&&home.leftBanner.hideBanner("b-disk-uploader")},e.prototype.showBanner=function(){window.home&&home.leftBanner&&home.leftBanner.hideBanner&&home.leftBanner.showBanner("b-disk-uploader")},e.prototype.showArea=function(){this.areaShown||(this.uploaderArea.addClass("b-disk-uploader__highlighted"),this.hideBanner(),this.areaShown=!0)},e.prototype.hideArea=function(){this.areaShown&&(this.uploaderArea.removeClass("b-disk-uploader__highlighted"),this.showBanner(),this.areaShown=!1)},e.prototype.showStatusesWrap=function(){this.wrapTimer&&clearTimeout(this.wrapTimer),this.statusesWrap.hasClass("i-hidden")&&(this.statusesWrap.css({bottom:-44}).removeClass("i-hidden").animate({bottom:0},500),this.hideBanner())},e.prototype.hideStatusesWrap=function(){var t=this;this.statusesWrap.hasClass("i-hidden")||(this.wrapTimer=setTimeout(function(){t.statusesWrap.animate({bottom:-44},500,function(){t.statusesWrap.css({bottom:0}).addClass("i-hidden"),t.showBanner()})},1e4))},e.prototype.showBg=function(){this.bg.removeClass("i-hidden")},e.prototype.hideBg=function(){this.bg.addClass("i-hidden")},e.prototype.showCancel=function(){this.cancel.removeClass("i-hidden")},e.prototype.hideCancel=function(){this.cancel.addClass("i-hidden")};var i=new e;i.init()}}),function(){"use strict";BEM.DOM.decl({name:"popup",modName:"focus",modVal:"capture"},{_onShown:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex","0").focus()},_onHidden:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("tabindex")}})}(),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var i="yes"===e,n=this.domElem;i&&this.delMod("hovered"),this._href&&(i?n.removeAttr("href"):n.attr("href",this._href)),this.afterCurrentEvent(function(){n.attr("disabled",i)})},pressed:function(t,e){return this.isDisabled()?!1:void this.trigger("yes"===e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("click",function(t){var e=this.hasMod("pseudo","yes")&&this._href;(this.isDisabled()||e)&&t.preventDefault()}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.trigger("focus"))},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),"yes"===e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){return this.isDisabled()?!1:void(""===e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;!this._keyDowned&&e.is(i,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,i===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),function(){"use strict";home.cleverString={};var t,e="";t=function(t,e){var i=t.charCodeAt(),n=e.charCodeAt();return i>=55296&&56319>=i&&n>=56320&&57343>=n},home.cleverString.length=function(e){if("undefined"==typeof e||null===e)return 0;for(var i=0,n=e.length,o=0;n>i;)++i<n&&t(e[i-1],e[i])&&++i,++o;return o},home.cleverString.substring=function(e,i,n){if("string"!=typeof e)return e;"number"!=typeof i&&(i=0),n||0===n||(n=1/0);for(var o,s=[],r="",a=i+n,c=0,u=e.split(r),l=u.length,h=0;l>=c;)o=1,l>c+1&&t(e[c],e[c+1])&&(o=2),h>=i&&a>h&&s.push(u.slice(c,c+o).join(r)),c+=o,++h;return s.join(r)},home.cleverString.cutMiddleOfString=function(t,i,n){var o=home.cleverString.length(t);return"string"!=typeof t||3>o||"number"!=typeof i||"number"!=typeof n?t:-1===i||-1===n?"":o>=i+1+n?home.cleverString.substring(t,0,i)+e+home.cleverString.substring(t,o-n):t},home.cleverString.cutEndOfString=function(t,e){return home.cleverString.cutMiddleOfString(t,e-1,0)},home.cleverString.cutStartOfString=function(t,e){return home.cleverString.cutMiddleOfString(t,0,e-1)}}(),function(){function t(){var t=document.visibilityState||document.webkitVisibilityState||document.msVisibilityState;return"prerender"===t}function e(){var t=home.getData("common.click-href")||BEM.blocks["i-global"].param("click-href");return t?t+"click":void 0}function i(){var t,e={1036:d.domainLookupStart-p,1037:d.domainLookupEnd-d.domainLookupStart,1038:d.connectEnd-d.connectStart,1039:d.responseStart-d.requestStart,1040:d.responseEnd-d.responseStart,1040.318:d.responseEnd-p};d.secureConnectionStart>0&&(e[1676]=d.secureConnectionStart-d.connectStart);for(t in g)g.hasOwnProperty(t)&&(g[t]>0?e[t]=Math.min(f*_,g[t]):0===g[t]&&(e[t]=f*_));for(t in h.vars)h.vars.hasOwnProperty(t)&&(e[t]=h.vars[t]);if(home.timing)for(t in home.timing)home.timing.hasOwnProperty(t)&&(e[t]=home.timing[t]);window.pl&&window.pl.timing&&(e[2448.2238]=window.pl.timing.fromLs?1:0,void 0!==window.pl.timing.lsTime&&(e[2448.745]=window.pl.timing.lsTime),void 0!==window.pl.timing.appendTime&&(e[2448.2449]=window.pl.timing.appendTime));for(t in e)e.hasOwnProperty(t)&&e[t]<0&&delete e[t];home.timingAPI.send(e)}function n(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return e.join(",")}function o(){var e=-1;if(t())return e;if(window.chrome&&"function"==typeof window.chrome.loadTimes&&p){var i=window.chrome.loadTimes();e=i.firstPaintTime?Math.floor(1e3*i.firstPaintTime)-p:0}return e}function s(){var e=-1;return t()?e:("undefined"!=typeof d.msFirstPaint&&(e=d.msFirstPaint?d.msFirstPaint-p:0,d.msFirstPaint&&d.responseStart&&d.msFirstPaint<d.responseStart&&(e=-1)),e)}function r(){return g[1051]>0?"undefined"!=typeof d.msFirstPaint?g[1041.659]>0:window.chrome&&"function"==typeof window.chrome.loadTimes&&p?g["1041.660"]>0:!0:void 0}function a(){++m,g[1041.659]=s(),g["1041.660"]=o(),g[1041.659]>0?g[1041.318]=g[1041.659]:g["1041.660"]>0&&(g[1041.318]=g["1041.660"]),g[1041.318]>0&&(g[1041.906]=g[1041.318]-(d.domainLookupStart-p),g[1041]=g[1041.318]-(d.responseStart-p)),h||(h=l("timing")),h&&(r()||m>=_)?(c("raf","1402"),c("searchline","2290"),c("initsuggest","695"),u("main-js","2095"),u("suggest-js","2700"),i()):setTimeout(a,f)}function c(t,e){var i=home.mark?home.mark.get(t):null;i&&(g[e]=i[1],g[e+".318"]=i[0])}function u(t,e){if(home.mark){c(t+"_start",e);var i=home.mark.get(t+"_start"),n=home.mark.get(t+"_end");i&&n&&(g[e+".2136"]=n[0]-i[0])}}function l(t){return home&&home.getData&&home.getData(t)}var h,d=window.performance&&window.performance.timing;if(d&&d.navigationStart){var p=d.navigationStart,f=1e3,m=0,_=20,g={1041.659:-1,"1041.660":-1,1041:-1,1041.906:-1,1041.318:-1,1051:0};window.home=window.home||{},home.timingAPI={send:function(t){var i,o="/dtype=stred/pid=1/cid=72202";o+="/reqid="+h.reqid,o+="/path=690.1033",t[1042]=encodeURIComponent(navigator.userAgent),o+="/vars="+n(t),o+="/slots="+(l("exp.data")||"")+"/*",i=e(),i&&((new Image).src=i+o)}};var v=function(){g[1051]||(g[1051]=+new Date-p)};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?v():(document.addEventListener("DOMContentLoaded",v,!1),document.addEventListener("load",v,!1)),setTimeout(a,f)}}(),function(t,e){function i(t,i){function _(t,e){g&&(h.call(a,g),g=d),setTimeout(function(){t(e)},0)}if(d=null,!t)return void _(i,d);a=e.body,c=e.createElement,u=e.createDocumentFragment,l=a.appendChild,h=a.removeChild;var g=r(t);l.call(a,g);var v=g.children,b=n(v[0]),y=s(v[1],b);if(1!=y)return void _(i,d);var w=s(v[2],b),k=s(v[3],b),x=w+(k<<f);if(m>x)return void _(i,d);for(var E=u.apply(e),M=y+w+k,T=57348,S=0;2*x+1>S;S++)l.call(E,o(T+S));l.call(g,E);for(var C=[],I=p;p+2*x>I;I+=2){var D=s(v[I],b),B=s(v[I+1],b);C.push(D+(B<<f)),M+=D+B}var P=s(v[I],b);if(P!=(15&M))return void _(i,d);for(var $=0,O=0;O<C.length;O++)$+=C[O]*(1<<8*O);_(i,$)}function n(t){return 16/t.offsetWidth}function o(t){var i=c.call(e,"span");return i.innerText=String.fromCharCode(t),i}function s(t,e){return Math.round(t.offsetWidth*e)-1}function r(t){var i=57344,n=c.call(e,"div"),s='position:absolute;left:0;top:0;width:1px;height:1px;opacity:0;overflow:hidden;font:1000px "'+t+'", serif;';n.setAttribute("style",s),n.setAttribute("aria-hidden","true");for(var r=0;p>r;r++)l.call(n,o(i+r));return n}var a,c,u,l,h,d,p=4,f=4,m=4;t.Ya=t.Ya||{},t.Ya.F=t.Ya.F||{},t.Ya.F.calibrate=i}(window,document),function(){"use strict";$(function(){var t=home&&home.getData&&home.getData("fingerprint.data");t&&t.enabled&&setTimeout(function(){var e=t.zmblt;try{window.Ya.F.calibrate("Yandex-UI-Icons-Private",function(i){null!==i&&Number(i)!==Number(e)&&((new Image).src=t.cookieUrl+"&zmblt="+i+"&empty=1")})}catch(i){}},0)})}(),window.ya=window.ya||{},ya.history=window.history&&history.pushState?function(){return{navigate:function(t){t=t||{},t.url&&(t.title||(t.title=""),t.data||(t.data=""),t.replace?history.replaceState(t.data,t.title,t.url):history.pushState(t.data,t.title,t.url))},onchange:function(t){$(window).on("popstate",function(e){t.call(this,e.originalEvent)})}}}():null,function(){"use strict";function t(){var t=home&&home.getData&&home.getData("i-change-url.data");if(t){var e=t.url,i=!1;if(e&&ya.history){if(window.mordaFromCache){for(var n,o=String(location.search).replace(/^\?/,"").split("&"),s={},r=0,a=o.length;a>r;r++)n=o[r].split("="),2===n.length&&(s[n[0]]=n[1]);var c={clid:1,win:1,banerid:1};for(var u in c)c.hasOwnProperty(u)&&s[u]&&!$("form.search2 input[name='"+u+"']").length&&$("form.search2").append('<input type="hidden" name="'+u+'" value="'+s[u]+'">');location.search||(i=!0)}i||ya.history.navigate({data:{page:"morda"},url:e,replace:!0})}}}function e(){window.defaultMetrikaCounter?t():+new Date-i>5e3?t():setTimeout(e,100)}var i=+new Date;e()}(),$(document).ready(function(){function t(i){a.push(i),e(),n=s>=i?setTimeout(function(){t(i+o)},o):null}function e(){if(!window.defaultMetrikaCounter)return void(+new Date<r&&setTimeout(e,100));for(;a.length;){var t=a.pop(),n={};n["time-"+i.content]={},n["time-"+i.content][i.type]={},n["time-"+i.content][i.type][t]=1,window.defaultMetrikaCounter.params(n)}}var i=home&&home.getData&&home.getData("time-count.data");if(i){var n=null,o=i.timeout,s=3e5,r=+new Date+s,a=[];document.hidden||t(0),BEM.channel("sys").on("hidden",function c(){n&&(clearTimeout(n),n=null),BEM.channel("sys").un("hidden",c)})}}),BEM.DOM.decl("xiva-notif",{onSetMod:{js:function(){window.WebSocket&&this.params.url&&(this._connect(),this._pageClosed=!1,this.bindToWin("beforeunload",this._disconnect))}},_changeNumbers:function(t,e,i){t=parseInt(t,10),this.channel("mail").trigger("update",{uid:i,value:t}),this.channel("mail").trigger("fresh",{uid:i,value:parseInt(e,10)})},_update:function(t){if("insert"===t.operation)this._isItFreshMsg(t)&&this._changeNumbers(t.message.new_messages,t.message.fresh_count,t.uid);else{var e=t.message;e&&"reset fresh"===e.operation&&this._isItFreshMsg(t)&&this.channel("mail").trigger("fresh",{uid:t.uid,value:0})}},_isItFreshMsg:function(t){var e=t.uid;if(e)return e in this.last||(this.last[e]=0),this.last[e]<t.lcn?(this.last[e]=t.lcn,!0):void 0},_connect:function(){var t=this,e=this.ws=new WebSocket(this.params.url),i=!1;return this.last={},this.connectAttempts=0,e.onopen=function(){i=!0,setTimeout(function(){i&&(t.connectAttempts=0)},5e3)},e.onmessage=function(e){try{var i=JSON.parse(e.data);t._update(i)}catch(n){}},e.onclose=function(e){if(!t._pageClosed){t.connectAttempts++;var n=6e4;i=!1,t.connectAttempts<=5?n=3e3:t.connectAttempts<=15&&(n=1e4),4e3===e.code&&(n=3e5),4401!==e.code&&setTimeout(function(){t._connect()},n)}},this},_disconnect:function(){this._pageClosed=!0,this.ws&&this.ws.close&&this.ws.close(1e3,"unload")}}),MordaRT.prototype.siteInDomainList=function(t,e){for(var i,n=0,o=t.length;o>n;n++)if(i=t[n],this.listRE[i]||(this.listRE[i]=new RegExp("^"+i.replace(/\./g,"\\.").replace(/\*/g,"[^.]+")+"$")),e.match(this.listRE[i]))return!0;return!1},MordaRT.prototype.getHostname=function(t){0!==t.indexOf("http")&&0!==t.indexOf("//")&&(t="//"+t);var e=document.createElement("a");return e.href=t,e.hostname},MordaRT.prototype.getEntries=function(t,e){if(!window.performance||!window.performance.getEntries)return{resources:{},resourcesCount:0};try{var i,n,o=window.performance.getEntries("resources"),s={},r=0;if(o&&o.length)for(var a=0,c=o.length;c>a;a++)if(i=o[a].initiatorType||"unknown",n=this.getHostname(o[a].name),-1!==n.indexOf(".")&&!this.siteInDomainList(t,n)){s[i]||(s[i]={});var u=e?this.quote(o[a].name):n;s[i][u]?s[i][u]++:s[i][u]=1,r++}return{resources:s,resourcesCount:r}}catch(l){return{resources:{},resourcesCount:0}}},MordaRT.prototype.quote=function(t){return t.replace(/"|%22/g,"&quot;")},$(document).ready(function(){function t(){var t=null;"flash"===h.type?t=h.custom.flashV&&(new CAWBrowser).flash>=h.custom.flashV?e():n():"img"===h.type?t=n():"iframe"===h.type?t=i():"html"!==h.type&&(t=o());var a=s(),u=r();a&&t?$.extend(t,a):a&&(t=a),u&&t?$.extend(t,u):u&&(t=u),c(),l(t)}function e(){var t=$("#banner > object:eq(0)").attr("classid"),e=$("#banner > #bc > noscript").length,i=$("#banner").children().length,n=$("#banner > #bc").children().length;return t&&"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"===t&&1===e&&2===i&&1===n?null:{horizontal:{flash:1}}}function i(){var t=$(".banner-iframe").attr("src"),e=$("#banner > #bc > noscript").length,i=$("#banner").children().length,n=$("#banner > #bc").children().length,o=$(".banner__expand_inner").length+$(".banner__expand_innerclick").length;return a(t)&&1===e&&(2===i||4===i&&2===o)&&1===n?null:{horizontal:{iframe:1}}}function n(){var t=$("#banner > #bc > noscript").length,e=$("#banner > #bc").children().length,i="",n="";return h.custom.gif?i=$("#banner > img").attr("src"):(n=$("#banner > a").attr("href"),i=$("#banner > a > img").attr("src")),i!==h.custom.img||!h.custom.gif&&n!==h.custom.href||1!==t||1!==e?h.custom.img?{horizontal:{img:1}}:{horizontal:{none:1}}:null}function o(){var t=$(".b-line_adv");return t.length&&0===t.children().length?null:3===$(".main").children().length?null:{horizontal:{none:1}}}function s(){var t=$("img"),e=[],i=!1,n={};if(t.each(function(){var t=$(this).parents("a");this.src&&t.length&&e.push({src:this.src,link:t.attr("href")})}),e.length)for(var o=0,s=e.length;s>o;o++)a(e[o].link)||a(e[o].src)||(i=!0,n[e[o].link]={},n[e[o].link][e[o].src]=1);return i?{image:1,links:n,ignore:1}:null}function r(){var t=$("html")[0].style.cssText;return t?{html:1}:null}function a(t){if(!t||"#"===t||0===$.trim(t).indexOf("javascript"))return!0;var e=d.getHostname(t);return d.siteInDomainList(p,e)}function c(){var t,e,i=home.bnCounts;if(i&&i.length)for(var n=0,o=i.length;o>n;n++)t=document.createElement("a"),t.href=i[n],e=t.host,p.push(e)}function u(t){var e=$('<iframe style="display:none"></iframe>');$("body").append(e),e.attr("name","consistency"+(Math.random()+"").substr(3,7)),e.attr("src",h.url+"&csc="+t+"&empty=1")}function l(t){t&&!t.ignore?u("1"):"1"===h.csc&&u("2"),t&&t.ignore&&delete t.ignore;var e=null,i=d.getEntries(p),n=d.getEntries(p,!0);t&&(e=e||{},e["consistency-"+h.content]=t),i.resourcesCount&&(e=e||{},e["resources-consistency-"+h.content]=i.resources),n.resourcesCount&&i.resources.script&&(e=e||{},e["resources-src-consistency-"+h.content]=n.resources.script),e&&window.defaultMetrikaCounter&&window.defaultMetrikaCounter.params(e)}var h=home&&home.getData&&home.getData("consistency.data"),d=new MordaRT;if(h){var p=["*.*.yandex.*","*.yandex.*","yandex.*","yastatic.net","*.tns-counter.ru","*.hit.gemius.pl"];setTimeout(function(){t()},h.timeout)}}),$(function(){var t=home&&home.getData&&home.getData("consistencyPopup.data");t&&(t.zIndex=1e5+Math.floor(1e3*Math.random()),setTimeout(function(){var e=$(home.view("consistency-popup__html",t));$("a:last",e).click(function(){return(new Image).src=t.noLink,e.remove(),!1}),$(".button_theme_cpopup__close",e).click(function(){return(new Image).src=t.closeLink,e.remove(),!1}),$("body").append(e),(new Image).src=t.pixel},t.timeout))}),function(){var t="//yastatic.net/browser-cookie/_fc.js",e='<div style="height:0;overflow:hidden;" aria-hidden="true"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1" id="fco" ><param name="movie" value="//yastatic.net/browser-cookie/flash-cookie.swf"/><param name="allowScriptAccess" value="Always"/><embed src="//yastatic.net/browser-cookie/flash-cookie.swf" allowScriptAccess="Always" width="1" height="1" id="fce"></embed></object></div>';setTimeout(function(){window.mordaCookieCopy&&$.getScript(t,function(){$("body").append(e)})},5e3)}(),BEM.decl("custom-protocol-detect",{},{protocolCheck:function(t,e,i){var n=this._checkBrowser();return n.isMsLaunchUri?this._openUriWithMsLaunchUri(t,e,i):n.isFirefox?this._openUriUsingFirefox(t,e,i):n.isWebkit?this._openUriWithHiddenFrame(t,e,i):n.isIE?this._openUriUsingIEInOlderWindows(t,e,i):void(i&&i())},_openUriWithHiddenFrame:function(t,e,i){this._blurWindowHack(e,i),this._getHiddenIframe().contentWindow.location.href=t},_openUriUsingFirefox:function(t,e,i){var n=this._getHiddenIframe();try{n.contentWindow.location.href=t,e&&e()}catch(o){i()}},_openUriUsingIEInOlderWindows:function(t,e,i){var n={9:"openUriWithHiddenFrame",10:"openUriUsingIe10InWindows7",11:"openUriWithHiddenFrame"}[home.getData("custom-protocol-detect.ieVersion")];this[n||"_openUriInNewWindowHack"](t,e,i)},_openUriUsingIe10InWindows7:function(t,e,i){var n=this._getHiddenIframe(),o=i?setTimeout(i,1e3):null;BEM.DOM.win.on("blur",function(){o&&clearTimeout(o),e&&e()});try{n.contentWindow.location.href=t}catch(s){i&&i(),clearTimeout(o)}},_openUriInNewWindowHack:function(t,e,i){var n=window.open("","","width=0,height=0");n.document.write("<iframe src='"+t+"'></iframe>"),setTimeout(function(){try{n.location.href=t,n.setTimeout(function(){n.close()},1e3),e&&e()}catch(o){n.close(),i&&i()}},1e3)},_openUriWithMsLaunchUri:function(t,e,i){navigator.msLaunchUri(t,e,i)},_checkBrowser:function(){return{isMsLaunchUri:Boolean(navigator.msLaunchUri),isFirefox:"undefined"!=typeof InstallTrigger,isWebkit:Boolean(window.chrome||window.opr||window.safari),isIE:home.getData("custom-protocol-detect.isMSIE")}},_getHiddenIframe:function(){if(!this.iframe){var t=document.createElement("iframe");t.src="about:blank",t.style.display="none",t.name="custom-protocol-detect",document.body.appendChild(t),
this.iframe=t}return this.iframe},_blurWindowHack:function(t,e){function i(){clearTimeout(n),BEM.DOM.win.off("blur",i),t&&t()}var n=setTimeout(function(){BEM.DOM.win.off("blur",i),e&&e()},1e3);BEM.DOM.win.on("blur",i)}}),$(document).ready(function(){var t=home&&home.getData&&home.getData("yandcache.data");t&&window.setTimeout(function(){var e=navigator.userAgent.toLowerCase();/crios/.test(e)&&(/ipad/.test(e)||/ipod/.test(e)||/iphone/.test(e))||($.ajaxSetup({cache:!0}),$.getScript(t.url),$.ajaxSetup({cache:!1}))},t.timeout)}),BEM.DOM.decl("i-ua",{},{placeholder:"placeholder"in document.createElement("input")}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="";return function(e,i,n){return e.length>i+n?e.substring(0,i-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},highlight:function(t,e){if(!$.isArray(e))return t;var i,n=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a="?",c=~t.indexOf(a),u=function(){for(var e,i=/\&#\d+;/gi;e=i.exec(t);)r.push(e[0]),t=t.replace(e[0],a)},l=function(t){if(c)return t;for(;~t.indexOf(a)&&r.length;)t=t.replace(a,r[0]),r.shift();return t};return!c&&u(),s.forEach(function(e){i=o>e[0]?o:e[0],n.push({tag:"span",elem:"span",content:l(t.slice(o,i))}),n.push({tag:"em",elem:"em",content:l(t.slice(i,o=e[1]))})},this),n.push({tag:"span",elem:"span",content:l(t.slice(o))}),n}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").attr("disabled","yes"===e)},yes:function(){this.delMod("focused")}},focused:function(t,e){if(this.hasMod("disabled","yes"))return!1;var i="yes"===e;i?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(i?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){var i="undefined"!=typeof t,n=this.elem("control");return t=i?null===t?"":t.toString():n.val(),this._val!==t&&(this._val=t,n.val()!==t&&n.val(t),this.trigger("change",e)),i?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return this.hasMod("disabled","yes")?!1:void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_onIOSTouchStart:function(t){this.hasMod("type","textarea")||this.hasMod("focused")||(t.preventDefault(),this.setMod("focused","yes"))},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","touchstart",function(t){this._onIOSTouchStart(t)})}}),function(){var t,e=[],i=function(){e.forEach(function(t){t.val(t.elem("control").val())})};BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._instanceIndex=e.push(this)-1;var n=this.elem("control"),o=$.dom.getActiveElement(),s=this.params.autoFocus&&!o.is("input, textarea");(o[0]===n[0]||s)&&(this.setMod("focused","yes")._focused=!0),t||(t=this.channel("sys").on({tick:i,idle:this._onSysIdle,wakeup:this._onSysWakeup})),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},_focus:function(){if(this.__base()===!1)return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},_onSysIdle:function(){t.un("tick",i)},_onSysWakeup:function(){t.on("tick",i)},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),e.splice(this._instanceIndex,1),e.slice(this._instanceIndex).forEach(function(t){t._instanceIndex--}),t.un({idle:this._onSysIdle,wakeup:this._onSysWakeup})},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base()}})}(),BEM.DOM.decl("input",{_onIOSTouchStart:function(){}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("clear","pointerclick",function(t){t.preventDefault()})}}),function(){var t,e=0,i=!1,n=0,o=BEM.channel("sys"),s=window.setTimeout,r=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){n=0,i&&(i=!1,o.trigger("wakeup"))}),this._tick()},_tick:function a(){o.trigger("tick",{counter:e++}),!i&&(n+=r)>3e3&&(i=!0,o.trigger("idle")),t=s(a,r)}}).start()}(),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()}},focused:function(){return this.__base.apply(this,arguments)===!1?!1:void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl("input",{onSetMod:{disabled2:function(t,e){var i="yes"===e,n=this.elem("input");i&&(this._origTabIndex=n.attr("tabindex")||null),n.attr("disabled",i?"disabled":null).attr("aria-disabled",i?"true":null).attr("tabindex",i?"-1":this._origTabIndex)}}}),home.pseudoReady(function(){var t=window.home&&home.getData&&home.getData("szm.data");if(t){var e=function(t,e,i){for(var n in e)if(e.hasOwnProperty(n)&&String(t[n])!==String(e[n])&&!(i&&"viewportY"===n&&e[n]<t[n]&&t[n]-e[n]<100))return!1;return!0};setTimeout(function(){var i,n=window.devicePixelRatio,o=screen.width,s=screen.height,r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=home.getData("szm.data.szm",{}),u=home.getData("szm.data.touch")||!1,l=home.getData("szm.data.swap")||!1;if(n){n=n.toFixed(2).replace(".","_"),s>o!==l&&(i=o,o=s,s=i,i=r,r=a,a=i);var h={dpr:n,screenX:o,screenY:s,viewportX:r,viewportY:a};if(!e(c,h,u)){var d=t.url+(n+":"+o+"x"+s+":"+r+"x"+a),p=document.createElement("iframe");p.style.display="none",p.src=d,p.name="szm",document.body.appendChild(p)}}},t.timeout)}}),$(document).ready(function(){function t(){if(window.defaultMetrikaCounter){var n={};n["connection-type"]={},n["connection-type"][e.content]={},n["connection-type"][e.content][i]=1,window.defaultMetrikaCounter.params(n)}else setTimeout(t,500)}var e=home&&home.getData&&home.getData("network-information.data");if(e){var i=navigator&&navigator.connection&&navigator.connection.type?navigator.connection.type:"";i&&setTimeout(function(){t()},e.timeout)}}),home.pseudoReady(function(){var t=home&&home.getData&&home.getData("referers.data");if(t){var e=location.hash?location.hash.replace(/^#/,""):"",i=e&&e.match(/^[1-578]$/),n=home.getData("timing.reqid")||"";i&&t.referer&&((new Image).src="/instant/log?type=clckerror&showid="+n+"&message="+[i[0],t.content,t.page,t.referer].join("_"))}}),$(function(){var t=window.performance&&performance.navigation&&1===performance.navigation.type;t&&home.stat.logPath("tech","refresh")}),function(){"use strict";var t,e,i={},n={};home.stat={},home.stat.attr="data-statlog",home.stat.getCustomPageParams=function(){var t=home&&home.getData&&home.getData("redir-stats.data")||"",e="",i="",n=home.mark?home.mark.time():null;n&&(e="/timefs="+n[0]+"/timefrs="+n[1]);var o=home.getData?home.getData("timing.vars"):"";return o&&(o[1964]?i="/mexp=0":o[1965]&&(i="/mexp=1")),t+e+i};var o,s=function(e){return i.useBeacon&&"sendBeacon"in navigator?navigator.sendBeacon(t,e):void 0},r=function(e,i){var n;if("XDomainRequest"in window?n=new XDomainRequest:"XMLHttpRequest"in window&&(n=new XMLHttpRequest),n){n.open("post",t,!0),n.withCredentials=!0;try{n.setRequestHeader("Accept","text/plain, */*; q=0.01"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}catch(o){}n.onreadystatechange=function(){i&&4===n.readyState&&i()},n.send(e)}},a=function(t){return"/dtype=clck"+home.stat.getCustomPageParams()+"/session_id="+i.showId+"/events="+JSON.stringify(Object.keys(t).map(function(e){return{event:e,"parent-path":i.statRoot,blocks:t[e]}}))+"/*"},c=function(t){if(clearTimeout(o),e){var i=a(e);s(i)?t&&t():r(i,t),e=null}},u=function(){clearTimeout(o),o=setTimeout(c,0)},l=function(t,e){var i=[];e.replace(/([^\.\(]+)(?:\(([^\)]*)\))?\.?/g,function(t,e,n){i.push({key:e,params:n?n.split(";"):[]})});for(var n=t,o=0;o<i.length;++o){var s,r=i[o].params,a=i[o].key,c=n.some(function(t){return t.ctag===a?(s=t,!0):void 0});c||(s={ctag:a},n.push(s)),r.length&&r.forEach(function(t){var e=t.match(/^([^=]+)=(.+)$/);s[e[1]]=e[2]}),o+1<i.length&&(n=s.children=s.children||[])}},h=function(t){return t.replace(/\([^\)]+\)/g,"")};home.stat.logPath=function(t,o,s){var r,a;if(!i.enabled||!t||!o)return void(s&&s.callback&&setTimeout(s.callback,0));if("show"===t){if(o in n)return;n[o]=!0}else o=h(o);e||(e={}),e[t]||(e[t]=[]),l(e[t],o),s&&s.callback?(r=function(){a||(a=!0,s.callback())},c(r),s.callbackTimeout&&setTimeout(r,s.callbackTimeout)):u()},home.stat.redirect=function(e,n){if(i.enabled&&n){n=h(n);var o="2"===e.getAttribute("data-app-link");if(i.useBeacon&&"sendBeacon"in navigator&&!o){var s,r=[];if(l(r,n),s=a({click:r}),navigator.sendBeacon(t,s))return}var c,u=e.href;e.getAttribute("data-statlog-timeout")||-1!==u.indexOf("/lid="+i.statRoot)||(c=e.getAttribute("data-statlog-url"),c?e.href=c:(e.href=i.redirHost+"redir/dtype=clck"+home.stat.getCustomPageParams()+"/lid="+i.statRoot+"."+n+"/sid="+i.showId+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(u.match(/^http/)?u:location.protocol+"//"+location.host+(u.match("^/")?u:"/"+u))),o&&BEM.blocks["app-opener"]&&BEM.blocks["app-opener"].openEveryLinkWithStats&&BEM.blocks["app-opener"].openEveryLinkWithStats(e.href)),e.setAttribute("data-statlog-timeout",setTimeout(function(){e.href=u,e.removeAttribute("data-statlog-timeout")},500)))}};var d=function(t){return t&&(0!==t.offsetWidth||0!==t.offsetHeight)},p=function(t){var e;if(!t.getAttribute&&"length"in t){e=new Array(t.length);for(var i=0;i<t.length;++i)e[i]=t[i];return e}return[t]};home.stat.logDOMShow=function(t,e){if(i.enabled){var n=[];p(t).forEach(function(t){n=n.concat(p(t.querySelectorAll("["+home.stat.attr+"]"))),t.getAttribute(home.stat.attr)&&n.push(t)}),n.forEach(function(t){var i=t.getAttribute(home.stat.attr),n=t.getAttribute("data-statlog-showed");if(i&&!n){if(!(e&&e.visibilityCheck===!1||d(t)))return;home.stat.logPath("show",i)}})}},home.stat.getRoot=function(){return i.enabled&&i.statRoot||""},home.stat.setCounter=function(t,e){p(t).forEach(function(t){t.setAttribute(home.stat.attr,e)})};var f=function(t){for(var e,i=t.target||t.srcElement;i&&i!==document&&!(e=i.getAttribute(home.stat.attr));)i=i.parentNode;if(e&&i){var n=i.getAttribute("data-statlog-redir");"0"!==n&&i.href?i.href&&"click"===t.type&&!t.defaultPrevented&&t.returnValue!==!1&&home.stat.redirect(i,e):"mousedown"===t.type&&home.stat.logPath("click",e)}},m=function(t,e){"addEventListener"in document?document.addEventListener(t,e,!1):document.attachEvent("on"+t,e)},_=function(){i.enabled&&(m("mousedown",f),m("click",f))};home.subscribeData(function(){i=home.getData("statlog.config",{}),t=i.clckDemonHost+"counter","querySelectorAll"in document||(i.enabled=!1),_()}),home.stat._processClicks=f,home.stat._setConfig=function(e){i=e,t=i.clckDemonHost+"counter",_()}}(),BEM.DOM.decl("i-geolocation",{},{get:function(t,e){1===arguments.length&&(e=t,t={}),t=$.extend({enableHighAccuracy:!0,timeout:15,cacheTime:15},t),t.timeout*=1e3,t.maximumAge=1e3*t.cacheTime*60,delete t.cacheTime,"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){e(t)},function(t){e({error:t.code+1})},t):e({error:1})}}),function(){"use strict";var t={1:"denied",2:"unavailable",3:"timeout"};BEM.decl("i-geolocation",{},{_firstLocation:!0,locate:function(t){return t=t||{},this._wrapRequest(t,function(){return this._locate(t)})},_wrapRequest:function(t,e){var i;return this._promise?this._promise:(this._triggerEvent("start",t),this._promise=i=this._wrapEnd(t,e.call(this)),this._promise.always(this.changeThis(function(){this._promise=void 0})),i)},_wrapEnd:function(t,e){var i=this;return e&&e.then||(e=$.Deferred().resolve(e)),e.fail(function(e){i._triggerEvent("fail",t,e)}).always(function(){i._triggerEvent("end",t)})},_triggerEvent:function(t,e,i){var n=$.Event(t);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return this.channel("i-geolocation").trigger(n,i),this},_locate:function(t){var e,i=this,n=$.Deferred(),o=home.getData("geo."+(t.background?"background-":"")+"counters",{});try{navigator.geolocation&&navigator.geolocation.getCurrentPosition&&(home.stat.logPath("tech",o.request),e=new Date,navigator.geolocation.getCurrentPosition(function(s){i._saveLocation(s,new Date-e,t).then(function(e){i._triggerEvent("gpsave",t,{id:e.region_id,locale:e.locale,name:e.region_name,address:e.address,address_short:e.address_short}),home.stat.logPath("tech",o.success),n.resolve()},function(t){n.reject(t)})},function(o){o.type="locate",i._saveError(o,new Date-e,t).always(function(){n.reject(o)})},{timeout:1e3*(t.timeout?t.timeout:30),maximumAge:i._firstLocation?3e5:0,enableHighAccuracy:!1}),i._firstLocation=!1)}catch(s){n.reject(s)}return n.promise()},_saveLocation:function(t,e,i){return home.localStorage.setItem("gpallowed","1"),this._location=t.coords,this._saveAjax($.extend(this._extractCoords(t.coords),{persistent:1,timing:e}),i)},_saveError:function(e,i,n){var o;return 1===e.code?home.localStorage.setItem("gpforbidden","1"):home.localStorage.setItem("gpallowed","1"),o=home.getData("geo."+(n.background?"background-":"")+"counters.error",{}),home.stat.logPath("tech",o[t[e.code]]),this._saveAjax($.extend({status:e.code,timing:i},e.data||{}))},_extractCoords:function(t){return{lon:t.longitude,lat:t.latitude,precision:t.accuracy}},_saveAjax:function(t){var e;t.sk=home.getData("geo.sk"),t.device=0,t.format="JSONP",t.laas=home.getData("geo.laas")||0;var i=home.getData("geo.gpsaveUrl");return e={url:i,dataType:"jsonp",data:t},$.ajax(e)}}),$(function(){"permissions"in navigator&&!home.getData("geo.gpauto")&&setTimeout(function(){navigator.permissions.query({name:"geolocation"}).then(function(t){var e=t.state||t.status;"granted"===e&&BEM.blocks["i-geolocation"].locate({background:!0})})},5e3)})}(),$(function(){var t=home.getData("tech-counters"),e=window.Modernizr;t&&(home.stat.logPath("tech","tech.svg."+Number(detector.isSVGSupported())),home.stat.logPath("tech","tech.localStorage."+Number(!home.disabledLS)),home.stat.logPath("tech","tech.layout."+t.layout),e&&Object.keys(e).forEach(function(t){home.stat.logPath("tech","tech.flex."+t+"."+Number(e[t]))}))}),BEM.DOM.decl("edge-stripe",{_close:function(){if(this.domElem.hide(),$(window).trigger("popupredraw.lego"),this.params.close){var t=new Image;t.src=this.params.close}}},{live:function(){this.liveInitOnEvent("close","click",function(){this._close()})}}),BEM.DOM.decl("dist-stripe",{onSetMod:{js:function(){this.bindTo("close","pointerclick",function(){return this.hide(),!1}),this.bindTo("button","pointerclick",function(){return this.params.bkCloseUrl&&((new Image).src=this.params.bkCloseUrl),this._action()}),this.params.bkShowUrl&&((new Image).src=this.params.bkShowUrl)},state:{hidden:function(){setTimeout(function(){$(window).trigger("popupredraw.lego")},100),this.params.bkCloseUrl&&((new Image).src=this.params.bkCloseUrl)}}},hide:function(){this.setMod("state","hidden")},_action:function(){return!0}}),BEM.DOM.decl({block:"dist-stripe",modName:"product",modVal:"yabrwin10"},{_action:function(){return this.__base(),this.hide(),!0}}),$.extend({debounce:function(t,e,i,n){var o;return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),function(){var s=arguments;n=n||this,i&&!o&&t.apply(n,s),clearTimeout(o),o=setTimeout(function(){i||t.apply(n,s),o=null},e)}},throttle:function(t,e,i){var n,o,s;return function(){o=arguments,s=!0,i=i||this,n||function(){s?(t.apply(i,o),s=!1,n=setTimeout(arguments.callee,e)):n=null}()}}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",$.throttle(this._onResize,150)),this._collapseUserIfNeeded()}}},_onResize:function(){this._collapseUserIfNeeded()},_onUserUpdatesName:function(){this._collapseBreakpoint=null,this._collapseUserIfNeeded()},_collapseUserIfNeeded:function(){var t=this._getUser();t&&t.toggleCollapsed(this._getCollapseBreakpoint()>=this.elem("nav").width())},_getCollapseBreakpoint:function(){return this._collapseBreakpoint||(this._collapseBreakpoint=this._getNavItemsWidth()+this.__self.NAV_ITEMS_GAP),this._collapseBreakpoint},_getNavItemsWidth:function(){var t=0;return this.elem("nav").children().each(function(){t+=$(this).outerWidth(!0)}),t},_getUser:function(){return this._user?this._user._isDestructing&&(this._collapseBreakpoint=null,this._user=this.findBlockInside("user")):(this._user=this.findBlockInside("user"),this._user&&this._user.on("update-name",this._onUserUpdatesName,this)),this._user}},{NAV_ITEMS_GAP:10,live:!1}),BEM.DOM.decl("b-time-banner",{onSetMod:{js:function(){this.now=Math.round((new Date).getTime()/1e3),this.params.type&&this.show()}},show:function(){var t=this.params,e=t.type,i=t.typeData;(new Image).src=i.show_url,this.domElem.appendTo($(".b-time-banner__place")),this.setMod("type",e),this.bindTo("close","click",this.close),this.elem("inner").html(home.view("b-time-banner__inner",{type:e,text:i.text,helpUrl:t.helpUrl,helpQuery:t.helpQuery,now:this._convertTimestampToString(1e3*t.now),timestamp:this._convertTimestampToString(home.now())})),this.elem("close").attr("data-statlog","wrong_date."+e+".close"),this.setMod("shown","yes"),this.domElem.parents(".b-stripe-wrapper").show()},close:function(){this.setMod("shown","no"),(new Image).src=this.params.typeData.close_url},getDefaultParams:function(){var t=Math.round((new Date).getTime()/1e3),e=this._params,i=e.alert||{},n=i.show&&(i.till_ts>t||i.from_ts&&i.from_ts<t)?"alert":!1;return{now:t,type:n,typeData:e[n]}},_convertTimestampToString:function(t){var e=new Date(t),i=Math.abs(this.params.now-this.params.timestamp)<15379200?home.l10n("time-alert.date_format_short"):home.l10n("time-alert.date_format_long");return i.replace("%day",e.getDate()).replace("%month",home.l10n("spok_yes.month_accus."+(e.getMonth()+1))).replace("%year",e.getFullYear())}}),BEM.DOM.decl("win10-stripe",{onSetMod:{js:function(){this.bindToWin("scroll",this.fixScroll)}},fixScroll:function(){var t;t=window.pageXOffset,this.domElem.css({marginLeft:"-"+t+"px"})}}),BEM.DOM.decl("content-tabs",{onClick:function(t,e){var i=e.closest(".content-tabs__head-item");this.hasMod(i,"active","true")||(this.switchTo(i,!0),t.preventDefault())},toggleTab:function(t,e){var i=t.data("stat"),n=t.find(".content-tabs__link");this.toggleMod(t,"active","true","false",e),n.attr("aria-selected",e?"true":"false"),n.attr("tabindex",e?"0":"-1"),this.saveTab(t),i&&e&&home.stat.logPath("click",i)},togglePanel:function(t,e){this.toggleMod(t,"active","true","false",e),t.attr("aria-hidden",e?"false":"true")},switchTo:function(t,e){var i=t.attr("id");this.toggleTab(this.elem("head-item","active","true"),!1),this.toggleTab(t,!0),this.togglePanel(this.elem("items","active","true"),!1),this.togglePanel(this.domElem.find("#"+i+"c"),!0),e&&t.find(".content-tabs__link").focus(),this.trigger("switch",i),home.stat.logDOMShow(this.domElem),BEM.blocks["tabs-stat"].sendTabStat(t)},getFrame:function(){var t=this.elem("frame");return t&&t.length||(t=$('<iframe style="display:none" class="content-tabs__frame" name="content-tabs__frame"></frame>'),this.domElem.append(t),this.dropElemCache("frame")),t},saveTab:function(t){var e=t.data("save-url");if(e){var i=this.getFrame();i.attr("src",e)}},selectRelative:function(t){var e=this.elem("head-item"),i=this.elem("head-item","active","true"),n=$.inArray(i[0],e)+t;if(!(0>n||n>=e.length))return this.switchTo(e.eq(n),!0),!1}},{_selectedTabs:{},live:function(){$("body").on("click",".content-tabs__link",function(t){var e=$(t.target);e.closest(".content-tabs").bem("content-tabs").onClick(t,e)}),this.liveBindKey("link","left",function(){return this.selectRelative(-1)}),this.liveBindKey("link","right",function(){return this.selectRelative(1)})}}),BEM.DOM.decl("content-tabs",{onSetMod:{js:{inited:function(){var t,e=this.params.storeClientTabs,i=this.__self._selectedTabs;e&&(e in i&&(t=$("#"+i[this.params.storeClientTabs],this.domElem),t.length&&this.switchTo(t)),this.on("switch",function(t,n){i[e]=n}))}}}}),function(){"use strict";BEM.decl("tabs-stat",{},{sendTabStat:function(t){if(!t.attr("data-tabs-stat-sent")){var e=t.attr("data-tabs-stat"),i="/portal/log/json/?type=morda-topnews",n=!1;if(e&&e.length){if("sendBeacon"in navigator&&"FormData"in window){var o=new FormData;o.append("data",e),n=navigator.sendBeacon(i,o)}n||$.ajax({url:i,type:"POST",data:{data:e}}),t.attr("data-tabs-stat-sent","1")}}}})}(),BEM.DOM.decl("datetime",{onSetMod:{js:{inited:function(){var t=this;this._initDate(),this._prevDay=null,this._settedHour="",this._settedMin="",this._serverDate&&"Invalid Date"!==this._serverDate.toString()&&!isNaN(this._serverDate)&&(this.afterCurrentEvent(this._iterate),this._interval=setInterval(function(){t._iterate(),t._blink()},1e3))}}},destruct:function(){clearInterval(this._interval),this.__base.apply(this,arguments)},_initDate:function(){this._serverDate=new Date(this.params.timestamp+" GMT+0000"),this._loadDate=new Date},_iterate:function(){var t=new Date,e=new Date(this._serverDate.getTime()+(t.getTime()-this._loadDate.getTime()));this._proceedNewDate(e,t)},_proceedNewDate:function(t){var e,i;0===t.getUTCHours()&&0===t.getUTCMinutes()&&this._proceedNextDay(t),e=this._format(t.getUTCHours()),i=this._format(t.getUTCMinutes()),e===this._settedHour&&i===this._settedMin||(this._settedHour=e,this._settedMin=i,this.elem("hour").text(e),this.elem("min").text(i))},_proceedNextDay:function(t){var e=t.getDay();this._prevDay===e||this.hasMod("time-only","yes")||(this._drawNextDay(t,e),this._prevDay=e)},_drawNextDay:function(t,e){var i=this.findElem("date"),n=home.getData("datetime.data",{}),o=this.hasMod("short","yes")?n.monthShortArr:n.monthArr;i.length&&o&&i.replaceWith(home.view("datetime__date",{day:t.getDate(),month:o[t.getMonth()],wday:n.weekArr[e]}))},_format:function(t){return t>9?""+t:"0"+t},_blink:function(){this.toggleMod("time-hidden","yes")}}),BEM.DOM.decl("traffic",{onSetMod:{compact:function(){if(this.params.saveUrl){var t=$(".traffic__frame");t.length||(t=$('<iframe class="traffic__frame" name="traffic__frame" style="display:none"></iframe>'),$(document.body).append(t)),t.attr("src",this.params.saveUrl)}}}},{live:function(){this.liveBindTo("more","pointerclick",function(){this.delMod("compact")})}}),home.decline=function(t,e){return e&&e.length?0===t&&e[3]?e[3]:e[1]||e[2]?e[2]?(t%=100,t>=20&&(t%=10),1===t?e[0]:t>1&&5>t?e[1]:e[2]):t>=0&&1>=t?e[0]:e[1]:e[0]:""},BEM.DOM.decl("inline-stocks",{onSetMod:{js:function(){this.bindMouseEvents(),this.xivainitTimer=setTimeout(this.changeThis(this.initXiva),6e4)}},bindMouseEvents:function(){if(!window.device){var t={root:{name:"hovered",val:"yes"},item:{name:"hint",val:"visible",elem:".inline-stocks__item"}};this.bindTo("mouseenter",this.getOnmouseenter(t.root)),this.bindTo("mouseleave",this.getOnmouseleave(t.root)),this.bindTo("item","mouseenter",this.getOnmouseenter(t.item)),this.bindTo("item","mouseleave",this.getOnmouseleave(t.item))}},getOnmouseenter:function(t){return function(e){var i=this;t.countdown||(t.countdown=setTimeout(function(){if(t.countdown=null,t.elem){var n=$(e.target).closest(t.elem);i.setMod(n,t.name,t.val)}else i.setMod(t.name,t.val)},t.delay||250))}},getOnmouseleave:function(t){return function(e){var i=this;if(clearTimeout(t.countdown),t.countdown=null,t.elem){var n=$(e.target).closest(t.elem);i.delMod(n,t.name)}else i.delMod(t.name)}},initXiva:function(){var t=home.getData("inline-stocks.xivas")||[],e=this;t.forEach(function(t){BEM.blocks["i-xiva"].listen(t.ch,t.ts,function(t){e.updateFunc(t.dt)})})},updateFunc:function(t){if(t&&t.id){var e=t.id,i=this.elem("item","id",e);if(i.length){t=t.data&&t.data[0],$(".inline-stocks__value_inner",i).html(t.value);var n=this.findElem(i,"cell","type","delta"),o=this.findElem(i,"cell","type","delta-label");t.delta?(n.html(t.delta).removeClass("i-hidden"),o.html(t.delta.replace("","-")),this.setMod(n,"delta",t.is_hot?"hot":"small")):(n.addClass("i-hidden"),o.html(""));var s=home.getData("inline-stocks.alts")||{};s[e]&&$(".inline-stocks__item__baloon_inner",i).html(s[e].replace("%d",t.date).replace("%t",t.time))}}}}),function(){var t;t=function(){var t=document,e=window,i={},n=function(){};n.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===i.arrIndexOf(n,e)&&n.push(e)},n.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var n=this._listeners[t],o=i.arrIndexOf(n,e);return-1!==o?void(n.length>1?this._listeners[t]=n.slice(0,o).concat(n.slice(o+1)):delete this._listeners[t]):void 0}},n.prototype.dispatchEvent=function(t){var e=t.type,i=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,i),this._listeners&&e in this._listeners)for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].apply(this,i)};var o=function(t,e){if(this.type=t,"undefined"!=typeof e)for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i])};o.prototype.toString=function(){var t=[];for(var e in this)if(this.hasOwnProperty(e)){var i=this[e];"function"==typeof i&&(i="[function]"),t.push(e+"="+i)}return"SimpleEvent("+t.join(", ")+")"};var s=function(t){var e=this;e._events=t||[],e._listeners={}};s.prototype.emit=function(t){var e=this;if(e._verifyType(t),!e._nuked){var i=Array.prototype.slice.call(arguments,1);if(e["on"+t]&&e["on"+t].apply(e,i),t in e._listeners)for(var n=0;n<e._listeners[t].length;n++)e._listeners[t][n].apply(e,i)}},s.prototype.on=function(t,e){var i=this;i._verifyType(t),i._nuked||(t in i._listeners||(i._listeners[t]=[]),i._listeners[t].push(e))},s.prototype._verifyType=function(t){var e=this;-1===i.arrIndexOf(e._events,t)&&i.log("Event "+JSON.stringify(t)+" not listed "+JSON.stringify(e._events)+" in "+e)},s.prototype.nuke=function(){var t=this;t._nuked=!0;for(var e=0;e<t._events.length;e++)delete t[t._events[e]];t._listeners={}};var r="abcdefghijklmnopqrstuvwxyz0123456789_";i.random_string=function(t,e){e=e||r.length;var i,n=[];for(i=0;t>i;i++)n.push(r.substr(Math.floor(Math.random()*e),1));return n.join("")},i.random_number=function(t){return Math.floor(Math.random()*t)},i.random_number_string=function(t){var e=(""+(t-1)).length,n=Array(e+1).join("0");return(n+i.random_number(t)).slice(-e)},i.getOrigin=function(t){t+="/";var e=t.split("/").slice(0,3);return e.join("/")},i.isSameOriginUrl=function(t,i){return i||(i=e.location.href),t.split("/").slice(0,3).join("/")===i.split("/").slice(0,3).join("/")},i.getParentDomain=function(t){if(/^[0-9.]*$/.test(t))return t;if(/^\[/.test(t))return t;if(!/[.]/.test(t))return t;var e=t.split(".").slice(1);return e.join(".")},i.objectExtend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t};var a="_jp";i.polluteGlobalNamespace=function(){a in e||(e[a]={})},i.closeFrame=function(t,e){return"c"+JSON.stringify([t,e])},i.userSetCode=function(t){return 1e3===t||t>=3e3&&4999>=t},i.countRTO=function(t){var e;return e=t>100?3*t:t+200},i.log=function(){e.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},i.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},i.flatUrl=function(t){return-1===t.indexOf("?")&&-1===t.indexOf("#")},i.amendUrl=function(e){var n=t.location;if(!e)throw new Error("Wrong url for SockJS");if(!i.flatUrl(e))throw new Error("Only basic urls are supported in SockJS");return 0===e.indexOf("//")&&(e=n.protocol+e),0===e.indexOf("/")&&(e=n.protocol+"//"+n.host+e),e=e.replace(/[\/]+$/,"")},i.arrIndexOf=function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},i.arrSkip=function(t,e){var n=i.arrIndexOf(t,e);if(-1===n)return t.slice();var o=t.slice(0,n);return o.concat(t.slice(n+1))},i.isArray=Array.isArray||function(t){return{}.toString.call(t).indexOf("Array")>=0},i.delay=function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)};var c,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","\x0B":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067",
"":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","\ufeff":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},h=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=JSON&&JSON.stringify||function(t){return u.lastIndex=0,u.test(t)&&(t=t.replace(u,function(t){return l[t]})),'"'+t+'"'},p=function(t){var e,i={},n=[];for(e=0;65536>e;e++)n.push(String.fromCharCode(e));return t.lastIndex=0,n.join("").replace(t,function(t){return i[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,i};i.quote=function(t){var e=d(t);return h.lastIndex=0,h.test(e)?(c||(c=p(h)),e.replace(h,function(t){return c[t]})):e};var f=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];i.probeProtocols=function(){for(var t={},e=0;e<f.length;e++){var i=f[e];t[i]=E[i]&&E[i].enabled()}return t},i.detectProtocols=function(t,e,i){var n={},o=[];e||(e=f);for(var s=0;s<e.length;s++){var r=e[s];n[r]=t[r]}var a=function(t){var e=t.shift();n[e]?o.push(e):t.length>0&&a(t)};return i.websocket!==!1&&a(["websocket"]),n["xhr-streaming"]&&!i.null_origin?o.push("xhr-streaming"):!n["xdr-streaming"]||i.cookie_needed||i.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),n["xhr-polling"]&&!i.null_origin?o.push("xhr-polling"):!n["xdr-polling"]||i.cookie_needed||i.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var m="_sockjs_global";i.createHook=function(){var t="a"+i.random_string(8);if(!(m in e)){var n={};e[m]=function(t){return t in n||(n[t]={id:t,del:function(){delete n[t]}}),n[t]}}return e[m](t)},i.attachMessage=function(t){i.attachEvent("message",t)},i.attachEvent=function(i,n){"undefined"!=typeof e.addEventListener?e.addEventListener(i,n,!1):(t.attachEvent("on"+i,n),e.attachEvent("on"+i,n))},i.detachMessage=function(t){i.detachEvent("message",t)},i.detachEvent=function(i,n){"undefined"!=typeof e.addEventListener?e.removeEventListener(i,n,!1):(t.detachEvent("on"+i,n),e.detachEvent("on"+i,n))};var _={},g=!1,v=function(){for(var t in _)_[t](),delete _[t]},b=function(){g||(g=!0,v())};i.attachEvent("unload",b),i.unload_add=function(t){var e=i.random_string(8);return _[e]=t,g&&i.delay(v),e},i.unload_del=function(t){t in _&&delete _[t]},i.createIframe=function(e,n){var o,s,r=t.createElement("iframe"),a=function(){clearTimeout(o);try{r.onload=null}catch(t){}r.onerror=null},c=function(){r&&(a(),setTimeout(function(){r&&r.parentNode.removeChild(r),r=null},0),i.unload_del(s))},u=function(t){r&&(c(),n(t))},l=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(i){}};return r.src=e,r.style.display="none",r.style.position="absolute",r.onerror=function(){u("onerror")},r.onload=function(){clearTimeout(o),o=setTimeout(function(){u("onload timeout")},2e3)},t.body.appendChild(r),o=setTimeout(function(){u("timeout")},15e3),s=i.unload_add(c),{post:l,cleanup:c,loaded:a}},i.createHtmlfile=function(t,n){var o,s,r,c=new ActiveXObject("htmlfile"),u=function(){clearTimeout(o)},l=function(){c&&(u(),i.unload_del(s),r.parentNode.removeChild(r),r=c=null,CollectGarbage())},h=function(t){c&&(l(),n(t))},d=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(i){}};c.open(),c.write('<html><script>document.domain="'+document.domain+'";</script></html>'),c.close(),c.parentWindow[a]=e[a];var p=c.createElement("div");return c.body.appendChild(p),r=c.createElement("iframe"),p.appendChild(r),r.src=t,o=setTimeout(function(){h("timeout")},15e3),s=i.unload_add(l),{post:d,cleanup:l,loaded:u}};var y=function(){};y.prototype=new s(["chunk","finish"]),y.prototype._start=function(t,n,o,s){var r=this;try{r.xhr=new XMLHttpRequest}catch(a){}if(!r.xhr)try{r.xhr=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(e.ActiveXObject||e.XDomainRequest)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+ +new Date),r.unload_ref=i.unload_add(function(){r._cleanup(!0)});try{r.xhr.open(t,n,!0)}catch(c){return r.emit("finish",0,""),void r._cleanup()}if(s&&s.no_credentials||(r.xhr.withCredentials="true"),s&&s.headers)for(var u in s.headers)r.xhr.setRequestHeader(u,s.headers[u]);r.xhr.onreadystatechange=function(){if(r.xhr){var t=r.xhr;switch(t.readyState){case 3:try{var e=t.status,i=t.responseText}catch(t){}1223===e&&(e=204),i&&i.length>0&&r.emit("chunk",e,i);break;case 4:var e=t.status;1223===e&&(e=204),r.emit("finish",e,t.responseText),r._cleanup(!1)}}},r.xhr.send(o)},y.prototype._cleanup=function(t){var e=this;if(e.xhr){if(i.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(n){}e.unload_ref=e.xhr=null}},y.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)};var w=i.XHRCorsObject=function(){var t=this,e=arguments;i.delay(function(){t._start.apply(t,e)})};w.prototype=new y;var k=i.XHRLocalObject=function(t,e,n){var o=this;i.delay(function(){o._start(t,e,n,{no_credentials:!0})})};k.prototype=new y;var x=i.XDRObject=function(t,e,n){var o=this;i.delay(function(){o._start(t,e,n)})};x.prototype=new s(["chunk","finish"]),x.prototype._start=function(t,e,n){var o=this,s=new XDomainRequest;e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date;var r=s.ontimeout=s.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};s.onprogress=function(){o.emit("chunk",200,s.responseText)},s.onload=function(){o.emit("finish",200,s.responseText),o._cleanup(!1)},o.xdr=s,o.unload_ref=i.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(t,e),o.xdr.send(n)}catch(a){r()}},x.prototype._cleanup=function(t){var e=this;if(e.xdr){if(i.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(n){}e.unload_ref=e.xdr=null}},x.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},i.isXHRCorsCapable=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:e.XDomainRequest&&t.domain?2:j.enabled()?3:4};var E=function(t,n,o){if(this===e)return new E(t,n,o);var s,r=this;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&i.objectExtend(r._options,o),r._base_url=i.amendUrl(t),r._server=r._options.server||i.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?s=r._options.protocols_whitelist:(s="string"==typeof n&&n.length>0?[n]:i.isArray(n)?n:null,s&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),r._protocols=[],r.protocol=null,r.readyState=E.CONNECTING,r._ir=H(r._base_url),r._ir.onfinish=function(t,e){r._ir=null,t?(r._options.info&&(t=i.objectExtend(t,r._options.info)),r._options.rtt&&(e=r._options.rtt),r._applyInfo(t,e,s),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};E.prototype=new n,E.version="0.3.4",E.CONNECTING=0,E.OPEN=1,E.CLOSING=2,E.CLOSED=3,E.prototype._debug=function(){this._options.debug&&i.log.apply(i,arguments)},E.prototype._dispatchOpen=function(){var t=this;t.readyState===E.CONNECTING?(t._transport_tref&&(clearTimeout(t._transport_tref),t._transport_tref=null),t.readyState=E.OPEN,t.dispatchEvent(new o("open"))):t._didClose(1006,"Server lost session")},E.prototype._dispatchMessage=function(t){var e=this;e.readyState===E.OPEN&&e.dispatchEvent(new o("message",{data:t}))},E.prototype._dispatchHeartbeat=function(t){var e=this;e.readyState===E.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},E.prototype._didClose=function(t,e,n){var s=this;if(s.readyState!==E.CONNECTING&&s.readyState!==E.OPEN&&s.readyState!==E.CLOSING)throw new Error("INVALID_STATE_ERR");s._ir&&(s._ir.nuke(),s._ir=null),s._transport&&(s._transport.doCleanup(),s._transport=null);var r=new o("close",{code:t,reason:e,wasClean:i.userSetCode(t)});if(!i.userSetCode(t)&&s.readyState===E.CONNECTING&&!n){if(s._try_next_protocol(r))return;r=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:r})}s.readyState=E.CLOSED,i.delay(function(){s.dispatchEvent(r)})},E.prototype._didMessage=function(t){var e=this,i=t.slice(0,1);switch(i){case"o":e._dispatchOpen();break;case"a":for(var n=JSON.parse(t.slice(1)||"[]"),o=0;o<n.length;o++)e._dispatchMessage(n[o]);break;case"m":var n=JSON.parse(t.slice(1)||"null");e._dispatchMessage(n);break;case"c":var n=JSON.parse(t.slice(1)||"[]");e._didClose(n[0],n[1]);break;case"h":e._dispatchHeartbeat()}},E.prototype._try_next_protocol=function(e){var n=this;for(n.protocol&&(n._debug("Closed transport:",n.protocol,""+e),n.protocol=null),n._transport_tref&&(clearTimeout(n._transport_tref),n._transport_tref=null);;){var o=n.protocol=n._protocols.shift();if(!o)return!1;if(E[o]&&E[o].need_body===!0&&(!t.body||"undefined"!=typeof t.readyState&&"complete"!==t.readyState))return n._protocols.unshift(o),n.protocol="waiting-for-load",i.attachEvent("load",function(){n._try_next_protocol()}),!0;if(E[o]&&E[o].enabled(n._options)){var s=E[o].roundTrips||1,r=(n._options.rto||0)*s||5e3;n._transport_tref=i.delay(r,function(){n.readyState===E.CONNECTING&&n._didClose(2007,"Transport timeouted")});var a=i.random_string(8),c=n._base_url+"/"+n._server+"/"+a;return n._debug("Opening transport:",o," url:"+c," RTO:"+n._options.rto),n._transport=new E[o](n,c,n._base_url),!0}n._debug("Skipping transport:",o)}},E.prototype.close=function(t,e){var n=this;if(t&&!i.userSetCode(t))throw new Error("INVALID_ACCESS_ERR");return n.readyState!==E.CONNECTING&&n.readyState!==E.OPEN?!1:(n.readyState=E.CLOSING,n._didClose(t||1e3,e||"Normal closure"),!0)},E.prototype.send=function(t){var e=this;if(e.readyState===E.CONNECTING)throw new Error("INVALID_STATE_ERR");return e.readyState===E.OPEN&&e._transport.doSend(i.quote(""+t)),!0},E.prototype._applyInfo=function(e,n,o){var s=this;s._options.info=e,s._options.rtt=n,s._options.rto=i.countRTO(n),s._options.info.null_origin=!t.domain;var r=i.probeProtocols();s._protocols=i.detectProtocols(r,o,e)};var M=E.websocket=function(t,n){var o=this,s=n+"/websocket";s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),o.ri=t,o.url=s;var r=e.WebSocket||e.MozWebSocket;o.ws=new r(o.url),o.ws.onmessage=function(t){o.ri._didMessage(t.data)},o.unload_ref=i.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(i.closeFrame(1006,"WebSocket connection broken"))}};M.prototype.doSend=function(t){this.ws.send("["+t+"]")},M.prototype.doCleanup=function(){var t=this,e=t.ws;e&&(e.onmessage=e.onclose=null,e.close(),i.unload_del(t.unload_ref),t.unload_ref=t.ri=t.ws=null)},M.enabled=function(){return!(!e.WebSocket&&!e.MozWebSocket)},M.roundTrips=2;var T=function(){};T.prototype.send_constructor=function(t){var e=this;e.send_buffer=[],e.sender=t},T.prototype.doSend=function(t){var e=this;e.send_buffer.push(t),e.send_stop||e.send_schedule()},T.prototype.send_schedule_wait=function(){var t,e=this;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=i.delay(25,function(){e.send_stop=null,e.send_schedule()})},T.prototype.send_schedule=function(){var t=this;if(t.send_buffer.length>0){var e="["+t.send_buffer.join(",")+"]";t.send_stop=t.sender(t.trans_url,e,function(e,i){t.send_stop=null,e===!1?t.ri._didClose(1006,"Sending error "+i):t.send_schedule_wait()}),t.send_buffer=[]}},T.prototype.send_destructor=function(){var t=this;t._send_stop&&t._send_stop(),t._send_stop=null};var S=function(e,n,o){var s=this;if(!("_send_form"in s)){var r=s._send_form=t.createElement("form"),a=s._send_area=t.createElement("textarea");a.name="d",r.style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",r.appendChild(a),t.body.appendChild(r)}var r=s._send_form,a=s._send_area,c="a"+i.random_string(8);r.target=c,r.action=e+"/jsonp_send?i="+c;var u;try{u=t.createElement('<iframe name="'+c+'">')}catch(l){u=t.createElement("iframe"),u.name=c}u.id=c,r.appendChild(u),u.style.display="none";try{a.value=n}catch(h){i.log("Your browser is seriously broken. Go home! "+h.message)}r.submit();var d=function(t){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,i.delay(500,function(){u.parentNode.removeChild(u),u=null}),a.value="",o(!0))};return u.onerror=u.onload=d,u.onreadystatechange=function(t){"complete"==u.readyState&&d()},d},C=function(t){return function(e,i,n){var o=new t("POST",e+"/xhr_send",i);return o.onfinish=function(t,e){n(200===t||204===t,"http status "+t)},function(t){n(!1,t)}}},I=function(e,n){var o,s,r=t.createElement("script"),a=function(t){s&&(s.parentNode.removeChild(s),s=null),r&&(clearTimeout(o),r.parentNode.removeChild(r),r.onreadystatechange=r.onerror=r.onload=r.onclick=null,r=null,n(t),n=null)},c=!1,u=null;if(r.id="a"+i.random_string(8),r.src=e,r.type="text/javascript",r.charset="UTF-8",r.onerror=function(t){u||(u=setTimeout(function(){c||a(i.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},r.onload=function(t){a(i.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(t){if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){c=!0;try{r.onclick()}catch(e){}}r&&a(i.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof r.async&&t.attachEvent)if(/opera/i.test(navigator.userAgent))s=t.createElement("script"),s.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=s.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(l){}r.async=!0}"undefined"!=typeof r.async&&(r.async=!0),o=setTimeout(function(){a(i.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var h=t.getElementsByTagName("head")[0];return h.insertBefore(r,h.firstChild),s&&h.insertBefore(s,h.firstChild),a},D=E["jsonp-polling"]=function(t,e){i.polluteGlobalNamespace();var n=this;n.ri=t,n.trans_url=e,n.send_constructor(S),n._schedule_recv()};D.prototype=new T,D.prototype._schedule_recv=function(){var t=this,e=function(e){t._recv_stop=null,e&&(t._is_closing||t.ri._didMessage(e)),t._is_closing||t._schedule_recv()};t._recv_stop=B(t.trans_url+"/jsonp",I,e)},D.enabled=function(){return!0},D.need_body=!0,D.prototype.doCleanup=function(){var t=this;t._is_closing=!0,t._recv_stop&&t._recv_stop(),t.ri=t._recv_stop=null,t.send_destructor()};var B=function(t,n,o){var s="a"+i.random_string(6),r=t+"?c="+escape(a+"."+s),c=0,u=function(t){switch(c){case 0:delete e[a][s],o(t);break;case 1:o(t),c=2;break;case 2:delete e[a][s]}},l=n(r,u);e[a][s]=l;var h=function(){e[a][s]&&(c=1,e[a][s](i.closeFrame(1e3,"JSONP user aborted read")))};return h},P=function(){};P.prototype=new T,P.prototype.run=function(t,e,i,n,o){var s=this;s.ri=t,s.trans_url=e,s.send_constructor(C(o)),s.poll=new Q(t,n,e+i,o)},P.prototype.doCleanup=function(){var t=this;t.poll&&(t.poll.abort(),t.poll=null)};var $=E["xhr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",nt,i.XHRCorsObject)};$.prototype=new P,$.enabled=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},$.roundTrips=2,$.need_body=!0;var O=E["xdr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",nt,i.XDRObject)};O.prototype=new P,O.enabled=function(){return!!e.XDomainRequest},O.roundTrips=2;var A=E["xhr-polling"]=function(t,e){this.run(t,e,"/xhr",nt,i.XHRCorsObject)};A.prototype=new P,A.enabled=$.enabled,A.roundTrips=2;var F=E["xdr-polling"]=function(t,e){this.run(t,e,"/xhr",nt,i.XDRObject)};F.prototype=new P,F.enabled=O.enabled,F.roundTrips=2;var j=function(){};j.prototype.i_constructor=function(t,e,n){var o=this;o.ri=t,o.origin=i.getOrigin(n),o.base_url=n,o.trans_url=e;var s=n+"/iframe.html";o.ri._options.devel&&(s+="?t="+ +new Date),o.window_id=i.random_string(8),s+="#"+o.window_id,o.iframeObj=i.createIframe(s,function(t){o.ri._didClose(1006,"Unable to load an iframe ("+t+")")}),o.onmessage_cb=i.bind(o.onmessage,o),i.attachMessage(o.onmessage_cb)},j.prototype.doCleanup=function(){var t=this;if(t.iframeObj){i.detachMessage(t.onmessage_cb);try{t.iframeObj.iframe.contentWindow&&t.postMessage("c")}catch(e){}t.iframeObj.cleanup(),t.iframeObj=null,t.onmessage_cb=t.iframeObj=null}},j.prototype.onmessage=function(t){var e=this;if(t.origin===e.origin){var i=t.data.slice(0,8),n=t.data.slice(8,9),o=t.data.slice(9);if(i===e.window_id)switch(n){case"s":e.iframeObj.loaded(),e.postMessage("s",JSON.stringify([E.version,e.protocol,e.trans_url,e.base_url]));break;case"t":e.ri._didMessage(o)}}},j.prototype.postMessage=function(t,e){var i=this;i.iframeObj.post(i.window_id+t+(e||""),i.origin)},j.prototype.doSend=function(t){this.postMessage("m",t)},j.enabled=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t};var N,R=function(t,n){parent!==e?parent.postMessage(N+t+(n||""),"*"):i.log("Can't postMessage, no parent window.",t,n)},L=function(){};L.prototype._didClose=function(t,e){R("t",i.closeFrame(t,e))},L.prototype._didMessage=function(t){R("t",t)},L.prototype._doSend=function(t){this._transport.doSend(t)},L.prototype._doCleanup=function(){this._transport.doCleanup()},i.parent_origin=void 0,E.bootstrap_iframe=function(){var n;N=t.location.hash.slice(1);var o=function(t){if(t.source===parent&&("undefined"==typeof i.parent_origin&&(i.parent_origin=t.origin),t.origin===i.parent_origin)){var o=t.data.slice(0,8),s=t.data.slice(8,9),r=t.data.slice(9);if(o===N)switch(s){case"s":var a=JSON.parse(r),c=a[0],u=a[1],l=a[2],h=a[3];if(c!==E.version&&i.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+E.version+'".'),!i.flatUrl(l)||!i.flatUrl(h))return void i.log("Only basic urls are supported in SockJS");if(!i.isSameOriginUrl(l)||!i.isSameOriginUrl(h))return void i.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([e.location.href,l,h])+")");n=new L,n._transport=new L[u](n,l,h);break;case"m":n._doSend(r);break;case"c":n&&n._doCleanup(),n=null}}};i.attachMessage(o),R("s")};var U=function(t,e){var n=this;i.delay(function(){n.doXhr(t,e)})};U.prototype=new s(["finish"]),U.prototype.doXhr=function(t,e){var n=this,o=(new Date).getTime(),s=new e("GET",t+"/info"),r=i.delay(8e3,function(){s.ontimeout()});s.onfinish=function(t,e){if(clearTimeout(r),r=null,200===t){var i=(new Date).getTime()-o,s=JSON.parse(e);"object"!=typeof s&&(s={}),n.emit("finish",s,i)}else n.emit("finish")},s.ontimeout=function(){s.close(),n.emit("finish")}};var W=function(e){var n=this,o=function(){var t=new j;t.protocol="w-iframe-info-receiver";var i=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var i=JSON.parse(e.substr(1)),o=i[0],s=i[1];n.emit("finish",o,s)}else n.emit("finish");t.doCleanup(),t=null},o={_options:{},_didClose:i,_didMessage:i};t.i_constructor(o,e,e)};t.body?o():i.attachEvent("load",o)};W.prototype=new s(["finish"]);var z=function(){var t=this;i.delay(function(){t.emit("finish",{},2e3)})};z.prototype=new s(["finish"]);var H=function(t){if(i.isSameOriginUrl(t))return new U(t,i.XHRLocalObject);switch(i.isXHRCorsCapable()){case 1:return new U(t,i.XHRLocalObject);case 2:return new U(t,i.XDRObject);case 3:return new W(t);default:return new z}},q=L["w-iframe-info-receiver"]=function(t,e,n){var o=new U(n,i.XHRLocalObject);o.onfinish=function(e,i){t._didMessage("m"+JSON.stringify([e,i])),t._didClose()}};q.prototype.doCleanup=function(){};var V=E["iframe-eventsource"]=function(){var t=this;t.protocol="w-iframe-eventsource",t.i_constructor.apply(t,arguments)};V.prototype=new j,V.enabled=function(){return"EventSource"in e&&j.enabled()},V.need_body=!0,V.roundTrips=3;var K=L["w-iframe-eventsource"]=function(t,e){this.run(t,e,"/eventsource",Z,i.XHRLocalObject)};K.prototype=new P;var X=E["iframe-xhr-polling"]=function(){var t=this;t.protocol="w-iframe-xhr-polling",t.i_constructor.apply(t,arguments)};X.prototype=new j,X.enabled=function(){return e.XMLHttpRequest&&j.enabled()},X.need_body=!0,X.roundTrips=3;var G=L["w-iframe-xhr-polling"]=function(t,e){this.run(t,e,"/xhr",nt,i.XHRLocalObject)};G.prototype=new P;var Y=E["iframe-htmlfile"]=function(){var t=this;t.protocol="w-iframe-htmlfile",t.i_constructor.apply(t,arguments)};Y.prototype=new j,Y.enabled=function(){return j.enabled()},Y.need_body=!0,Y.roundTrips=3;var J=L["w-iframe-htmlfile"]=function(t,e){this.run(t,e,"/htmlfile",it,i.XHRLocalObject)};J.prototype=new P;var Q=function(t,e,i,n){var o=this;o.ri=t,o.Receiver=e,o.recv_url=i,o.AjaxObject=n,o._scheduleRecv()};Q.prototype._scheduleRecv=function(){var t=this,e=t.poll=new t.Receiver(t.recv_url,t.AjaxObject),i=0;e.onmessage=function(e){i+=1,t.ri._didMessage(e.data)},e.onclose=function(i){t.poll=e=e.onmessage=e.onclose=null,t.poll_is_closing||("permanent"===i.reason?t.ri._didClose(1006,"Polling error ("+i.reason+")"):t._scheduleRecv())}},Q.prototype.abort=function(){var t=this;t.poll_is_closing=!0,t.poll&&t.poll.abort()};var Z=function(t){var e=this,n=new EventSource(t);n.onmessage=function(t){e.dispatchEvent(new o("message",{data:unescape(t.data)}))},e.es_close=n.onerror=function(t,s){var r=s?"user":2!==n.readyState?"network":"permanent";e.es_close=n.onmessage=n.onerror=null,n.close(),n=null,i.delay(200,function(){e.dispatchEvent(new o("close",{reason:r}))})}};Z.prototype=new n,Z.prototype.abort=function(){var t=this;t.es_close&&t.es_close({},!0)};var tt,et=function(){if(void 0===tt)if("ActiveXObject"in e)try{tt=!!new ActiveXObject("htmlfile")}catch(t){}else tt=!1;return tt},it=function(t){var n=this;i.polluteGlobalNamespace(),n.id="a"+i.random_string(6,26),t+=(-1===t.indexOf("?")?"?":"&")+"c="+escape(a+"."+n.id);var s,r=et()?i.createHtmlfile:i.createIframe;e[a][n.id]={start:function(){s.loaded()},message:function(t){n.dispatchEvent(new o("message",{data:t}))},stop:function(){n.iframe_close({},"network")}},n.iframe_close=function(t,i){s.cleanup(),n.iframe_close=s=null,delete e[a][n.id],n.dispatchEvent(new o("close",{reason:i}))},s=r(t,function(t){n.iframe_close({},"permanent")})};it.prototype=new n,it.prototype.abort=function(){var t=this;t.iframe_close&&t.iframe_close({},"user")};var nt=function(t,e){var i=this,n=0;i.xo=new e("POST",t,null),i.xo.onchunk=function(t,e){if(200===t)for(;;){var s=e.slice(n),r=s.indexOf("\n");if(-1===r)break;n+=r+1;var a=s.slice(0,r);i.dispatchEvent(new o("message",{data:a}))}},i.xo.onfinish=function(t,e){i.xo.onchunk(t,e),i.xo=null;var n=200===t?"network":"permanent";i.dispatchEvent(new o("close",{reason:n}))}};return nt.prototype=new n,nt.prototype.abort=function(){var t=this;t.xo&&(t.xo.close(),t.dispatchEvent(new o("close",{reason:"user"})),t.xo=null)},E.getUtils=function(){return i},E.getIframeTransport=function(){return j},E}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return t}),function(){"use strict";var e,i,n,o={},s=!1,r=0,a=!1,c=!0,u=[],l=!0;BEM.decl("i-xiva",{},{listen:function(t,e,i){var n=!o[t];n&&(o[t]={handlers:[]}),o[t].ts=e,o[t].handlers.push(i),this._init(),n&&this._subscribe()},connect:function(){c=!0,this._connect()},disconnect:function(t){c=t,e&&e.close&&e.close(1e3,"unload")},_sendQueue:function(){var t,e,i;for(t=0,e=u.length;e>t;++t)(i=u[t].handler)(u[t].data);u=[]},_toggleFocus:function(t){l=t,l&&this._sendQueue()},_initFocusEvents:function(){var t=this;$.browser&&$.browser.msie?$(document).bind("focusout",function(){t._toggleFocus(!1)}).bind("focusin",function(){t._toggleFocus(!0)}):$(window).focus(function(){t._toggleFocus(!0)}).blur(function(){t._toggleFocus(!1)})},_bindOnUnload:function(){var t=this;$(window).on("beforeunload",function(){t.disconnect(!1)})},_init:function(){if(!s){s=!0,this._initFocusEvents(),this._bindOnUnload(),this._connect=this._connect.bind(this);var t=this;setTimeout(function(){t.connected||t._connect()},6e4)}},_hasXivaSupport:function(){return!!window.WebSocket},_connect:function(){var i=BEM.blocks["i-global"].param("xivaUrl"),n=this;this.connected=!0,this._hasXivaSupport()&&i&&(e=new t("//"+i+"/xiva",null,{protocols_whitelist:["websocket"]}),e.onopen=function(){n._connected=!0,n._subscribe(),n._checkConnection()},e.onmessage=n._onMessage,e.onclose=function(){n._connected=!1,n._reconnect()})},_reconnect:function(){this._stopConnectionTimer(),c&&(r++,5>=r?setTimeout(this._connect,3e3):15>=r?setTimeout(this._connect,1e4):setTimeout(this._connect,6e4))},_stopConnectionTimer:function(){i&&(clearTimeout(i),i=null)},_checkConnection:function(){this._stopConnectionTimer(),i=setTimeout(function(){a&&(r=0)},5e3)},_subscribe:function(){var t=this;n&&clearTimeout(n),n=setTimeout(function(){t._subscribeSend()},100)},_subscribeSend:function(){var t;if(this._connected){t={subscribe:{}};for(var i in o)o.hasOwnProperty(i)&&(t.subscribe[i]=o[i].ts);e.send(JSON.stringify(t))}},_onMessage:function(t){var e,i,n,s,r=$.trim(t.data);try{if(e=JSON.parse(r),n=e.ch+"_"+e.key,o[n]&&(i=parseInt(e.ts),o[n].ts<i)){o[n].ts=i,s=o[n].handlers;for(var a=0,c=s.length;c>a;++a)l?s[a](e):u.push({handler:s[a],data:e})}}catch(h){}}})}()}(),function(){var t=6e4;BEM.DOM.decl({block:"inline-stocks",modName:"new",modVal:"yes"},{onSetMod:{js:function(){this.__base(),this.bindTo("more","pointerclick",this.toggleMore),this.bindTo("more","keydown",this._keydown),this.getPopup()._owner=this.domElem}},_keydown:function(t){if(!(t.altKey||t.metaKey||t.ctrlKey||t.shiftKey))switch(t.which){case 32:case 13:t.preventDefault(),this.toggleMore()}},toggleMore:function(){var t=this.getPopup();t.isShown()||this.onShow(t),t.toggle(this.domElem)},getPopup:function(){return this.__self._popup||(this.__self._popup=this.createPopup())},onShow:function(e){var i=this;return!this.data||this.data&&this.datats&&Number(new Date-this.datats)>t?(i.toggleState("load"),$.ajax({url:this.params.stocksUrl,dataType:"json",success:function(t){return t&&t.Stocks?(i.needTopNewsUpdate&&(i.needTopNewsUpdate=!1,i.updateTopNews()),i.datats=Number(new Date),i.data=t,i.createTable(t,e),void i.onShow(e)):void i.toggleState("error")},error:function(){i.toggleState("error")}})):(this.toggleState("tables"),home.stat.logDOMShow(e.domElem,{visibilityCheck:!1}),this.getPopup()._unbindFocusEvents(),void this.getPopup()._bindFocusEvents())},createPopup:function(){var t=-25,e=this.domElem.offset().left,i=$(document.body).width();e>i/2&&(t=Math.floor(i/3)-e);var n=this.params.editShow,o=$(BEMHTML.apply({block:"popup",mods:{theme:"ffffff",autoclosable:"yes",animate:"yes",adaptive:"yes"},cls:"inline-stocks__popup-wrap",js:{directions:[{to:"bottom",axis:"left",offset:{left:t,top:-25}}]},content:[{block:"inline-stocks",elem:"tune",tag:"a",cls:"b-widget__control"+(n?"":" inline-stocks__tune_hidden"),content:'<i class="b-ico b-ico-widget-prefs"></i>',attrs:{href:"?edit=1#open=_stocks","data-statlog":"news_rates_manual.popup.tune"}},{elem:"close",attrs:{"data-statlog":"news_rates_manual.popup.close"}},{elem:"content",mods:{padded:"old"}}]}));return o=this.findBlockOn(o,"popup"),this.__self.popup=this.elem("popup"),o.elem("content").append(this.__self.popup),this.getInstance()&&this.bindTo(this.findElem(o.domElem,"tune"),"click",this.showForm),o.on("show hide",function(){this.isShown()?this.elem("more").attr("aria-expanded","true"):this.elem("more").attr("aria-expanded","false")}),o.on("outside-click",function(t,e){return $(e.target).closest("#widget_pref_form").length?!1:void 0}),o},templates:{val:function(t){return'<td><i class="inline-stocks__cell">'+t.value+"</i></td>"},delta:function(t,e){var i,n=home.getData("inline-stocks.alts");return e&&n&&(i=n.bigdiff.replace(/%d%(%)/,e+"$1")),t.delta?'<td><i class="inline-stocks__cell inline-stocks__cell_type_delta inline-stocks__cell_delta_'+(t.is_hot?"hot":"small")+'"'+(i&&t.is_hot?' title="'+i+'"':"")+' aria-hidden="true">'+t.delta+'</i><span class="a11y-hidden">'+String(t.delta).replace("","-")+"</span></td>":""},date:function(t){var e=t.datetime||t.time||t.date;return e?'<td><i class="inline-stocks__cell_datetime">'+e+"</i></td>":""}},rowsByType:{cash:function(t){return t.map(this.templates.val).join("")},currency:function(t,e){return t.map(function(t,i){return(i?this.templates.delta(t,e):"")+this.templates.val(t)},this).join("")},indexes:function(t,e){var i=t[0];return this.templates.date(i)+this.templates.delta(i,e)+this.templates.val(i)}},createTable:function(t){var e=this,i=home.view("inline-stocks__tables",t.Stocks),n=this.findElem(this.__self.popup,"tables");n.html(i),this.findElem(n,"table").each(function(){e.toggleTommorrowTitleVisibility($(this))})},toggleTommorrowTitleVisibility:function(t){var e=this.getMod(t,"type");if("indexes"!==e){var i=t.find("tr:not(.inline-stocks__head)"),n=0;i.each(function(){var t=$(this).find("td").length;t>n&&(n=t)});var o="hide";(n>3&&"currency"===e||n>2&&"cash"===e)&&(o="show"),t.find(".inline-stocks__head .inline-stocks__cell:last")[o]()}},updateFunc:function(t){this.__base(t)},replaceCaps:function(t){return t.replace(/<(\w)>([^<]+)<\/\1>/g,function(t,e,i){switch(e){case"c":return'<span class="b-stocks__caps">'+i+"</span>";case"d":return'<span class="b-stocks__numbers">'+i+"</span>";default:return t}})},toggleState:function(t){this.setMod(this.__self.popup,"state",t)},getId:function(){return"_stocks-1"},getInstance:function(){return window.Widget&&Widget.Framework.get("_stocks-1")},showForm:function(t){var e=this;t.preventDefault(),this.toggleMore(),$(".b-wdgt-preferences").bem("b-wdgt-preferences").show($("#wd-wrapper-"+this.getId()).bem("widget"),function(){e.needTopNewsUpdate=!0,e.data=null,e.toggleMore()})},updateTopNews:function(){var t=$("#wd-wrapper-_topnews-1").bem("widget");t.getInstance().reload(!1,!1,!0)}})}(),function(t,e,i){function n(t,e,i){(t[e]||(t[e]=[])).unshift(i)}function o(t,e){return e.modName?function(i){(i._curBlock.mods||{})[e.modName]===e.modVal&&t(i)}:t}function s(t,i){var n,o=e.isArray(i);return e.isArray(t)?o?n=t.concat(i):(n=t).push(i):o?(n=i).unshift(t):n=[t,i],n}function r(t){return t.replace(f,function(t){return p[t]})}var a=t.INTERNAL,c=a.ELEM_DELIM,u={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},l=a.buildClass,h=a.buildClasses,d={},p={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},f=/["&<>]/g;t.HTML={decl:function(t,i){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var s=d[t.block]||(d[t.block]={});i.onBlock&&n(s,"_block",o(i.onBlock,t)),i.onElem&&(e.isFunction(i.onElem)?n(s,"_elem",o(i.onElem,t)):e.each(i.onElem,function(e,i){n(s,"_elem"+("*"===e?"":c+e),o(i,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=i},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,
e)},param:function(t,i,n,o){var s=this,r=s._params;return"undefined"==typeof i?r[t]:(!n&&t in r?o&&(r[t]=e.extend(i,r[t])):r[t]=i,s)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,i){var n=this;if("undefined"==typeof e)return(n._params.attrs||{})[t];var o=n._params.attrs;return o?(i||!(t in o))&&(o[t]=e):(n._params.attrs={})[t]=e,n},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,i){var n=this;if("undefined"==typeof e)return(n._params.mods||{})[t];var o=n._params.mods;return o?(i||!(t in o))&&(o[t]=e):(n._params.mods={})[t]=e,n},mix:function(t,e){var i=this,n=i._params;return"undefined"==typeof t?n.mix:(!e&&"mix"in n?n.mix=n.mix.concat(t):n.mix=t,i)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,i=e._params;return t.content=i.content,i.content=t,e},beforeContent:function(t){var e=this,i=e._params;return i.content=s(t,i.content),e},afterContent:function(t){var e=this,i=e._params;return i.content=s(i.content,t),e},wrap:function(t){var e=this,i=e._params;return t.block||(t._curBlock=e._curBlock),t.content=i._wrapper?i._wrapper:i,i._wrapper=t,e},tParam:function(t,e){var i=this,n=i._tParams||(i._tParams={});if("undefined"==typeof e)return n[t];var o=i._tParamsChanges||(i._tParamsChanges={});return t in o||(o[t]=n[t]),n[t]=e,i},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,i=t._buffer,n=t._params,o=typeof n;if("string"===o||"number"===o)i.push(n);else if(e.isArray(n))for(var s,r,a=0,c=n.length;c>a;)t._params=s=n[a++],r=typeof s,"string"===r||"number"===r?i.push(s):s&&(s._pos=a,s._siblingsCount=c,t._buildByDecl());else n&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,i=this,n=i._buffer,o=i._params,s=o.tag||"div",a=o.block||o.elem,c=a&&(o.block||i._curBlock.block),d=!1;o.js&&((t={})[l(c,o.elem)]=o.js===!0?{}:o.js,d=!o.elem),n.push("<",s),(a||o.cls)&&(n.push(' class="'),a&&(h(c,o.elem,o.mods,n),o.mix&&e.each(o.mix,function(e,i){i&&(n.push(" "),h(i.block,i.elem,i.mods,n),i.js&&((t||(t={}))[l(i.block,i.elem)]=i.js===!0?{}:i.js,d||(d=!i.elem)))})),o.cls&&n.push(a?" ":"",o.cls),d&&n.push(" i-bem"),n.push('"')),t&&n.push(' onclick="return ',r(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&n.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),u[s]?n.push("/>"):(n.push(">"),"undefined"!=typeof o.content&&(i._params=o.content,i._buildAll()),n.push("</",s,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,i=t._curBlock,n=t._params;if(n._curBlock&&(t._curBlock=n._curBlock),n.block&&(t._curBlock=n),!n._wrapper){if(n.block||n.elem){var o=d[t._curBlock.block];if(o){var s;if(n.elem?(s=o["_elem"+c+n.elem],o._elem&&(s=s?s.concat(o._elem):o._elem)):s=o._block,s)for(var r,a=0;(r=s[a++])&&(r(t),!n._isStopped););}}if(n._wrapper)return n._curBlock=t._curBlock,t._params=n._wrapper,t._buildAll()}var u=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=i,u){var l=t._tParams;e.each(u,function(t,e){"undefined"==typeof e?delete l[t]:l[t]=e})}}})}}(BEM,jQuery),BEM.DOM.decl("widget",{onSetMod:{js:function(){this.tuned=!1,this.createControl(),this.listenToXiva(),this.bindTo("mouseenter",this.changeThis(function(){this.setMod("hovered","yes")})),this.bindTo("mouseleave",this.changeThis(function(){this.delMod("hovered")})),this.channel("widget").on("hidePreferences",this.onHidePreferences,this)},hovered:{yes:function(){},"":function(){}},drag:{on:function(){this.createDrag(),this.getInstance().stopAutoReload()},"":function(){this.getInstance().queueAutoReload()}},removed:function(t,e){var i=this.getInstance(),n="yes"===e;i&&(i.params.removed=n),this.channel("widget").trigger("commit",{type:n?"remove":"recover",id:this.getId()}),n?this.getInstance().stopAutoReload():this.getInstance().queueAutoReload()},state:{add:function(){this.getSaveButtons().appendTo(this.domElem),this.setMod("drag","on"),this.getInstance().stopAutoReload(),this.bindToWin("widgetLoaded",function(t){t.id===this.getId()&&(this.elem("buttons").height(41).height(40),this.elem("accept").focus())})},remove:function(){var t=this.__self.getRmPopup(),e=this.changeThis(function(){this.setMod("removed","yes")}),i=this.changeThis(function(){this.delMod("state")});t.show(this,e,i)},"":function(){this.elem("buttons").detach(),this.getInstance().queueAutoReload(),this.unbindFromWin("widgetLoaded")}}},destruct:function(){this.channel("widget").un("hidePreferences",this.onHidePreferences,this),this.__base.apply(this,arguments)},onHidePreferences:function(t,e){this===e.elem&&this.hasMod("state","add")&&!this.tuned&&this.abortAdd()},createControl:function(){if(!this.control){var t,e,i,n,o=this.getInstance(),s={};if(o)s=o.params,n=$(".widget[id*="+s.intclassid+"]:visible").length>1,t=!s.is_default||s.default_removable||n,e=!s.is_default&&s.isWidgetWorkNormal,i=s.havePrefsFrom&&s.isWidgetWorkNormal;else{var r=this.getId();i="_afisha"!==r&&"_teaser"!==r&&"_geo"!==r,s.prefsUrl="/?edit=1#open="+this.params.id}this.control=$(BEMHTML.apply({block:"widget",elem:"control",content:[i?{elem:"control-icon",href:s.prefsUrl,icon:"widget-prefs",cls:"widget__prefs",attrs:{title:home.l10n("widgetcontrol.setup")}}:"",e?{elem:"control-icon",icon:"widget-share",cls:"widget__share",attrs:{title:home.l10n("widgetcontrol.share")}}:"",{elem:"control-icon",icon:"widget-rm",cls:"widget__remove"+(t?"":" widget__remove-shy"),attrs:{title:home.l10n("widgetcontrol.delete")}}]})),this.domElem.append(this.control)}},createDrag:function(){return this.elem("drag").length||(this.domElem.append('<div class="widget__drag"></div>'),this.dropElemCache("drag")),this.elem("drag")},getInstance:function(){return this.instance||(this.instance=Widget.Framework.getByWrapperId(this.domElem.attr("id"))),this.instance},getId:function(){return this.params.id||this.getInstance().id},markChanged:function(t,e){var i=this.getInstance();i&&i.markChanged(t,e),e&&(this.tuned=!0,this.channel("widget").trigger("tuned",{type:"tuned",elem:this}))},remove:function(){this.hasMod("drag","on")?this.setMod("removed","yes"):this.setMod("state","remove")},share:function(){this.__self.queryShare(this)},showPrefs:function(){return this.hasMod("mode","plain")?void 0:(this.__self.queryPrefs(this),!1)},accept:function(){this.channel("widget").trigger("commit",{type:"add",id:this.getId()}),this.delMod("state")},getSaveButtons:function(){var t=this.elem("buttons");return t.length||(this.dropElemCache("buttons"),t=$(BEMHTML.apply({block:"widget",elem:"buttons",content:[{cls:"buttons-line buttons-line_borders_horizontal",content:[{block:"button",mods:{size:"m"},cls:"widget__reject",content:home.l10n("widgetbaloon.cancel")},{block:"button",mods:{theme:"action",size:"m"},cls:"widget__accept",content:home.l10n("widgetbaloon.keep")}]},this.hasMod("yandex")?"":{elem:"warn",content:home.l10n("securityMessages.noYandexWidgetAddedA")}]}))),t},abortAdd:function(){var t=this.getInstance();t&&(t.params.removed=!0),this.channel("widget").trigger("abort-add",{elem:this}),this.destruct()},listenToXiva:function(){var t=this.getInstance();this.params.xivas&&t&&t.params.rebind&&this.params.xivas.forEach(function(t){BEM.blocks["i-xiva"].listen(t.ch,t.ts,this.changeThis(function(){this.reloading||(this.reloading=!0,this.getInstance().iReload(this.changeThis(function(){this.reloading=!1})))}))},this)},reload:function(){this.getInstance().reload()}},{live:function(){return this.liveInitOnEvent("mouseover",function(){this.createControl(),this.afterCurrentEvent(function(){this.setMod("hovered","yes")})}),this.liveBindTo("force-remove","click",function(){this.setMod("removed","yes")}),this.liveBindTo("accept","click",function(){this.accept()}),this.liveBindTo("reject","click",function(){this.abortAdd()}),this.liveBindTo("remove","click",function(){this.remove()}),this.liveBindTo("share","click",function(){this.share()}),this.liveBindTo("prefs","click",function(){this.showPrefs()}),!1},queryPrefs:function(t){var e=this.getPrefsPopup();e.show(t,function(){this.reload()})},queryShare:function(t){var e=t.getInstance();e&&this.getSharePopup().show(e)},getRmPopup:function(){return this.rmPopup||(this.rmPopup=$(".b-wdgt-remove").bem("b-wdgt-remove")),this.rmPopup},getSharePopup:function(){return this.sharePopup||(this.sharePopup=$(".b-wdgt-share").bem("b-wdgt-share")),this.sharePopup},getPrefsPopup:function(){return this.prefsPopup||(this.prefsPopup=$(".b-wdgt-preferences").bem("b-wdgt-preferences")),this.prefsPopup}}),BEM.DOM.decl({name:"widget",modName:"name",modVal:"stocks"},{reload:function(){"_stocks-1"===this.params.id?this.reloadTopNews():this.__base.apply(this)},reloadTopNews:function(){var t=$("#wd-wrapper-_topnews-1").bem("widget");t.getInstance().reload(!1,!1,!0)}}),BEM.DOM.decl("inline-hockey",{onSetMod:{js:function(){this.fixPrevOnNewsUpdate(),this.__self._popup=this._popup=this.findBlockInside("popup","popup"),this.bindTo("more","click",this.showPopup),this.params.reloadTime&&this.setUpdateInterval()}},destruct:function(){clearInterval(this._reloadInterval),this.unbindFrom("more","click"),this.__base.apply(this,arguments)},showPopup:function(){this._popup.show(this._$popupOwner),home.stat.logDOMShow(this._popup.domElem)},togglePopup:function(){this._popup.hasMod("visibility","visible")?this._popup.hide():this.showPopup()},setUpdateInterval:function(){var t=6e4;setTimeout(function(){this._reloadInterval=setInterval(this.updateState.bind(this),t),this.updateState()}.bind(this),1e3*this.params.reloadTime)},updateState:function(){var t=this.params.jsonURL;$.ajax({url:t}).then(this._renderBlock.bind(this))},_renderBlock:function(t){var e,i=t.events,n=[];i&&i.length&&(e=this.elem("inline-event").data("eventId"),this.$events=this._popup.domElem.find(".inline-hockey__match"),this.$events.length&&this.$events.each(function(t,e){var i=$(e).data("eventId");n.push(i)}),i.forEach(function(t){t.id===e&&this._renderInlineEvent(t),n.indexOf(t.id)>-1&&this._renderPopupEvent(t)},this),i.filter(function(t){return"finished"===t.m_status}).length===i.length&&clearInterval(this._reloadInterval))},_renderInlineEvent:function(t){var e,i=home.view("inline-hockey__score-array",t),n=home.view("inline-hockey__status-text",t),o=t.has_stream?home.view("inline-hockey__stream-link",{}):"";e=i?i.map(function(t){return home.view("inline-hockey__inline-score__item",{score:t})}).join(":"):"",this.elem("inline-score").html(e),this.elem("inline-status").html(n),this.hasMod("stream")&&this.elem("stream").html(o)},_renderPopupEvent:function(t){var e,i=home.view("inline-hockey__score-array",t),n=home.view("inline-hockey__status-text",t);e=this.$events.filter('[data-event-id="'+t.id+'"]'),i?e.find(".inline-hockey__score").each(function(t,e){$(e).html(i[t])}):e.find(".inline-hockey__score").html(""),e.find(".inline-hockey__status").html(n)},fixPrevOnNewsUpdate:function(){this._$popupOwner=this.domElem,this.__self._popup&&(this.__self._popup._owner=this._$popupOwner)}},{live:function(){return this.liveBindKey("more","enter space",function(){this.togglePopup()}),!1}}),BEM.DOM.decl({block:"teaser",modName:"install",modVal:"inline"},{_install:function(){var t=this.params,e=t.counters||{};return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:t.api}},$.extend(t,{callbacks:{yes:function(){e.install&&((new Image).src=e.install)},no:function(){e.cancel&&((new Image).src=e.cancel)}}}))),this._inlineInstall.request().fail(function(){window.location=t.url}),e.click&&((new Image).src=e.click),!1}},{live:function(){return this.liveBindTo("link","click",function(){return this._install()}),!0}}),BEM.decl({block:"i-inline-install",modName:"api",modVal:"opera"},{_checkApi:function(){return!!window.opr&&window.opr.addons&&window.opr.addons.installExtension},_requestApi:function(t,e,i){window.opr.addons.installExtension(t,e,i)}}),BEM.DOM.decl({block:"teaser",modName:"install",modVal:"download"},{_install:function(){return this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),!1}},{live:function(){return this.liveBindTo("link","click",function(){return this._install()}),!0}}),BEM.decl("i-install-download",{init:function(){var t=home.view("popup",{mods:{type:"download",position:"fixed","has-close":"yes"},mix:"i-install-download__popup i-bem",attrs:{"bem-js":home.getBEMParams({popup:{}})},content:home.view("i-install-download__content",this.params)});this._popup=BEM.DOM.append(BEM.DOM.scope,t).bem("popup"),this._popup.on("show",function(){$("body").addClass("b-page_overflow_hidden")}),this._popup.on("hide",function(){$("body").removeClass("b-page_overflow_hidden")}),this.inited=!0},download:function(){return this.inited||this.init(),this._download(),setTimeout(function(){this._popup.show({top:0})}.bind(this),500),this},_countDownload:function(){this.params.counters.click&&((new Image).src=this.params.counters.click)},_download:function(){var t=document.createElement("iframe");$(t).addClass("i-install-download__frame-hidden").attr("aria-hidden",!0).attr("name","install").attr("src",this.params.url).appendTo(BEM.DOM.scope),this._countDownload()}}),BEM.DOM.decl({block:"teaser",modName:"install",modVal:"zombie"},{_install:function(){var t=this.params,e=t.counters||{};return BEM.blocks["custom-protocol-detect"].protocolCheck(this.params.urlYabro,this._onProtocolDetectSuccess.bind(this),this._onProtocolDetectFail.bind(this)),e.click&&((new Image).src=e.click),!1},_onProtocolDetectSuccess:function(){this.trigger("request")},_onProtocolDetectFail:function(){window.location.href=this.elem("link").attr("href")}}),CoversAPI.prototype._init=function(){var t=this;this.params=home.getData("coversAPI.data"),(this.params.forced||this.params.settings.autoload)&&$(function(){t.load({autostart:!0}),t.sendStats("forced.show")}),$(".covers-logo").click(function(){0===t.currentStatus?(t.load({autostart:!0}),t.sendStats("logo.show")):4===t.currentStatus&&(t.stop({fromEvent:!0}),t.sendStats("logo.hide"))});var e=this.getSearchForm(),i=!1;e.on("submit",function(){t.getSearchInput().bem("input").val()!==t.params.text||i||(i=!0,e.append('<input type="hidden" name="aoff" value="1"><input type="hidden" name="promo" value="supercover">'))})},CoversAPI.prototype.getSearchInput=function(){return $(".search2 .suggest2-form__input")},CoversAPI.prototype.getSearchForm=function(){return $(".search2")},CoversAPI.prototype._changeInputVal=function(t){this.getSearchInput().bem("input").val(t,{suggest:!1})},CoversAPI.prototype.submitForm=function(t){t||(t=this.params.text),this._changeInputVal(t),setTimeout(function(){this.getSearchForm().bem("suggest2-form").submit({prevent:!1})}.bind(this),200)},CoversAPI.prototype._setParams=function(t){this.params=t},CoversAPI.prototype._set=function(t){this.current&&this.stop(),home.covers[t.name]&&(this.current=t.name,this.currentStatus=0)},CoversAPI.prototype._getShare=function(t){var e=this;t&&!e.shareInstance&&($("body").append('<div id="covers-share"></div>'),$.getScript("//yastatic.net/share2/share.js").done(function(){e.shareInstance=new Ya.share2("covers-share",t)}))},CoversAPI.prototype.load=function(t){if(this.current&&0===this.currentStatus){if(!this.area&&!this.close){this.area=$('<div class="covers-parent"></div>');var e=!1;this.params.settings&&"white"===this.params.settings.close&&(e=!0),this.close=$('<a title="'+this.params.closeTitle+'" class="covers-close '+(e?"covers-close_white":"")+'"></a>'),$("body").append(this.area,this.close),this.close.on("click",$.proxy(function(){this.stop(),this.sendStats("close.hide")},this))}this._getShare(this.params.shareParams),$("body").addClass("covers-fade"),this.params.parent=this.area,this.currentStatus=1;var i=this;home.covers[this.current].load(this.params,function(e){i._loadHandler(e,t)})}},CoversAPI.prototype._loadHandler=function(t,e){t.status>0?(this.currentStatus=2,e.autostart&&this.start(e)):this.currentStatus=0},CoversAPI.prototype.start=function(t){if(2===this.currentStatus){this.currentStatus=3;var e=this;this.params.settings.noHide||($(".i-ua_browser_touch").length?$(".rows").css({overflowX:"hidden"}):$("body").addClass("covers-overflow"),$("body").addClass("covers-fade-on"),$(".covers-search").addClass("i-hidden")),this.params.settings.noSearchPhrase||this._changeInputVal(this.params.text),home.covers[e.current].start(e.params,function(i){e._startHandler(i,t)})}},CoversAPI.prototype._startHandler=function(t){t.status>0?this.currentStatus=4:this.currentStatus=0},CoversAPI.prototype.stop=function(t){if(4===this.currentStatus){this.currentStatus=5;var e=this;home.covers[this.current].stop(this.params,function(i){e.stopHandler(i,t)})}},CoversAPI.prototype.stopHandler=function(){this.area.remove(),this.close.remove(),this.area=null,this.close=null,$(".i-ua_browser_touch").length?$(".rows").css({overflowX:"visible"}):$("body").removeClass("covers-overflow"),$(".covers-search").removeClass("i-hidden"),$("body").removeClass("covers-fade covers-white_close covers-fade-on"),this.currentStatus=0},CoversAPI.prototype.sendStats=function(t){this.params.stat&&csh_ifgsid(this.params.stat+"."+t)},home.coversAPI=new CoversAPI,home.covers={},BEM.decl("videoplayer",{init:function(){return this.scope=BEM.DOM.scope,this.win=BEM.DOM.win,this.lastProgress=null,this.isTouch=$(".i-ua_browser_touch").length,this.$html=$(BEMHTML.apply({cls:"videoplayer__wrapper",content:{tag:"iframe",cls:"videoplayer__video",attrs:$.extend({name:"videoplayer"+(Math.random()+"").substr(3,7)},this.params)}})),this},show:function(){return this.scope.append(this.$html),this.isTouch&&(this.$html.get(0).scrollIntoView?this.$html.get(0).scrollIntoView():this.win.scrollTop(0)),$("html").addClass("videoplayer_active_yes"),this.scope.on("click",".videoplayer__wrapper",function(){home.stat.logPath("click","videoplayer.paranja"),this.hide()}.bind(this)),this.win.on("keydown",this.changeThis(this._escHandler)),this._addCheckEndHandler(),home.stat.logPath("show","videoplayer.paranja"),home.stat.logPath("click","videoplayer.actions.show"),this},hide:function(){return this.$html.detach(),$("html").removeClass("videoplayer_active_yes"),this.scope.off("click",".videoplayer__wrapper"),this.win.off("keydown",this.changeThis(this._escHandler)),this.lastProgress=null,this._removeCheckEndHandler(),home.stat.logPath("click","videoplayer.actions.hide"),this},_addCheckEndHandler:function(){window.addEventListener&&window.addEventListener("message",this.changeThis(this._checkEndHandler))},_removeCheckEndHandler:function(){window.removeEventListener&&window.removeEventListener("message",this.changeThis(this._checkEndHandler))},_checkEndHandler:function(t){var e=t.data;if(e&&"status"===e.action){if(0===e.progress&&this.lastProgress>95)return home.stat.logPath("click","videoplayer.events.end"),void this.hide();this.lastProgress=e.progress}},_escHandler:function(t){var e=t.keyCode||t.which;27===e&&(home.stat.logPath("click","videoplayer.events.esc"),this.hide())}}),BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,i,n){if("disabled"===n)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","pointerclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),function(t,e){function i(t){return t.replace(/^(?:https?:)?\/\//,"")}t||(t=window.Lego={}),!t.params&&(t.params={}),t.c=function(t,e,n){n=n||{};var o=i(n.host||BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru"),s=function(t,e,i,n){return e=e.replace("'","%27"),e.indexOf("/dtype=")>-1?e:location.protocol+"//"+o+"/"+i+"/dtype="+t+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+(n?"/*"+(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e)):"/*data="+encodeURIComponent("url="+encodeURIComponent(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e))))},r=function(){var i=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],o=document.createElement("script");o.setAttribute("src",s(t,n.useLinkHref&&Object(e).href?e.href:location.href,"jclck")),i.insertBefore(o,i.firstChild)};if(e)if(e.className.match(/b-link_pseudo_yes/)||e.href&&e.href.match(/^mailto:/)||n.noRedirect===!0)r();else if(e.href){var a=e.href;e.href=s(t,a,"redir"),setTimeout(function(){e.href=a},500)}else if(e.form)if(e.type.match(/submit|button|image/)){var a=e.form.action;e.form.action=s(t,a,"redir",!0),setTimeout(function(){e.form.action=a},500)}else r();else{if(!e.action)throw"counter.js: not link and not form!";e.action=s(t,e.action,"redir",!0)}else r()},t.cp=function(i,n,o,s,r,a){"string"==typeof s||(a=r,r=s,s=e),t.c("stred/pid="+i+"/cid="+n+(o?"/path="+o+(s?"/vars="+s:""):""),r,a)},t.ch=function(e,i,n){BEM.blocks["i-global"].param("show-counters")&&t.cp(0,2219,e,i,n)}}(window.Lego),function(t){t.cred=function(t,e,i){var n,o=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],i=document.createElement("script");i.setAttribute("src",t),e.insertBefore(i,e.firstChild)};if(e)if("A"===e.tagname&&!e.href||e.href&&e.href.match(/^mailto:/)||i&&i.noRedirect===!0)o();else if(e.href)n=e.href,e.href=t,setTimeout(function(){e.href=n},500);else if(e.form)e.type.match(/submit|button|image/)?(n=e.form.action,e.form.action=t,setTimeout(function(){e.form.action=n},500)):o();else{if(!e.action)throw"counter.js: not link and not form!";e.action=t}else o()}}(window.Lego),window.csh_ifgsid=csh_ifmsid,BEM.DOM.decl("home-tabs",{onSetMod:{js:function(){var t=this;this._searchInput=this.findBlockOutside($(".suggest2-form__input"),"input"),this._popup=this.findBlockInside("popup"),this._$elems=this.elem("search"),this._searchInput.on("change",$.debounce(function(){t._updateUrls(this.val())},300)),this._popup&&this._popup.on("show",function(){home.stat.logDOMShow(t._popup.domElem),this.afterCurrentEvent(function(){t._popup.findBlockInside("columns")})})}},_updateUrls:function(t){var e=this.params[t?"search":"href"],i=encodeURIComponent(t);this._$elems.each(function(t,n){$(n).attr("href",x.stringf(e[$(n).data("id")],i))})}}),BEM.DOM.decl("columns",{onSetMod:{js:function(){var t=this.params,e=this;this.__self.hasCSSColumnSupport()||(this.hasMod("count")?this._count=this.getMod("count"):(this._count=t.count,this.setMod("count",this._count)),this._popup=this.findBlockOutside("popup"),this._items=null,this._visibleItems=null,this._visibleItemsLen=null,this._cols=null,this._colLen=null,this._balancer=$.debounce(function(){e._updateItems()},100),this._items||(this._items=this.domElem.children()),this._getItems(),this._pushItems(),this._bindBalancer(),this._popup.on("show",this._bindBalancer),this._popup.on("hide",this._unbindBalancer))}},_getItems:function(){this._visibleItems=this._items.children(":visible").parent(),this._colLen=Math.ceil(this._visibleItems.length/this._count)},_hasChanges:function(){return this._visibleItemsLen===this._visibleItems.length?!1:(x.log("update"),this._visibleItemsLen=this._visibleItems.length,!0)},_pushItems:function(){this._cols=[];for(var t=0;t<this._count;t++)this._cols[t]=this._visibleItems.slice(t*this._colLen,(t+1)*this._colLen),this._cols[t].wrapAll('<div class="columns__col"/>');setTimeout(function(){this._popup.repaint()}.bind(this),200)},_updateItems:function(){this._getItems(),this._hasChanges()&&(this._cols.forEach(function(t){$(t).unwrap()}),this._pushItems())},_bindBalancer:function(){$(window).bind("resize",this._balancer)},_unbindBalancer:function(){$(window).unbind("resize",this._balancer)}},{hasCSSColumnSupport:function(){var t=$("<div/>")[0],e=["columnCount","MozColumnCount","WebkitColumnCount"].some(function(e){return e in t.style});return e},live:function(){return!0}}),function(){"use strict";var t=function(){$("[data-statlog-autoshow]").each(function(){var t=$(this),e=t.data("statlog");t.is(":visible")&&home.stat.logPath("show",e)})},e=function(e){e.enabled&&(t(),$(window).on("resize",$.debounce(t,150)))};$(function(){var t=home.getData("statlog.config",{});e(t)});var i=home.stat._setConfig;home.stat._setConfig=function(t){i(t),e(t)}}(),BEM.DOM.decl("search2",{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside("input"),this.input&&this.input.setMod("no-sample-focus","true"),this.input&&this.input.on("sample-click",function(){var e=t.domElem.find("input[name='nl']");t.params.nl&&!e.length&&$('<input type="hidden" name="nl" value="1"/>').insertAfter(t.input.domElem);var i=t.domElem.find("input[name='example_source']");t.params.serpArg&&!i.length&&$('<input type="hidden" name="example_source" value="'+t.params.serpArg+'"/>').insertAfter(t.input.domElem);var n=$("body").hasClass("edit-mode")||$("body").hasClass("b-page_skins-calatog");n||setTimeout(function(){t.domElem.submit()},500)})}}}),function(){var t=/^[a-z-]$/i,e=/^[0-9]$/,i=function(i){var n,o,s=i.charCode||i.keyCode||i.which||0,r=i.ctrlKey||i.altKey||i.metaKey;return i.originalEvent&&i.originalEvent.key?(o=t.test(i.originalEvent.key),n=e.test(i.originalEvent.key)):(o=[s>=65&&90>=s,s>=1025&&1071>=s,0===s,231===s,186===s,188===s,190===s,String.fromCharCode(s).toLowerCase()!==String.fromCharCode(s).toUpperCase()].some(Boolean),n=s>=48&&57>=s||s>=96&&105>=s),!r&&(n||o)};BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"capture"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)},autofocus:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},"":function(){this.unbindFromDoc("keydown")}},listen:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},no:function(){this.unbindFromDoc("keydown")}}},_autoFocusBind:function(t){var e;if(!($(".popup_visibility_visible").filter(":not(.b-topbar__popup, .suggest2)").length||(e=$(".v_sform_bg"),e.length&&"none"!==e.css("display")||$(".left-banner-opened").length))){var n,o;try{n=document.activeElement.tagName.toLowerCase(),o=document.activeElement.getAttribute("contenteditable")}catch(s){}if(i(t)&&"input"!==n&&"textarea"!==n&&!o){var r=this.elem("control")[0],a=this.val();if(a.length>0&&" "!==a.slice(-1)&&(a+=" ",this.val(a)),r.createTextRange){var c=r.createTextRange();c.collapse(!1),c.select()}else r.selectionStart&&(r.focus(),r.setSelectionRange(a.length,a.length));this.setMod("focused","yes")}}}})}(),BEM.DOM.decl({name:"input",modName:"ahead",modVal:"yes"},{onSetMod:{js:function(){var t=$.browser&&$.browser.opera&&$.browser.version<12.1?"keypress":"keydown";this.__base(),this._leftPadding=parseInt(this.elem("input").css("border-left-width"),10),this._buildAhead(),this._intent=!1,this._preventAhead=!1,this._lastBackspace=0,this.on("change",this._onTextChange).bindTo("click",this._onClickOver).bindTo(t,this._onKeyDown)}},_onClickOver:function(t){var e=this;if(!this._preventAhead&&this.elem("input").is(t.target)){var i=t.pageX-this.domElem.offset().left-this._leftPadding,n=this.elem("ahead-filler").width(),o=this.elem("ahead-hintholder").width();i>n&&o>i&&(this.trigger("ahead-click"),setTimeout(function(){e._fill({usage:"mouse"})},0))}},_onKeyDown:function(t){switch(this.__base.apply(this,arguments),new Date-this._lastBackspace>this.params.backspaceDelay&&(this._preventAhead=!1),t.which){case 8:if(!this.params.hideOnBackspace)break;this._preventAhead=!0,this._lastBackspace=new Date,this._intent=this._clearAhead();break;case 9:this.hasMod("focused","yes")&&this._intent&&!t.ctrlKey&&!t.altKey&&(t.preventDefault(),this._fill({usage:"tab"}));break;case 39:this.val().length===this.getSelectionEnd()&&this._fill({usage:"arrow"})&&t.preventDefault()}},setAhead:function(t){var e;return this._preventAhead?!1:(e=this.val(),0!==t.indexOf(e)?this._clearAhead():void(this._intent=this._setAhead(e,t.slice(e.length))))},unsetAhead:function(){this._clearAhead(),this._intent=!1},_onTextChange:function(){var t=this.val().length;this.shiftAhead(t),this._intent&&0!==this._intent.indexOf(this.val())&&this._clearAhead()},_fill:function(t){var e=this.val(),i=$.extend(t,{chars:this._intent.length-e.length});if("string"==typeof this._intent&&i.chars>0&&0===this._intent.indexOf(e)){try{var n=document.createEvent("TextEvent");n.initTextEvent("textInput",!0,!0,null,this._intent.slice(this.val().length),9),this._input.selectionEnd=this._input.selectionStart=this._intent.length,this._input.dispatchEvent(n)}catch(o){var s=this.elem("control").get(0);if(this.val(this._intent),s.createTextRange){var r=s.createTextRange();r.moveEnd("character",this._intent.length),r.collapse(!1),r.select()}else try{s.selectionEnd=s.selectionStart=this._intent.length}catch(a){}}this.trigger("ahead-fill",i)}return i.chars>0},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},getDefaultParams:function(){return $.extend(this.__base(),{backspaceDelay:100,hideOnBackspace:!0})},_buildAhead:function(){this._ahead=$(home.view("input__ahead")),BEM.DOM.before(this.elem("control"),this._ahead)},_setAhead:function(t,e){var i=this.elem("ahead-filler");return this._preventAhead?(t="",e=""):(t=t||"",e=e||""),i.text(t),this.elem("ahead-hintholder").text(t+e),this.elem("ahead-hint").val(t+e),this.elem("ahead").css("clip","rect(auto auto auto "+(i.width()+this._leftPadding)+"px)"),t+e},_clearAhead:function(){return this._setAhead("",""),!1},shiftAhead:function(t){if(this._intent){var e=this._intent.slice(0,t),i=this._intent.slice(t);this._setAhead(e,i)}}}),BEM.DOM.decl({block:"input",modName:"keyboard",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),$(window).bind("keyboardOpened.lego",this.changeThis(function(){this.setMod("focused","yes")._focused=!0}))}},onElemSetMod:{clear:{visibility:function(t,e,i){this.__base.apply(this,arguments),this.hasMod("clear","yes")&&this.toggleMod("keyboard-visibility","hidden","visible"===i)}}}}),BEM.DOM.decl("keyboard-loader",{onSetMod:{js:function(){var t=this;Lego.block["keyboard-loader"].call(this.domElem,this.params),$(window).on("keyboardOpened.lego",function(){home.stat.logPath("click",t.params.statOpen),t.getVkbd().removeAttr("disabled")}).on("keyboardClosed.lego",function(e){"lego"===e.namespace&&home.stat.logPath("click",t.params.statClose),t.getVkbd().attr("disabled","disabled")})}},getVkbd:function(){return this._vkbd?this._vkbd:this._vkbd=$('<input type="hidden" name="vkbd" value="1"/>').appendTo(this.domElem)}}),function(t,e){e.block["keyboard-loader"]=function(i){function n(i){t("body").removeClass("b-page_keyboard");var n=i?"addClass":"toggleClass",o=a.find(".b-keyboard-popup");if(o.length){if(a.find(".b-keyboard-popup__gap")[n]("i-hidden"),a.find(".b-keyboard-popup")[n]("i-hidden").hasClass("i-hidden")){c.trigger("keyboardClosed"),t(document).trigger("popupsClose.lego");var s=e.block["b-keyboard"]._lastFocusedIn;void 0!==s&&s.focus()}else c.trigger("keyboardOpened.lego");o.data("isHidden",!1)}}function o(t){return s()[t]}function s(){var e={};return t.each(window.name.split("&"),function(){if(this.toString()){var t=this.split("=");e[t[0]]=t[1]}}),e}function r(e,i){
var n=s(),o=[];n[e]=i,t.each(n,function(t,e){o.push(t+"="+e)}),window.name=o.join("&")}var a=t(document.body),c=t(window),u=this,l=t(".b-topbar__popup.popup_behavior_snap"),h=l.length?l.bem("popup"):null;u.click(function(o){o.preventDefault(),h&&h._unbindFromResize();var s=(this.className.match(/keyboard-loader_lang_(\w+)/)||["",""])[1];if(a.find(".b-keyboard")[0])n(),h&&h._bindToResize();else{var r=BEM.blocks["i-global"].param("keyboard-path"),u=[r+"b-keyboard/_keyboard.js"],l=t.browser&&t.browser.msie&&(!document.documentMode||document.documentMode<9)?".ie":"",d=[r+"b-keyboard/_keyboard"+l+".css"];t.xLazyLoader({name:"b-keyboard",js:u,css:d,success:function(){e.block["b-keyboard-popup"]({lang:s,"for":i["for"]}),a.append('<div class="b-keyboard i-bem" data-bem=\'{&quot;b-keyboard&quot;: { &quot;lang&quot;:&quot;'+s+"&quot;}}'></div>"),BEM.DOM.init(t(".b-keyboard")),c.trigger("keyboardOpened.lego",{afterLoad:!0}),t(".b-keyboard").on("click",".b-keyboard__key",function(){var e,i=t("*:focus").offset();i&&(e=i.top,t(".b-keyboard-popup").offset().top<e+30&&window.scrollTo(0,e-20))})}})}}),c.bind("keyboardOpen.lego",function(){u.click()}).bind("keyboardClose.lego",n),i["for"]&&c.bind("keyboardOpened.lego",function(e,n){!(n&&n.afterLoad&&i.autoLoad)&&t(i["for"]).focus()}),c.bind("keyboardLangChanged.lego keyboardSetLang.lego",function(t,e){var i=u.find(".keyboard-loader__flag");i[0]&&("tt"===e&&(e="ru"),i.attr("src",i.attr("src").replace(/[a-z]+\.png$/,e+".png")))}),i.storeState=i.storeState!==!1,i.storeState&&c.bind("keyboardOpened.lego",function(){r("keyboard_state","open");var e=o("keyboard_lang");e&&t(window).trigger("keyboardSetLang.lego",e)}).bind("keyboardClosed.lego",function(){t("body").removeClass("b-page_keyboard"),r("keyboard_state","close")}).bind("keyboardLangChanged.lego",function(t,e){r("keyboard_lang",e)});var d="#kb"===window.location.hash;(i.autoLoad||i.storeState&&"open"===o("keyboard_state")||d)&&u.click(),c.bind("keyboardOpened.lego",function(){t("input:focus").focus(),t("body").addClass("b-page_keyboard")})}}(jQuery,window.Lego),function(t){function e(){function e(t,e){l[t](e,function(t){"error"===t?d.push(e):h.push(e)&&r.each(e),o()},"lazy-loaded-"+(r.name?r.name:(new Date).getTime()))}function n(t){r.complete(t,h,d),r[t]("error"===t?d:h),clearTimeout(a),clearTimeout(c)}function o(){h.length===p.length?n("success"):h.length+d.length===p.length&&n("error")}function s(){d.push(this.src),o()}var r,a,c,u,l=this,h=[],d=[],p=[];this.init=function(i){if(i){if(r=t.extend({},t.xLazyLoader.defaults,i),u={js:r.js,css:r.css,img:r.img},t.each(u,function(t,e){"string"==typeof e&&(e=e.split(",")),p=p.concat(e)}),!p.length)return void n("error");r.timeout&&(a=setTimeout(function(){var e=h.concat(d);t.each(p,function(i,n){-1===t.inArray(n,e)&&d.push(n)}),n("error")},r.timeout)),t.each(u,function(i,n){t.isArray(n)?t.each(n,function(t,n){e(i,n)}):"string"==typeof n&&e(i,n)})}},this.js=function(e,n,o){var r=t('script[src*="'+e+'"]');if(r.length)return void(r.attr("pending")?r.bind("scriptload",n):n());var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("charset","utf-8"),a.setAttribute("src",e),a.setAttribute("pending",1),a.onerror=s,t(a).bind("scriptload",function(){t(this).removeAttr("pending"),n(),setTimeout(function(){t(a).unbind("scriptload")},10)});var c=!1;a.onload=a.onreadystatechange=function(){c||this.readyState&&!/loaded|complete/.test(this.readyState)||(c=!0,a.onload=a.onreadystatechange=null,t(a).trigger("scriptload"))},i.appendChild(a)},this.css=function(e,n,o){if(t('link[href*="'+e+'"]').length)return void n();var s=document.createElement("link");s.setAttribute("type","text/css"),s.setAttribute("rel","stylesheet"),s.setAttribute("href",e),t.browser&&t.browser.msie?s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&n()}:t.browser&&t.browser.opera?s.onload=n:!function(){s&&s.sheet?n():c=setTimeout(arguments.callee,20)}(),i.appendChild(s)},this.img=function(t,e){var i=new Image;i.onload=e,i.onerror=s,i.src=t},this.disable=function(e){t("#lazy-loaded-"+e,i).attr("disabled","disabled")},this.enable=function(e){t("#lazy-loaded-"+e,i).removeAttr("disabled")},this.destroy=function(e){t("#lazy-loaded-"+e,i).remove()}}t.xLazyLoader=function(t,i){"object"==typeof t&&(i=t,t="init"),(new e)[t](i)},t.xLazyLoader.defaults={js:[],css:[],img:[],name:null,timeout:2e4,success:function(){},error:function(){},complete:function(){},each:function(){}};var i=document.getElementsByTagName("head")[0]}(jQuery),BEM.DOM.decl({name:"input",modName:"voice-search",modVal:"yes"},{onSetMod:{js:function(){var t=this;this.__base.apply(this,arguments),this._hasRecognized=!1,this._checkAndCreateStreamer(function(){t._streamer?(t.hasMod(t.elem("clear"),"visibility","visible")||t.delMod(t.elem("voice-search"),"visibility"),home.stat.logPath("show","voice")):t.delMod("voice-search")})}},onElemSetMod:{clear:{visibility:function(t,e,i){this.__base.apply(this,arguments),this.toggleMod(this.elem("voice-search"),"visibility","hidden","","visible"===i)}}},stopRecognize:function(){this._startedRecognize&&(this._startedRecognize=!1,this.delMod(this.elem("voice-search"),"animated"),this._timerRecognize&&(clearTimeout(this._timerRecognize),this._timerRecognize=null),this.unbindFromDoc("pointerclick.recognize"),this.unbindFrom("control","input.recognize"),this._streamer.abort())},startRecognize:function(){var t=this;this._startedRecognize&&this.stopRecognize(),this._startedRecognize=!0,this.setMod(this.elem("voice-search"),"animated","yes"),this._streamer.start({lang:this.params.recognitionLocale,model:"queries",apikey:"5e7c4b34-f4ff-49c1-a683-44439c124cc8",dataCallback:function(e,i){if(e&&(t.val(e,{suggest:!1}),t._hasRecognized||(t._hasRecognized=!0,home.stat.logPath("click","voice.data"))),i){t.stopRecognize();var n=t.findBlockOutside("suggest2-form");n.domElem.append($("<input>",{type:"hidden",name:"query_source",value:"voice"})),n.submit()}},errorCallback:this.stopRecognize.bind(this),particialResults:!0,utteranceSilence:this.params.recognitionUtteranceSilence||60}),this._timerRecognize=setTimeout(function(){t.val()||t.val(t._textBeforeRecognize,{suggest:!1}),t._hasRecognized||t.stopRecognize()},this.__self.TIMEOUT_RECOGNIZE),this.bindTo("control","input.recognize",this.stopRecognize),this.bindToDoc("pointerclick.recognize",function(t){$(t.target).is(this.buildSelector("voice-search"))||this.val(this._textBeforeRecognize,{suggest:!1}),home.stat.logPath("click","voice.off"),this.stopRecognize()})},destruct:function(){return this.stopRecognize(),this.__base.apply(this,arguments)},_checkAndCreateStreamer:function(t){var e=this;if(!("Promise"in window))return t();var i;return!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(i=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(i=function(t){navigator.mediaDevices.enumerateDevices().then(t)}),navigator.enumerateDevices&&(i=navigator.enumerateDevices.bind(navigator)),i?void i(function(i){var n=!1;return i.forEach(function(t){"audio"!==t.kind&&"audioinput"!==t.kind||(n=!0)}),n?void $.ajax({url:e.params.webspeechkitUrl,dataType:"script",cache:!0,success:function(){try{e._streamer=new window.ya.speechkit.SpeechRecognition}catch(i){}t()},error:t}):t()}):t()},_updateClear:function(){this._startedRecognize||this.__base.apply(this,arguments)}},{TIMEOUT_RECOGNIZE:15e3,live:function(){this.__base.apply(this,arguments),this.liveBindTo("voice-search","pointerclick",function(){this._startedRecognize?(home.stat.logPath("click","voice.off"),this.stopRecognize(),this.val()||this.val(this._textBeforeRecognize,{suggest:!1})):(home.stat.logPath("click","voice.on"),this._textBeforeRecognize=this.val(),this.val("",{suggest:!1}),this.startRecognize())})}}),BEM.DOM.decl("suggest2",{onSetMod:{js:{inited:function(){this.params.form||this.findBlockOutside("suggest2-form"),this._lastSubmitTime=0,this._lastBlurTime=0,this._clear()}}},_bodyHandler:function(t){if(!this._isDestructing){var e=$(t.target),i=this.containsDomElem(e)||this.params.form.containsDomElem(e);i||(this._freezeInputFocus=!1)}},getDefaultParams:function(){return{submitBySelect:!1,updateOnEnterByKeyboard:!0,onFocus:"request",requestOnEmptyInput:!1,abortQueries:!1,sequentialQueriesTimeout:!1}},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},init:function(){var t=this;return t.params.form.on("submit",function(e,i){t._lastSubmitTime=(new Date).getTime(),t._isActualSearchCGIParams?t._isActualSearchCGIParams=!1:"suggest2-counter"!==i.data.block&&i.data.prevent!==!1&&this.removeHiddenInputs(),t._clear(),t._popup.hide()}),t._input=t.params["suggest2-input"],t._popup=t.params["suggest2-popup"],t._inputValue=t._input.val(),t._model=t.initModel(),t._view=t.initView(),t._counter=t.initCounter(),t._model.on({response:this.setItems,reject:function(e,i){2===i.code&&(t._popup.hide(),t._clear())}},t),t.bindToDoc("click tap leftclick",t._bodyHandler),t.bindEvents(),this._input.isFocused()&&this._doRequest(),t},initModel:function(){return BEM.create("suggest2-model",this.params)},getModel:function(){return this._model},initView:function(t,e){var i=this.getMod("type");return t=t||{},"simple"!==i&&"all"!==i||(t.simple="yes"),"advanced"!==i&&"all"!==i||(t.advanced="yes"),BEM.create({block:"suggest2-view",mods:t||{}},e||{})},getView:function(){return this._view},initCounter:function(){return this.params.counter?this.params.counter.initValues().bindEvents():void 0},getCounter:function(){return this._counter},setDataConverter:function(t){return this.getModel().getProvider().convert=t,this},setRequestData:function(t){return this.getModel().getProvider().getRequestData=t,this},setRequestUrl:function(t){return this.getModel().getProvider().getRequestUrl=t,this},setOwner:function(t){return this._popup.owner(t),this},bindEvents:function(){var t=this;return t._input.bindEvents({change:t._onChange,focus:t._onFocus,blur:t._onBlur},t),t._popup.on({preshow:function(){t.trigger("preshow")},show:function(){t._onShow()},hide:function(e,i){t._onHide(i)}}),t.params.form&&t.params.form.on("button-press",t._onSearchButtonMousedown,t),BEM.blocks["suggest2-item"].on(t.domElem,{"link-click":function(e,i){t._counter&&"_self"===$(i.$e.target).attr("target")&&i.$e.preventDefault()}}),t},_onShow:function(){this.trigger("show")},_onHide:function(t){this.trigger("hide",t)},_onSearchButtonMousedown:function(){this._input.realVal(this._input.val()),this._popup.hide()},unbindAllEvents:function(){var t=this;return t.unbindFromDoc("click tap leftclick"),t._input.unbindAllEvents(),t.params.form.un("submit"),t._model.un("response").un("reject"),t._popup.un("preshow").un("show").un("hide"),t.params.form&&t.params.form.un("button-press",t._onSearchButtonMousedown,t),t},setItems:function(t,e){var i=this,n=e.data.items||[];return i._isFormSubmitDurinQuery()||!n.length?(i._popup.hide(),i._clear()):this.params.sequentialQueriesTimeout||i._input.val()===e.val?(i._text=e.val,i._pos=e.pos,i._meta=e.data.meta||{},i._popup.show(i._view.html(n,i._meta)).width(i.getPopupWidth()),i._items=i.findBlocksInside("suggest2-item"),i._clearItems().trigger("update",{val:i._text,pos:i._pos,items:i._items}),i):i._clear()},getItems:function(){return this._items||[]},isBlur:function(){return this._isBlur&&!this._isMouseDown},getPopupWidth:function(){},getInputWidth:function(){return 0},isNeedSubmitFormOnSelectItem:function(t){return this.params.submitBySelect&&"link"!==t.getMod("interact")},_isFormSubmitDurinQuery:function(){return this._lastSubmitTime?(this._model.filterRequestsByVal(this._input.realVal()),this._model.isTimeInRequestInterval(this._lastSubmitTime)):!1},_onChange:function(t,e){this._inputValue!==this._input.val()&&(this._inputValue=this._input.val(),this._doRequest(e))},_doRequest:function(t){this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition(),t)},_onFocus:function(){!this._popup.isShown()&&this._isBlur&&this.params.onFocus&&this._isLastBlurTimeLater(50)&&(this.getItems().length&&this._input.val()===this._text?(this._clearItems(),this._popup.show()):this._isMouseDown||"request"!==this.params.onFocus||this._doRequest())},_onBlur:function(){this._isBlur?(this._clear(),this._popup.hide()):this._freezeInputFocus?(this._clear(),this._input.focus()):this._isMouseDown&&this._input.focus(),this._lastBlurTime=(new Date).getTime(),this._isBlur=!0},_getItemIndex:function(t){return this.getItems().indexOf(t)},_clear:function(){return this._isBlur=!0,this._freezeInputFocus=!1,this._clearItems()},_clearItems:function(){return this._isMouseDown=!1,this._enterItemIndex=-1,this._unselectItems()},_isLastBlurTimeLater:function(t){return(new Date).getTime()-this._lastBlurTime>t},_unselectItems:function(t){var e=t?[].slice.call(arguments):this.getItems();return e.forEach(function(t){t.onLeave()}),this},_onSelectItem:function(t,e){var i=this,n=i._getItemIndex(t),o=t.onSelect(e),s=t.valOnSelect();return i._text=i._input.realVal(s),i._isBlur=!0,i._freezeInputFocus=!1,i._setSearchCGIParams(t),i.trigger("select",{val:i._text,pos:i._pos,item:t,meta:i._meta,itemIndex:n,byKeyboard:e,callbackOnSelect:o}),s!==!1&&(i._items=[],this.isNeedSubmitFormOnSelectItem(t)&&i.params.form.submit()),n},_isActualSearchCGIParams:!1,_setSearchCGIParams:function(t){this.params.form.removeHiddenInputs(),t.params.searchCGI&&(this._isActualSearchCGIParams=!0,this.params.form.appendHiddenInputs(t.params.searchCGI.map(function(t){return{name:t[0],value:t[1]}})))},_onDownItem:function(){this._isBlur=!1,this._isMouseDown=!0}}),BEM.DOM.decl("suggest2",{getInputLeft:function(){return 0},getInputWidth:function(){return 0},getContainerWidth:function(){return 0},getMetrics:function(){var t=this.getInputLeft(),e=this.getInputWidth(),i=this.getContainerWidth()-t;return{marginLeft:t,minWidth:e>=i?i:e,maxWidth:i}},adjustView:function(){return{}}}),BEM.DOM.decl("suggest2",{bindEvents:function(){var t=this;return t._input.bindEvents({keydown:t._onKeyDown,keyup:t._onKeyUp,keypress:t._onKeyPress,mousedown:function(){t._input.isFocused()&&t._onFocus()}},t),BEM.blocks["suggest2-item"].on(t.domElem,{mouseover:function(e){t._onEnterItem(e.block,!1)},mouseout:function(e,i){var n=e.block.domElem[0];n===i.relatedTarget||$.contains(n,i.relatedTarget)||t._onLeaveItem(e.block,!1)},mousedown:function(){t._onDownItem()},leftclick:function(e){t._onSelectItem(e.block,!1)}}),t.__base.apply(t,arguments)},_onKeyDown:function(t){var e=this.__self.keyboard,i=t.which;!this._popup.isShown()||i!==e.up&&i!==e.down||(t.preventDefault(),this._enterByKeyboard(i))},_onKeyUp:function(t){var e=this.__self.keyboard;if(t.which!==e.left&&t.which!==e.right||(this.trigger("change-cursor-pos"),this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition())),t.which===e.right&&~this._enterItemIndex&&this._enterItemByKeyboard){var i=this._items[this._enterItemIndex];i&&this.trigger("ahead",{item:i,val:"link"===i.getMod("interact")?i.elem("text").text():i.val()})}},_onKeyPress:function(t){if(t.which===this.__self.keyboard.enter&&~this._enterItemIndex&&this._enterItemByKeyboard){var e=this._items[this._enterItemIndex];e&&(t.preventDefault(),this._onSelectItem(e,!0))}},_enterByKeyboard:function(t){var e=t-39,i=this._items.length,n=this._enterItemIndex+e;return-1===n||n===i?(this._enterItemIndex=n,this._unselectItems(this._items[n]),this.trigger("out",{val:this._text,byKeyboard:!0})):(0>n?n=i-1:n>=i&&(n=0),void this._onEnterItem(this._items[n],!0))},_onEnterItem:function(t,e){this._enterItemIndex=this._getItemIndex(t),this._enterItemByKeyboard=e,this._unselectItems(),t.onEnter(e)},_onLeaveItem:function(t,e){this._clearItems()._unselectItems(t)}},{keyboard:{enter:13,left:37,up:38,right:39,down:40},live:function(){this.liveBindTo("mousedown",function(){this._onDownItem()})}}),BEM.DOM.decl("suggest2",{_doRequest:function(){(this._ignoredFirstRequest||"request"===this.params.onFocus||this._input.val())&&this.__base.apply(this,arguments),this._ignoredFirstRequest=!0}}),BEM.decl("suggest2",{bindEvents:function(){function t(){e._popup&&e._popup.isShown()&&e._popup.hide()}var e=this;e.__base.apply(e,arguments),e._input.bindEvents({click:function(){home.mark&&home.mark.add("searchclick"),e._popup.isShown()||(e._tabChange=!1,e._doRequest())}}),BEM.blocks["suggest2-item"].on(e.domElem,{mousedown:function(){e.bindToDoc("mouseup.suggest2",function(){e._isBlur=!0,e._isMouseDown=!1,e.unbindFromDoc("mouseup.suggest2")})}}),$(window).bind("keyboardOpened.lego",function(){e._popup&&e._popup.isShown()&&e._popup.get()&&e._popup.get().repaint()});var i=!0;$(window).on("focus",function(){var n;try{n=document.activeElement}catch(o){}i||(i=!0,n&&e._input.getControl()&&e._input.getControl().is(n)&&(e._tabChange=!0),t())}).on("blur",function(){i=!1,t()})},init:function(){this.__base.apply(this,arguments),this.trigger("model-ready")},_onChange:function(){return this._tabChange=!1,this.__base.apply(this,arguments)},_onFocus:function(){this._tabChange||this.__base.apply(this,arguments)}}),BEM.decl("suggest2-model",{onSetMod:{js:{inited:function(){this._requests=[]}}},destruct:function(){this._provider&&this._provider.destruct(),this.__base.apply(this,arguments)},getProvider:function(){return this._provider?this._provider:(this._provider=this.setProvider(this.params),this._provider)},setProvider:function(t){return this._provider=BEM.create("suggest2-provider",t),this._provider},getCancelRequestConditions:function(){return[{block:"suggest2",show:!1},{block:"suggest2",event:"select"},{block:"suggest2-item",event:"select"},{block:"suggest2",event:"out"},{block:"suggest2-item",show:!1},{block:"suggest2-popup",event:"hide"},{suggest:!1},{source:"sample"}]},request:function(t,e,i){var n=this,o={val:t,caretPosition:e,data:i};n._requests.push(o);var s=n._isNeedRequest(t,i);return s.need?(o.requestTime=(new Date).getTime(),n.trigger("request",{val:t,pos:e}),n.getProvider().get(t,e,function(t,e,i){o.responseTime=(new Date).getTime(),n._onResponse(t,e,i);var s=n._requests[n._requests.length-1];n.params.sequentialQueriesTimeout&&s.val!==t&&n.request(s.val,s.caretPosition,s.data)}),n):n.trigger("reject",{val:t,pos:e,code:s.code,reason:s.reason||{}})},isTimeInRequestInterval:function(t){for(var e=this._requests.length-1;e>=0;e--)if(t>this._requests[e].requestTime&&t<this._requests[e].responseTime)return!0;return!1},filterRequestsByVal:function(t){this._requests=this._requests.filter(function(e){return e.val===t})},_isNeedRequest:function(t,e){if(""===t&&!this.params.requestOnEmptyInput)return{need:!1,code:2};var i;if(this.params.sequentialQueriesTimeout)for(i=this._requests.length-1;i>=0;i--){var n=this._requests[i];if(void 0===n.responseTime&&(new Date).getTime()-n.requestTime<this.params.sequentialQueriesTimeout)return{need:!1,code:3,reason:{request:n}}}if(!e)return{need:!0};var o,s=this.getCancelRequestConditions();t:for(i=0;i<s.length;i++){o=s[i];for(var r in o)if(o.hasOwnProperty(r)&&o[r]!==e[r])continue t;return{need:!1,code:1,reason:{condition:o}}}return{need:!0}},_onResponse:function(t,e,i){var n={val:t,pos:e,data:i||[]};BEM.channel("suggest2").trigger("response",n),this.trigger("response",n)}}),BEM.DOM.decl("suggest2-detect",{onSetMod:{js:{inited:function(){this.bindToDoc("keydown",function(t){this.__self._pressedKeyCode=t.which},this).bindToDoc("keyup",function(){this.__self._pressedKeyCode=null},this),this.__self.isSupportInlineSVG()||this.setMod("inlinesvg","no")}}}},{_pressedKeyCode:null,isPressedEscape:function(){return 27===this._pressedKeyCode},_isSupportInlineSVG:null,isSupportInlineSVG:function(){if(null!==this._isSupportInlineSVG)return this._isSupportInlineSVG;var t=document.createElement("div");return t.innerHTML="<svg/>",this._isSupportInlineSVG="http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI),this._isSupportInlineSVG}}),function(){"use strict";BEM.DOM.decl("suggest2-detect",{},{isSupportInlineSVG:function(){return void 0===this._isSupportInlineSVG2&&(this._isSupportInlineSVG2=$("html").hasClass("i-ua_inlinesvg_yes")),this._isSupportInlineSVG2}})}(),function(t){if(t.support.cors||!t.ajaxTransport||!window.XDomainRequest)return t;var e=/^(https?:)?\/\//i,i=/^get|post$/i,n=new RegExp("^(//|"+location.protocol+")","i");return t.ajaxTransport("* text html json",function(o,s,r){if(o.crossDomain&&o.async&&i.test(o.type)&&e.test(o.url)&&n.test(o.url)){var a=null;return{send:function(e,i){var n="",r=(s.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(s.timeout)&&(a.timeout=s.timeout),a.ontimeout=function(){i(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,n={code:200,message:"success"},o={text:a.responseText};try{if("html"===r||/text\/html/i.test(a.contentType))o.html=a.responseText;else if("json"===r||"text"!==r&&/\/json/i.test(a.contentType))try{o.json=t.parseJSON(a.responseText)}catch(s){n.code=500,n.message="parseerror"}}catch(c){throw c}finally{i(n.code,n.message,o,e)}},a.onprogress=function(){},a.onerror=function(){i(500,"error",{text:a.responseText})},s.data&&(n="string"===t.type(s.data)?s.data:t.param(s.data)),a.open(o.type,o.url),a.send(n)},abort:function(){a&&a.abort()}}}}),t}(jQuery),BEM.decl("suggest2-provider",{getDefaultParams:function(){return{cache:!1,type:"GET",dataType:"jsonp",timeout:2e3}},_lastQuery:null,get:function(t,e,i){var n=this,o=this.params.abortQueries,s=function(){i.call(n,t,e,n.convert(n._lastData))};return n._lastText===t?this._lastQuery.always(s):(n._lastText=t,o&&null!==this._lastQuery&&this._lastQuery.abort(),void(this._lastQuery=$.ajax(n._extendParamsData(n.getRequestData(t,e))).done(function(t){n._lastData=t,o&&s()}).fail(function(){n._lastData=[]}).always(function(){o||s()})))},convert:function(t){return{orig:t[0],items:t[1],meta:t[2]}},getRequestData:function(t,e){var i={};return BEM.blocks["suggest2-detect"].isSupportInlineSVG()&&(i.svg=1),$.extend({part:t,pos:e},i)},getRequestUrl:function(){return this.params.url},_extendParamsData:function(t){return this.params.url=this.getRequestUrl(),this.params.data=$.extend(this.params.data||{},t),this.params},_lastText:void 0,_lastData:[]}),BEM.decl("suggest2-provider",{get:function(t,e,i){var n=this,o=n.params&&n.params.paramName||"part",s={pos:e};s[o]=t;var r=this._extendParamsData(s);"q"===r.paramName&&(r.dataType="json",r.xhrFields={withCredentials:!0}),$.ajax(r).done(function(o){n.params&&n.params.email?i.call(this,t,e,{orig:t,items:n._processEmailst(o),meta:{}}):i.call(this,t,e,{orig:o[0],items:o[1],meta:o[2]})}).error(function(){i.call(this,t,e,{items:[]})})},_processEmailst:function(t){for(var e=[],i=0,n=t.length;n>i;++i)e.push(["email",t[i].email,t[i].name]);return e}}),BEM.decl("suggest2-view",{html:function(t,e){return BEMHTML.apply(this.build(t,e))},build:function(t,e){return{block:"suggest2",elem:"content",mods:{theme:"normal"},content:this.buildItems(t,e)}},buildItems:function(t,e){return t.reduce(function(t,e){return t.push(this.buildItem(e)),t}.bind(this),[])},buildItem:function(t){var e=this.__self._getPrefs(t),i=this.__self._getType(t,e),n="html"===i||"bemjson"===i?{}:{type:i};return this._getItemByType(t,e,i,{text:{elem:"text",content:this.__self._highlight(this.__self._getText(t,e),e)},mods:n,js:e.js||{},props:{},content:[]})},_getItemByType:function(t,e,i,n){var o=n.text,s=n.mods,r=n.js,a=n.props,c=n.content;return e.pers&&(s.personal="yes"),e.url&&(s.interact="link",a.url=this.__self._resolveUrl(e.url),e.target&&(a.target=e.target)),e.search_cgi&&(r.searchCGI=e.search_cgi),0===c.length&&c.push(o),$.extend({block:"suggest2-item",mods:s,js:r,content:c},a)}},{_getPrefs:function(t){if(!Array.isArray(t))return{};var e=t[t.length-1];return $.isPlainObject(e)?e:{}},_getType:function(t,e){var i=Array.isArray(t)?t[0]||"text":"text";return"icon"!==i||e.icon?i:"text"},_getText:function(t){return Array.isArray(t)?t[1]:t},_highlight:function(t,e){if(!e.hl)return t;var i,n=e.hl.sort(function(t,e){return t[0]-e[0]}).filter(function(t){return t[0]>=0}),o=[],s=0;return n.length?(n.forEach(function(e){i=s>e[0]?s:e[0],o.push(t.slice(s,i)),o.push({elem:"highlight",content:t.slice(i,s=e[1])})},this),o.push(t.slice(s)),o.filter(function(t){return!!t})):t},_resolveUrl:function(t){return(/[\/]{2}/.test(t)?"":"http://")+t}}),BEM.decl("suggest2-view",{},{_getGroupType:function(t,e){return t.pers?"nah":~["nav"].indexOf(e)?e:"text"},_getTextLabel:function(t){return BEM.I18N("suggest2",t)}}),BEM.decl("suggest2-view",{_getItemByType:function(t,e,i,n){var o,s;return"email"===i?(o=[],s=n.js,s.email=t[1],o.push({elem:"name",content:BEM.blocks["i-common__string"].escapeHTML(t[2]||t[1])}),t[2]&&o.push({elem:"email",content:BEM.blocks["i-common__string"].escapeHTML(t[1])}),$.extend({block:"suggest2-item",mods:n.mods,js:s,content:o},n.props)):this.__base.apply(this,arguments)}}),BEM.decl("suggest2-popup",{onSetMod:{js:{inited:function(){this._popup=this.params.popup,this._popupContent=this.params.popupContentElem&&this._popup.findElem(this.params.popupContentElem),this.bindSuggestEvents()}}},show:function(t){return this._popup.domElem?(t&&this.setContent(t),this.isShown()?this:(this.trigger("preshow"),this._setPosition(),this.trigger("show"),this)):this},_setPosition:function(){throw new Error("       _for")},hide:function(t){throw new Error("       _for")},setContent:function(t){return this._popupContent?BEM.DOM.update(this._popupContent,t):this._popup.setContent(t),this},isShown:function(){throw new Error("       _for")},owner:function(t){return t?(this.params.owner=t,this):this.params.owner},get:function(){return this._popup},width:function(t){return void 0===t?this._popup.domElem.outerWidth():(this._popup.domElem.outerWidth(t),this)},destruct:function(){this._popup&&(this.unbindAllEvents(),this.__base.apply(this,arguments))},bindSuggestEvents:function(){return this.params.suggest.on({select:this._onSuggestSelect,update:this._onSuggestUpdate},this),this},_onSuggestSelect:function(t,e){this.hide(e)},_onSuggestUpdate:function(t,e){e.items.length||this.hide({response:"empty"})},unbindAllEvents:function(){return this.params.suggest.un("select").un("update"),this}}),BEM.decl("suggest2-popup",{pos:function(){return this.isShown()&&this._popup.repaint(),this}}),BEM.decl({block:"suggest2-popup",modName:"for",modVal:"popup"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._popup.on("hide",function(){BEM.blocks["suggest2-detect"].isPressedEscape()&&this.trigger("hide",{})},this)}}},_setPosition:function(){this._popup.show(this.params.owner)},hide:function(t){return this.isShown()&&(this._popup.hide(),this.trigger("hide",t||{})),this},isShown:function(){return this._popup?this._popup.isShown():!1}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t._input=t.params.input,t.disableBrowserAutocomplete(),t.realVal(t.val()),t.bindEvents({change:function(e,i){t._onChange(e,i)},clear:$.throttle(function(e,i){t._onClear(e,i)},300)}),t.bindSuggestEvents()}}},_onChange:function(t,e){this.trigger("change",e)},_onClear:function(t,e){this.trigger("clear",e)},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},get:function(){return this._input},isFocused:function(){return this._input.hasMod("focused")},focus:function(){return this._input.setMod("focused","yes"),this},blur:function(){return this._input.delMod("focused"),this},getControl:function(){return this._input.elem("control")},val:function(t,e){return this._input.val.apply(this._input,arguments)},valWithoutSuggest:function(t,e){return this._input.val.call(this._input,t,$.extend(e,{suggest:!1}))},realVal:function(t){return void 0===t?this._realVal:("string"==typeof t&&(this._realVal=t),this._realVal)},width:function(){return this._input.domElem.width()},getCaretPosition:function(){var t,e=this.getControl()[0],i=this.val().length;return document.selection?(t=document.selection.createRange(),t.moveStart("character",-i),t.text.length):"number"==typeof e.selectionStart?e.selectionStart:i},moveCaretToEnd:function(){var t=this.getControl()[0],e=t.value.length;if("undefined"!=typeof t.createTextRange){var i=t.createTextRange();i.collapse(!1),i.select()}else"number"==typeof t.selectionStart&&(t.scrollLeft=999999,t.setSelectionRange(e,e));return this},disableBrowserAutocomplete:function(){var t=this._input.hasMod("focused");t&&this._input.delMod("focused"),this.getControl().attr({autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-autocomplete":"list"}),t&&this._input.setMod("focused","yes")},_bindedEventsNames:[],bindEvents:function(t,e){return Object.keys(t).forEach(function(i){-1===this._bindedEventsNames.indexOf(i)&&this._bindedEventsNames.push(i),this._eventsFilter(i).on(i,t[i].bind(e||this))},this),this},bindSuggestEvents:function(){var t=this.params.suggest;return t.on({out:function(t,e){this.a11yDeactive(),this._changeValueByEvent(t,e)}},this),BEM.blocks["suggest2-item"].on(t.domElem,{tpah:this._onSuggestItemTpah,select:this._onSuggestItemSelect,enter:this._onSuggestItemEnter},this),this},_onSuggestItemTpah:function(t,e){this._changeValueByEvent(t,e),this.moveCaretToEnd()},_onSuggestItemSelect:function(t,e){"link"!==t.block.getMod("interact")&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},_onSuggestItemEnter:function(t,e){this.a11yActive(e.id),e.byKeyboard&&this.params.updateOnEnterByKeyboard&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},unbindAllEvents:function(){return this._input.domElem&&this._bindedEventsNames.forEach(function(t){var e=this._eventsFilter(t);e[e instanceof BEM.DOM?"un":"off"](t)},this),this._bindedEventsNames=[],this.params.suggest.un("out"),this},a11yActive:function(t){this.getControl().attr("aria-activedescendant",t)},a11yDeactive:function(){this.getControl().removeAttr("aria-activedescendant")},_eventsFilter:function(t){return~["blur","focus","change","clear"].indexOf(t)?this._input:this.getControl()},_changeValueByEvent:function(t,e){var i=e&&void 0!==e.val?e.val:this.realVal();this.val(i,$.extend({block:t.block.__self.getName(),event:t.type},e))}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t.__base.apply(this,arguments),t.bindEvents({keydown:function(e){t._onKeyDown(e)}},t)}}},_onKeyDown:function(t){t.which===this.params.suggest.__self.keyboard.enter&&this.trigger("enter")}}),BEM.decl("suggest2-input",{disableBrowserAutocomplete:function(){}}),BEM.DOM.decl("suggest2-item",{val:function(){if(void 0!==this.params.val)return this.params.val;var t=this.elem("text");return(t.length?t:this.domElem).text()},valOnSelect:function(){return this.val()},valOnEnter:function(){return this.val()},valOnLeave:function(){return this.val()},onEnter:function(t){return this.setMod("selected","yes").triggerEvent("enter",{val:this.valOnEnter(),byKeyboard:t})},onLeave:function(t){return this.delMod("selected").triggerEvent("leave",{val:this.valOnLeave(),byKeyboard:t})},onSelect:function(t){this.triggerEvent("select",{val:this.valOnSelect(),byKeyboard:t})},triggerEvent:function(t,e){return this.trigger(t,{val:e.val,id:this.domElem.attr("id"),show:!1,byKeyboard:e.byKeyboard})}}),BEM.DOM.decl("suggest2-item",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("mouseover mouseout mousedown leftclick",function(t){this.trigger(t.type,t)}).liveBindTo("link","leftclick",function(t){this.trigger("link-click",{$e:t})})}}),BEM.DOM.decl("suggest2-item",{onLeave:function(){return this.domElem?this.__base.apply(this,arguments):void 0}}),Date.now||(Date.now=function(){return(new Date).getTime()}),BEM.DOM.decl("suggest2-counter",{pointerStartEvent:"mousedown",onSetMod:{js:{inited:function(){this.clear()}}},destruct:function(){this.unbindAllEvents();
},getDefaultParams:function(){return{submitBySelect:!1,suggestReqID:!1,preventSubmit:!0,host:"//yandex.ru",path:"clck/jclck",dataUrl:"http://ya.ru",params:{},timeout:300}},metaProps:{exprt:"exprt",r:"region",log:"log"},clear:function(){var t=this;return t._params={user_input:"",text:""},t._times=[],t._renderTimes=[],t._renderTime=0,t._path={service:t.params.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:""},t._ratio={len:0,queryLen:0,actionsCount:0},t._firstChange=0,t._lastChange=0,t._sinceChange={first:0,last:0},t._selectedText="",t._session=0,t._reqID=0,t._meta={},t._afterSendAjaxCallback,this._startClickTime=null,this._startInputTime=null,this._totalInputTime=0,t},submit:function(t){var e=this,i=e.params.suggest.params["suggest2-input"],n=i.val();e._params.text=n,e._params.pos=i.getCaretPosition(),e.params.suggestReqID&&e.attachReqID(),e.sendAjax(e.getUrl(),$.extend({submitForm:!0,afterSendAjaxCallback:function(){}},t)),e.trigger("submit",e._getSubmitEventData()).clear(),e._params.prev_query=n},_getSubmitEventData:function(){var t=this;return{path:t._path,times:t._times,render_times:t._renderTimes,prev_query:t._params.prev_query,user_input:t._params.user_input,text:t._params.text,pos:t._params.pos,ratio:t._ratio,since_first_change:t._sinceChange.first,since_last_change:t._sinceChange.last,session:t._session,suggest_reqid:t._reqID,meta:t._meta,url:t.getUrl()}},sendAjax:function(t,e){return $.ajax({type:"GET",url:t,dataType:"script",timeout:this._getAjaxTimeout()}).always(this._sendAjaxAlways.bind(this,e)),this},_getAjaxTimeout:function(){return this.params.timeout},afterSendAjax:function(t){return this._afterSendAjaxCallback=t,this},getUrl:function(){return this.params.host+["/",this.params.path].concat(this._getUrlParams()).join("/").replace(/(\/+)/g,"/")},_sendAjaxAlways:function(t){t||(t={}),this.params.preventSubmit&&t.submitForm&&this.params.form.submit({block:this.__self.getName(),prevent:!1}),t.afterSendAjaxCallback&&t.afterSendAjaxCallback(),this._afterSendAjaxCallback&&this._afterSendAjaxCallback()},_getUrlParams:function(){var t=this;return this._getParamsList().concat(t._getData()).reduce(function(e,i){return e.concat(t._getParams(i))},[]).concat(["/"])},_getParamsList:function(){var t=this;return[t.params.params,t._getPath(),t._params,t._getRatio(),t._getSinceChange(),t._getSession(),{suggest_reqid:t._reqID}]},initValues:function(){return this._params.prev_query=this.params.suggest.params["suggest2-input"].val(),this},attachReqID:function(){this._reqID=this.__self._generateReqID(),this.params.form.appendHiddenInputs([{name:"suggest_reqid",value:this._reqID}])},bindEvents:function(){var t=this,e=t.params,i=e.suggest,n=e.form,o=i.getModel(),s=i.params["suggest2-input"],r=i.params["suggest2-popup"];return n.on({"button-click":t._onFormButtonClick,submit:t._onFormSubmit},t),o.on({request:t._onModelRequest,response:t._onModelResponse},t),s.on({change:t._onInputChange,enter:t._onInputEnter},t),r.on({show:t._onPopupShow},t),BEM.blocks["suggest2-item"].on(i.domElem,"enter",t._onSuggestItemEnter,t),i.on({update:t._onSuggestUpdate,select:t._onSuggestSelect},t),this._input=s._input,this._input.bindTo(this.pointerStartEvent,this._onInputClick.bind(this)).on("focus",this._onInputFocus,this),this._input.findElem("control").on("blur",this._onInputBlur.bind(this)),t},_onInputClick:function(){this._startInputTime||(this._startClickTime=Date.now())},_onInputFocus:function(){this._timeoutInputTime&&clearTimeout(this._timeoutInputTime),this._startInputTime=this._startClickTime},_onInputBlur:function(t){this._timeoutInputTime=setTimeout(function(){this._startClickTime=null,this._startInputTime=null}.bind(this),300)},_onFormButtonClick:function(){"keyboard"!==this._path.submit&&(this._path.submit="button_by_mouse")},_onFormSubmit:function(t,e){e.data.block!==this.__self.getName()&&e.data.prevent!==!1&&(this.params.preventSubmit&&(e.stopImmediatePropagation(),e.preventDefault()),this._doSubmit())},_doSubmit:function(){this.submit()},_onModelRequest:function(){this._requestTime=new Date},_onModelResponse:function(t,e){e.data&&e.data.items&&(this._path.personal=this._hasPersonal(e.data.items)?"nah_not_used":"nah_not_shown",this._meta=e.data.meta||{},this._addTime(new Date-this._requestTime),this._renderTime=new Date,this._setMetaProps(e))},_onInputChange:function(t,e){e&&"clear"!==e.source||(this._params.user_input=t.block.val(),this[this._firstChange?"_lastChange":"_firstChange"]=new Date,this._startInputTime||(this._startInputTime=this._firstChange.getTime())),this._selectedText&&(this._path.state="edit"),this._ratio.actionsCount++},_onInputEnter:function(){this._path.submit="keyboard"},_onPopupShow:function(){"not_shown"===this._path.state&&(this._path.state="not_used")},_onSuggestItemEnter:function(t,e){e.byKeyboard&&this.params.suggest.params.updateOnEnterByKeyboard&&(this._selectedText=e.val,this._path.state="suggest")},_onSuggestUpdate:function(){this._addRenderTime(new Date-this._renderTime)},_onSuggestSelect:function(t,e){var i=this;i._path.state=e.byKeyboard?"keyboard":"mouse",i._path.index=e.itemIndex+1,i._selectedText=e.val,e.item.hasMod("personal")&&(i._path.personal="nah_used"),i.params.submitBySelect&&(i._path.submit=e.byKeyboard?"keyboard":"click_by_mouse",i._params.pos=e.pos,i._params.text=this._selectedText),i.params.suggest.isNeedSubmitFormOnSelectItem(e.item)||i.submit({submitForm:!1,afterSendAjaxCallback:e.callbackOnSelect})},unbindAllEvents:function(){var t=this.params,e=t.suggest,i=t.form;return i.un("button-click").un("submit"),e.getModel().un("request").un("response"),e.params["suggest2-input"].un("change").un("enter"),e.params["suggest2-popup"].un("show").un("hide"),e.un("select"),this},_hasPersonal:function(t){return t.some(function(t){return 1===BEM.blocks["suggest2-view"]._getPrefs(t).pers})},_setMetaProps:function(t){t.data.meta&&Object.keys(this.metaProps).forEach(function(e){this._params[this.metaProps[e]]=t.data.meta[e]||""},this)},_getParams:function(t){return Object.keys(t).reduce(function(e,i){return""===t[i]?e:(e.push(i+"="+encodeURIComponent(t[i]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getSession:function(){return this._session=(new Date).getTime()+Math.round(1e4*Math.random()),{session:this._session}},_getSinceChange:function(){var t=this._getSinceTime("first"),e=this._startInputTime&&Date.now()-this._startInputTime||0;return{since_first_change:t,since_last_change:this._getSinceTime("last"),total_input_time:e}},_getSinceTime:function(t){var e="_"+t+"Change";return this._sinceChange[t]=this[e]?(new Date).getTime()-this[e]:0,this._sinceChange[t]},_getRatio:function(){return this._ratio.len=this._params.user_input.length,this._ratio.queryLen=this._params.text.length,{ratio:[this._ratio.len,this._ratio.queryLen,this._ratio.actionsCount].join(".")}},_addTime:function(t){return this._times.push(t),this._params.times=this._times.join("."),this},_addRenderTime:function(t){return this._renderTimes.push(t),this._params.render_times=this._renderTimes.join("."),this},_getData:function(){return{"*data":"url="+this.params.dataUrl}}},{_generateReqID:function(){var t=BEM.blocks["i-global"]&&BEM.blocks["i-global"].param("yandexuid")?BEM.blocks["i-global"].param("yandexuid"):this._random(9)+this._random(9);return t+(+new Date).toString().slice(-7)+this._random(7)},_random:function(t){return Math.random().toString().slice(2,Math.min(t,10)+2)}}),BEM.DOM.decl("suggest2-counter",{clear:function(){return this.__base.apply(this,arguments),this._path.submit="button_by_mouse",this}}),function(t){var e=t.event.special.leftclick={setup:function(){t(this).bind("click",e.handler)},teardown:function(){t(this).unbind("click",e.handler)},handler:function(e){e.button||(e.type="leftclick",t.event.dispatch.apply(this,arguments),e.type="click")}}}(jQuery),BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"flat"},{getPopupWidth:function(){var t=this._input.width();return this._input.get().hasMod("theme","normal")?t-2:t}}),BEM.decl({block:"suggest2-view",modName:"advanced",modVal:"yes"},{_getItemByType:function(t,e,i,n){var o=n.js,s=n.content;switch(i){case"html":o.val=t[1],s.push(e.body);break;case"bemjson":o.val=t[1],s.push.apply(s,Array.isArray(e.bemjson)?e.bemjson:[e.bemjson])}return this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"suggest2-item",modName:"interact",modVal:"link"},{onSelect:function(t){var e=this;e.__base.apply(e,arguments);var i=e.elem("link");return t||"_self"===i.attr("target")?function(){e._locationChange(i.attr("href"))}:void 0},_locationChange:function(t){window.location=t},valOnSelect:function(){return!1}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{init:function(){this.__base.apply(this,arguments),this._boundResizeHandler=this._resizeHandler.bind(this),this.__self._bindToWinResize(this._boundResizeHandler)},_resizeHandler:function(){this._popup.width(this.getPopupWidth())},destruct:function(){this.__self._unbindFromWinResize(this._boundResizeHandler),this._boundResizeHandler=null,this.__base.apply(this,arguments)}},{_resizeCallbacks:[],_bindToWinResize:function(t){return this._resizeCallbacks.push(t),this},_unbindFromWinResize:function(t){for(var e=0;e<this._resizeCallbacks.length;e++)if(this._resizeCallbacks[e]===t)return this._resizeCallbacks.splice(e,1),this;return this},_getResizeCallback:function(){return $.throttle(function(){var t=arguments;this._resizeCallbacks.forEach(function(e){e.apply(this,t)},this)},300,this)},live:function(){this.__base.apply(this,arguments),this._resizeCallback=this._getResizeCallback(),BEM.DOM.win.on("resize",this._resizeCallback)}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{_minWidth:0,_maxWidth:0,_resizeHandler:function(){this.__base.apply(this),this.hasMod("theme","large")&&this.afterCurrentEvent(function(){this.adjustView()})},_onShow:function(){this.__base.apply(this),this.hasMod("theme","large")&&this._applyMetricsToContent()},adjustView:function(){this.__base.apply(this,arguments);var t=this.getMetrics(),e=t.minWidth,i=t.maxWidth,n=!1;return e!==this._minWidth&&(this._minWidth=e,n=!0),i!==this._maxWidth&&(this._maxWidth=i,n=!0),n&&this._popup.isShown()&&this._applyMetricsToContent(),t},_applyMetricsToContent:function(){this.__base.apply(this,arguments);var t=this.findElem("content");this._minWidth&&t.css("min-width",this._minWidth),this._maxWidth&&t.css("max-width",this._maxWidth)}}),BEM.DOM.decl({block:"suggest2",modName:"ahead",modVal:"yes"},{init:function(){var t=this.__base.apply(this,arguments),e=this;return e._model.on("response",function(t,i){var n=i.data,o=n.items&&n.items[0],s=e._input.val(),r="object"==typeof o?o[1]:o,a="string"==typeof r&&0===r.indexOf(s.toLowerCase())&&r.slice(i.val.length);n.val=i.val,e.params.aheadFromServer?e._input.get().setAhead(i.val+(n.meta&&n.meta["continue"]||"")):a&&s.length>=e.params.showOverChars?e._input.get().setAhead(i.val+(e.params.showFullPhrase?a[1]:a[1].split(" ")[0])):e._input.get().unsetAhead()}),t},getDefaultParams:function(){return $.extend(this.__base(),{aheadFromServer:!1,showOverChars:3,showFullPhrase:!1})}}),BEM.DOM.decl("suggest2-form",{onSetMod:{js:{inited:function(){this._isReady=!1,this._nodes=this.initNodes()}}},getDefaultParams:function(){return{inputName:"input",buttonName:"button",popupName:"popup"}},destruct:function(){this._nodes.forEach(function(t){t.suggest.domElem&&BEM.DOM.destruct(t.suggest.domElem),this.unbindFormEvents(t),t.counter&&t.counter.destruct(),t.proxies.input.destruct(),t.proxies.popup.destruct()},this),this.__base.apply(this,arguments)},getOwner:function(t){},isReady:function(){return this._isReady},initNodes:function(){var t=this.getNodes();return t.forEach(function(t){t.suggest.init()}),this._isReady=!0,this.trigger("ready",{nodes:t}),t},getNodes:function(){return this.getNodeList().map(function(t){var e=t.suggest,i=e.params;return i.form=this,i.input=t.input,i.popup=t.popup,i.button=t.button,t.proxies={},t.proxies.popup=i["suggest2-popup"]=BEM.create({block:"suggest2-popup",mods:$.extend({"for":this.params.popupName},this.params.popupMods)},this._getNodePopupParams(e,i)),t.proxies.input=i["suggest2-input"]=BEM.create({block:"suggest2-input",mods:this.params.inputMods},this._getNodeInputParams(e,i)),t.counter&&(t.counter.params.form=this,t.counter.params.suggest=e,i.counter=t.counter),this.bindFormEvents(t),t},this)},_getNodeInputParams:function(t,e){return{suggest:t,input:e.input,updateOnEnterByKeyboard:e.updateOnEnterByKeyboard}},_getNodePopupParams:function(t,e,i){return{suggest:t,popup:e.popup,popupContentElem:this.params.popupContentElem,owner:this.getOwner(i)||e.input}},bindFormEvents:function(t){var e=this;return t.button&&t.button.bindTo("click press",function(t){e._onButtonClick(t)}),e.bindTo("submit",function(t,i){e.onSubmit(t,i)}),e},_onButtonClick:function(t){this.trigger("button-click",t)},unbindFormEvents:function(t){var e=this;return t.button&&t.button.un("click press"),e.unbindFrom("submit"),e},submit:function(t){return this.domElem.trigger("submit",t||{}),this},onSubmit:function(t,e){t.data=e||{},this.trigger("submit",t)},getNodeList:function(){var t=this,e=[];return t.elem("node").each(function(i,n){var o=$(n),s=t._getFormNodeElems(o);e.push(t._getFormNodeBlocks(s,o))}),e},_getFormNodeElems:function(t){return{input:this.findElem(t,"input"),button:this.findElem(t,"button")}},_getFormNodeBlocks:function(t,e){var i=this.findBlockInside(e,"suggest2");return{node:e,suggest:i,counter:this.findBlockOn("suggest2-counter"),input:this.findBlockOn(t.input,"input"),button:this.findBlockOn(t.button,this.params.buttonName),popup:i.findBlockOn(this.params.popupName)}},appendHiddenInputs:function(t){return BEM.DOM.append(this.domElem,BEMHTML.apply(t.map(function(t){return{block:this.__self.getName(),elem:"hidden-input",tag:"input",attrs:{type:"hidden",name:t.name,value:t.value}}},this))),this},removeHiddenInputs:function(){return BEM.DOM.destruct(this.findElem(this.domElem,"hidden-input")),this}},{live:function(){this.liveInitOnBlockInsideEvent("click tap change focus","input")}}),function(){"use strict";BEM.DOM.decl({block:"suggest2-form",modName:"stats",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._bindCounters()}}},_prepareCounterStats:function(t){var e=[];try{e.push(t.since_last_change),e.push(t.since_first_change),e.push(t.user_input.length),e.push(t.ratio.actionsCount),e.push(t.path.index),e.push("button_by_mouse"===t.path.submit?"1":"0"),e.push("edit"===t.path.state?"1":"0")}catch(i){return""}return e.join(",")},_bindCounters:function(){var t,e=this,i=e.findBlockInside("suggest2"),n=i.getCounter();n&&n.on("submit",function(i,n){var o;t&&t.remove(),o=e._prepareCounterStats(n),o&&(t=$("<input>",{type:"hidden",name:"csg",value:o}),e.domElem.append(t))})}})}(),function(){"use strict";BEM.DOM.decl({block:"suggest2-form",modName:"prefetch",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.domElem.append('<input type="hidden" name="suggest_reqid" value="'+BEM.blocks["suggest2-counter"]._generateReqID()+'">'),this._bindPrefetch()}}},_prefetchQuery:function(t){var e=this._getParams(t),i=this;i._prefetchStarted[t]||(i._prefetchStarted[t]=!0,$.ajax({url:i.domElem.attr("action")+i._serializeFormParams(e),success:function(){i._prefetchLoaded[t]=!0},cache:!0}))},_bindPrefetch:function(){var t=this,e=!1;t._input=t.findBlockInside("input"),t._prefetchStarted={},t._prefetchLoaded={};try{if(window.sessionStorage.setItem("test","1"),"1"!==window.sessionStorage.getItem("test"))return;window.sessionStorage.removeItem("test")}catch(i){return}t.domElem.on("submit",function(){var i=t._input.val();t._prefetchStarted[i]&&(e||(e=!0,t.domElem.append('<input type="hidden" name="prefetch" value="1">'),t._prefetchLoaded[i]||t.domElem.append('<input type="hidden" name="unfinished" value="1">')));try{window.sessionStorage.setItem("x",(new Date).getTime())}catch(n){}}),t.findBlockInside("suggest2").getModel().on("response",function(e,i){var n=i&&i.data,o=n&&n.meta&&"yes"===n.meta.instant;if(o&&n.meta.prefetch)for(var s=0,r=n.meta.prefetch.length;r>s;++s)t._prefetchQuery(n.meta.prefetch[s])})},_getParams:function(t){var e=this.domElem.find("input"),i=[];return e.each(function(){var e=$(this),n=e.prop("name");n&&i.push({name:e.prop("name"),value:"text"===n?t:e.val()})}),i.push({name:"prefetch",value:1}),i},_serializeFormParams:function(t){for(var e=[],i=0;i<t.length;++i)e.push(encodeURIComponent(t[i].name)+"="+encodeURIComponent(t[i].value));return"?"+e.join("&")}})}(),BEM.DOM.decl("input",{onSetMod:{disabled:function(t,e){this.__base.apply(this,arguments),this.findBlocksInside(this.elem("samples"),"link").forEach(function(i){i.setMod(t,e)})}},_onSampleClick:function(t,e){var i=this.elemParams(t);this.val("val"in i?i.val:t.text(),{source:"sample"})}},{live:function(){return this.liveBindTo("sample","pointerclick",function(t){this._onSampleClick(t.data.domElem,t)}),this.__base()}}),function(){"use strict";var t={SPACE:32,ENTER:13};BEM.DOM.decl("input",{_onSampleClick:function(t){function e(){n.elem("control").attr("readonly",!1),n.un("clear",e)}var i=this.elemParams(t),n=this;n.elem("control").attr("readonly",!0),n.onFirst("clear",e),this.val("val"in i?i.val:t.text(),{source:"sample"}),this.hasMod("no-sample-focus")||(this.noSuggest=!0,this.setMod("focused","yes"),this.noSuggest=!1),this.trigger("sample-click")},_onSampleKeyDown:function(e){return e.which===t.SPACE||e.which===t.ENTER?(this._onSampleClick($(e.target).closest(".link")),!1):void 0}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("sample","keydown",function(t){return this._onSampleKeyDown(t)})}})}(),BEM.DOM.decl("suggest2-counter",{sendAjax:function(t,e){var i=home.getData("search.suggestStatsExp.isExp"),n=home.getData("search.suggestStatsExp.isEtalon"),o={};return e&&e.submitForm&&(i||n)&&(o=this._cleanNameVars(window.name),o.home_to_serp_start=(new Date).getTime(),window.name=this._joinNameVars(o)),e&&e.submitForm&&i&&"sendBeacon"in navigator&&navigator.sendBeacon(t," ")?(this._sendAjaxAlways(e),this):this.__base.apply(this,arguments)},_cleanNameVars:function(t){return t.split("&").filter(function(t){return t&&0!==t.indexOf("home_to_serp_start=")&&0!==t.indexOf("suggest2-counter__home-counter=")}).reduce(function(t,e){var i=e.split("=");return t[i[0]]=i[1],t},{})},_joinNameVars:function(t){return Object.keys(t).map(function(e){return e+(t[e]?"="+t[e]:"")}).join("&")}}),BEM.DOM.decl("suggest2-counter",{_getParams:function(t){return Object.keys(t).reduce(function(e,i){return""===t[i]?e:(e.push(i+"="+("vars"===i?t[i]:encodeURIComponent(t[i])).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getParamsList:function(){var t,e,i=this.__base.apply(this,arguments),n=home.stat.getCustomPageParams(),o={};if(n){n=n.replace(/^\//,"").split("/");for(var s=0,r=n.length;r>s;s++)e=n[s],t=e.indexOf("="),o[e.substr(0,t)]=e.substr(t+1,e.length);var a=home.stat.getRoot(),c=home.getData?home.getData("timing.reqid"):"";a&&(o.lid=a+".searchgo"),c&&(o.sid=c);var u=home.mark?home.mark.get("searchclick"):null;u&&(o.click_timefs=u[0],o.click_timefrs=u[1]);var l=home.mark?home.mark.get("initsuggest"):null;return l&&(o.initsuggestfs=l[0],o.initsuggestfrs=l[1]),i.concat(o)}return i}}),BEM.DOM.decl("yabrowser-promo",{_install:function(){}},{live:function(){this.liveBindTo("icon-link text-link","pointerclick",function(){return this._install()})}}),BEM.DOM.decl({block:"yabrowser-promo",modName:"install",modVal:"inline"},{_install:function(){var t=this.params,e=t.counters;return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:t.api}},$.extend(t,{callbacks:{yes:function(){e.install&&((new Image).src=e.install)},no:function(){e.cancel&&((new Image).src=e.cancel)}}}))),this._inlineInstall.request().fail(function(){window.location=t.url}),e.click&&((new Image).src=e.click),home.stat.logPath("click","dist.searchlink.browser.link"),!1}}),BEM.DOM.decl({block:"yabrowser-promo",modName:"install",modVal:"download"},{_install:function(){return this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),home.stat.logPath("click","dist.searchlink.browser.link"),!1}}),BEM.DOM.decl({block:"yabrowser-promo",modName:"install",modVal:"sms"},{onSetMod:{js:function(){var t=this;this.__base.apply(this,arguments),this._popup=this.findBlockInside("sms-popup","popup"),this._input=this.findBlockInside("sms-input","input"),this._button=this.findBlockInside("sms-send","button2"),this._captcha=this.findBlockInside("sms-captcha-input","input"),this._captchaImg=this.elem("sms-captcha-img"),this._captchaContainer=this.elem("sms-captcha-container"),this._elems=this._elems||[],this._isCaptchaLoadStarted=!1,this._isCaptchaLoading=!1,this._captchaKey="",this._isSendError=!1,this._smsLink=$(this._popup.domElem).data("sms_link"),this._captchaLink=$(this._popup.domElem).data("captcha_link"),this._isEdited=!1,this._isInputStatSended=!1,this._input.on("change",this.changeThis(this._validateInput)),this._input.on("focus",this.changeThis(this._onInputFocus)),this._captcha.on("change",this.changeThis(this._onCaptchaChange)),this.elem("sms-send").on("click",function(){t._submit()}),this.elem("sms-close").on("click",function(){t._popup.hide(),home.stat.logPath("click","dist.searchlink.browser.popup.close")}),this.elem("sms-captcha-reload").on("click",function(){t._reloadCaptcha()}),this._loadCaptcha(),this._validateForm()}},_validateInput:function(){var t=this._getValue();this._isInputStatSended||(home.stat.logPath("click","dist.searchlink.browser.popup.input"),this._isInputStatSended=!0),this.afterCurrentEvent(function(){this._beautyPhone()}),t!==this._prevVal&&(this._prevVal=t,this._validateForm())},_getValue:function(){return this._input.val().trim().replace(/[^0-9]/g,"")},_isValid:function(){var t=this._isValidPhone();return this.hasMod("need-captcha")&&(t=t&&this._captcha.val()&&this._captchaKey&&!this._isCaptchaLoading),t},_beautyPhone:function(){var t=this._getValue(),e=[t.substr(0,1),t.substr(1,3),t.substr(4,t.length)].join(" ").trim();this._input.val(e)},_validateForm:function(){this._isValid()?this._button.delMod("disabled"):this._button.setMod("disabled","yes")},_isValidPhone:function(){return!this._isEdited&&this._getValue().length||this._getValue().length>=11},_onInputFocus:function(){var t=this._getValue();this._isEdited||(this._input.val(""),this._isEdited=!0),this._captchaKey&&this._isValidPhone()?this.setMod("captcha","showed"):t&&this._loadCaptcha()},_loadCaptcha:function(){this._isCaptchaLoadStarted||(this._isCaptchaLoadStarted=!0,this._reloadCaptcha())},_reloadCaptcha:function(){if(this.hasMod("need-captcha")){var t,e=this;this._isCaptchaLoading||(this._isCaptchaLoading=!0,this._captcha.val(""),t=setTimeout(function(){e.setMod("load-captcha","yes")},500),$.ajax({url:this._captchaLink,type:"POST",xhrFields:{withCredentials:!0},success:function(i){clearTimeout(t),e.delMod("load-captcha"),e._isCaptchaLoading=!1,e._captchaContainer.show(),e._captchaImg.attr("src",i.src),e._captchaImg.css("visibility","visible"),e._captchaKey=i.key,e._isValidPhone()&&e.setMod("captcha","showed"),home.stat.logPath("show","dist.searchlink.browser.popup.capcha")},error:function(){},complete:function(){},dataType:"json"}))}},_onCaptchaChange:function(){this._captcha.val()&&this.delMod("captcha-error"),this._validateForm()},_submit:function(){var t=this,e={};return e.app_name="yabro",!this._isEdited&&this.hasMod("phone-uid")?e.uid=this.getMod("phone-uid"):e.phone=(/^7/.test(this._getValue())?"+":"")+this._getValue(),this.hasMod("need-captcha")&&(e.key=this._captchaKey,e.replay=this._captcha.val()),!this.hasMod("result","opened")&&this._isValid()&&(this._popup.setMod("progress","yes"),this._isSendError=!1,home.stat.logPath("click","dist.searchlink.browser.popup.submit"),$.ajax({url:this._smsLink,type:"POST",xhrFields:{withCredentials:!0},data:e,success:function(e){t._processSendResult(e)},error:function(){t._processSendResult({status:"error"})},complete:function(){t._popup.delMod("progress")},dataType:"json"})),!1},_processSendResult:function(t){var e=this;return"success"===t.status?(this._popup.setMod("success","yes"),this._reset(),void setTimeout(function(){e._popup.delMod("success"),e._popup.delMod("progress"),e._popup.hide()},2e3)):("error"!==t.status||"no capcha key"!==t.error&&"no replay"!==t.error?this._isSendError=!0:(this._popup.delMod("progress"),this.setMod("need-captcha","yes"),this._popup.setMod("need-captcha","yes"),setTimeout(function(){e._captcha.setMod("focused","yes")},200)),void this._reloadCaptcha())},_reset:function(){this._isCaptchaLoadStarted=!1,this._captchaKey="",this._captcha.val(""),this._validateForm()},_showPopup:function(){this.hasMod("need-captcha")&&this._popup.setMod("need-captcha","yes"),this._reloadCaptcha(),this._popup.show(),home.stat.logPath("show","dist.searchlink.browser.popup.about"),home.stat.logPath("show","dist.searchlink.browser.popup.close"),home.stat.logPath("show","dist.searchlink.browser.popup.submit"),home.stat.logPath("show","dist.searchlink.browser.popup.input")},_install:function(){return this._showPopup(),home.stat.logPath("click","dist.searchlink.browser.link"),!1}}),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){return this.hasMod("disabled")?!1:void this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),i.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.pressKeys)&&(this.delMod("pressed"),i.is(e,this.params.clickKeys)&&this.trigger("click",this._buildClickEventData(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")}},{live:function(){return 8===BEM.blocks["i-ua"].ie&&this.liveBindTo("dblclick",function(t){this.hasMod("disabled")||this._onClick(t)}),this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base()}}),function(t){function e(t){var e=[];return t.replace(/(\d+)|\.|[^.\d]+/g,function(t,i){i?e.push(Number(i)):e.push(t)}),e}t.compareVersions=function(t,i){if(t===i)return 0;if(void 0===t||void 0===i||null===t||null===i)return NaN;for(var n=e(String(t)),o=e(String(i)),s=Math.max(n.length,o.length),r=0;s>r;++r){var a=n[r],c=o[r];if(void 0===a)return-1;if(void 0===c)return 1;if("."===a&&"."!==c)return-1;if("."===c&&"."!==a)return 1;if(typeof a!=typeof c&&(a=String(a),c=String(c)),a!==c)return a>c?1:-1}return 0}}(home),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),BEM.DOM.decl({block:"popup",modName:"expand",modVal:"simple"},{afterShow:function(){var t=this.domElem,e=this;this._addBg(),t.stop(!0).css(this._getTransitionParams()),setTimeout(function(){t.addClass("popup_expand_transition-on").css(e._getClearParams()),setTimeout(function(){e._addContent()},e.params.duration)},0),(new Image).src=this.params.banner.showStat,this._addResizeEvent()},beforeHide:function(t){var e=this.domElem,i=this;e.stop(!0,!0).css(this._getTransitionParams()),setTimeout(function(){e.css(i._getClearParams()).removeClass("popup_expand_transition-on"),i._removeContent(),t()},this.params.duration),(new Image).src=this.params.banner.closeStat},_moveToContainer:function(){this._inContainer=!0},_getBannerCoords:function(){return $(".banner-iframe")[0].getBoundingClientRect()},_getPopupCoords:function(){return this.domElem[0].getBoundingClientRect()},_addBg:function(){$(".banner__expand_popup-inner",this.domElem).css({"background-color":this.params.banner.bg})},_addResizeEvent:function(){var t=this,e=function(){t.hide(),$(window).unbind("resize orientationchange",e)};$(window).bind("resize orientationchange",e)},_addContent:function(){var t=$(".banner__expand_popup-inner",this.domElem),e=location.protocol||"http:",i="100%",n="100%",o=this.params.banner.src,s=this.params.banner.vars,r="<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+e+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+i+" height="+n+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+o+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+s+'" ><EMBED src="'+o+'"  flashvars="'+s+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+i+" HEIGHT="+n+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+e+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>';t.children().length||t.append(r)},_removeContent:function(){this.params.banner.eraseContent&&$(".banner__expand_popup-inner",this.domElem).html("")},_getTransitionParams:function(){var t=this._getBannerCoords(),e=this._getPopupCoords(),i=t.height/e.height,n=t.left+t.width/2-(e.left+e.width/2),o=t.top+t.height/2-(e.top+e.height/2);return{transform:"translate3d("+n+"px, "+o+"px, 0) scale("+i+","+i+")",opacity:0}},_getClearParams:function(){return{transform:"translate3d(0, 0, 0) scale(1, 1)",opacity:1}}});var AwapsJsonAPI={Json:{}};AwapsJsonAPI.Json=function(t,e,i,n,o,s,r,a){"undefined"==typeof a&&(a=""),a&&a.length>2&&a.indexOf(":")<0&&(a+=":"),this.w=e,this.h=i;for(var c=String(i);c.length<4;)c="0"+c;for(c=e+c;c.length<8;)c="0"+c;o||(o="awaps.yandex.ru"),n=n?"&charset="+n:"",s=s?"&subsection="+s:"",this.object_name=r?r:"aw_json";var u=Math.round(65535*Math.random());
this.json_awaps_url=a+"//"+o+"/10/"+t+"/"+c+".?charset="+n+"&callback="+this.object_name+".awaps_callback&rnd="+u+n+s,this.gif_code='<a href="'+a+"//"+o+"/1/"+t+"/"+c+'.gif" target="_blank"  ><img src="'+a+"//"+o+"/0/"+t+"/"+c+".gif?rnd="+u+'" width="'+e+'" height="'+i+'" border="0" ></A>',this.awaps_div_code='<div id="awaps_ad_div" width="'+e+'" height="'+i+'"></div>'},AwapsJsonAPI.Json.prototype.setID=function(t){t&&(this.html_cont_id=document.getElementById(t))},AwapsJsonAPI.Json.prototype.refreshAd=function(){this.callJson(this.json_awaps_url)},AwapsJsonAPI.Json.prototype.callJson=function(t){if(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=t,e.appendChild(i)}},AwapsJsonAPI.Json.prototype.showAwapsJson=function(t){var e=t.media[0],i=this.getHTML(e);this.html_cont_id&&(this.html_cont_id.innerHTML=i)},AwapsJsonAPI.Json.prototype.awaps_callback=function(t){var e=t.media,i=e&&e[0]&&(e[0].bnImg||e[0].bnHtm);i&&this.showAwapsJson(t)},AwapsJsonAPI.Json.prototype.getHTML=function(t){window.home=window.home||{},window.home.bnCounts=[];var e=function(e){var i=Math.round(65535*Math.random()),n=String(e).replace("%aw_random%",i);n&&(setTimeout(function(){(new Image).src=n},1e3*t.stat_delay_sec),home.bnCounts.push(n))};t.bnCounts&&t.bnCounts.length?t.bnCounts.forEach(e):t.bnCount&&e(t.bnCount);var i=t.html5_iframe_src||t.small_swiffy_iframe_src||t.bnHtm;if(i)return home.view("b-banner__iframe",{src:i,name:"b"+(Math.random()+"").substr(3,7)});var n="";if(t.image)n=home.view("b-banner__img",{attrs:{src:window.detector.isRetina()&&t.hidpi_image?t.hidpi_image:t.image,width:t.width,height:t.height,border:0,alt:t.image_alt}}),t.click_url&&(n=home.view("b-banner__link",{url:t.click_url,content:n}));else if(this.checkFlash(t)){var o=location.protocol||"http:";0===o.toLowerCase().indexOf("https")&&(t.bnFlash+="&cache=1"),n="<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+o+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+t.bnW+" height="+t.bnH+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+t.bnFlash+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+t.flashvars+'" ><EMBED src="'+t.bnFlash+'"  flashvars="'+t.flashvars+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+t.bnW+" HEIGHT="+t.bnH+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+o+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>'}else n=home.view("b-banner__img",{attrs:{src:t.bnImg,width:t.bnW,height:t.bnH,border:0,alt:t.bnAlt}}),t.gif_tizer||(n=home.view("b-banner__link",{url:t.bnHref,content:n}));return n},AwapsJsonAPI.Json.prototype.checkFlash=function(t){var e=new CAWBrowser,i=e.flash>=t.flashV&&(t.bnFlash||t.swf_big_show_url);return t.minFlashVersion&&e.full_version&&home.compareVersions(e.full_version,t.minFlashVersion)<0&&(i=!1),i},AwapsJsonAPI.Json.prototype.expand=function(t){if(t.swf_big_show_url&&($("#banner").append('<div class="banner__expand_innerclick"></div>'),$(".banner__expand_innerclick").click(function(){window.open(t.click_url,"_blank")}),this.checkFlash(t))){$("#banner").addClass("banner__expand").append('<div class="banner__expand_inner"></div>');var e=$(".banner__expand_popup"),i=e?e.bem("popup"):null;home.expandableBannerAPI={close:function(){i&&i.hide()}},$(".banner__expand_inner").click(function(){if(i){var n=$(window).height(),o=$(window).width(),s=Math.min(1200,Math.floor(o-t._gapW)),r=Math.floor(9*s/16);return r>n-t._gapH&&(s=s*(n-t._gapH)/r,r=n-t._gapH),640>s||360>r?void window.open(t.click_url,"_blank"):($(".banner__expand_popup-inner",e).css({width:s,height:r}),i.show(),!1)}$(window).trigger("bannerpopup.show")})}},AwapsJsonAPI.Json.prototype.checkTime=function(t){function e(){var e={};e[t.name]={},e[t.name][t.nameStart]=1,window.defaultMetrikaCounter.params(e),setTimeout(i,t.timeout)}function i(){var e={};e[t.name]={},e[t.name][t.nameEnd]=1,window.defaultMetrikaCounter.params(e)}function n(){window.defaultMetrikaCounter?e():setTimeout(n,100)}t&&n()};var rootDomain=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{window.top||(document.domain=rootDomain)}catch(e){}BEM.DOM.decl("widgets",{onSetMod:{js:function(){window.Widget&&($(".i-ua_browser_msie8").length&&(this.oldIe=!0),this.history=[],this.historyAcceptedPosition=0,this.personalSettings=this.params.settings,this.initWapi(),this.channel("widget").on("abort-add",this.changeThis(function(t,e){this.onAbortAdd(e)})),this.channel("widget").on("commit",this.changeThis(function(t,e){this.commit(e)})),this.channel("widget").on("tuned",this.changeThis(function(t,e){this.enableActionButton(),this.history.push(e)})),this.bindToWin("beforeunload",function(){return this.history.length!==this.historyAcceptedPosition&&this.hasMod("drag")?"\n"+home.l10n("informationsMessages.settingsNotSaved")+"\n":void 0}),this.params.editMode&&(this.collectWidgetsOnPage(),this.setMod("drag","on")),this.params.add&&this.isNewPattern()&&(this.collectWidgetsOnPage(),this.hasMod("drag")||this.setMod("drag","add"),this.addWidget(this.params.add)))},drag:function(t,e,i){e?i||(Widget.Framework.setEdit(!0),this.recalculateWidgetCoords(),this.getParanja().appendTo(this.domElem[0]),this.oldIe||this.bindDrag(),this.processHistoryState()):(Widget.Framework.setEdit(!1),this.getParanja().detach(),this.unbindDrag())}},canAddWidget:function(t){return this.domElem.find(".widget:not(.widget_removed_yes)").length<50-(t||0)},initWapi:function(){var t=this.params,e=t.prototype,i={wauth:t.auth,layoutFixed:!t.editMode,addUrl:"/adddata/",formUrl:"/form.html?json=1",patternId:t.patternid,yu:t.yu,domain:t.domain,locale:t.locale,prototype:e,widgetStyle:t.widgetStyle,showPreferencesHandler:this.changeThis(this.showPrefs),gsid:this.params.gsid};e&&(i[e+"_prototype"]=e),t.geoid&&(i.geoid=Number(t.geoid)),Widget.Init(i)},showPrefs:function(t){this.findBlockOutside(t.$(),"widget").showPrefs()},showError:function(t){this.channel("catalog").trigger("error",t)},hideError:function(){this.channel("catalog").trigger("error")},collectWidgetsOnPage:function(){var t=Widget.Framework.all(),e={};t.forEach(function(t){t.params.is_default&&(e[t.classId]=!0)},this),this.widgetsOnPage=e},getMoved:function(){var t={};return this.history.forEach(function(e){if("drag"===e.type&&e.from!==e.to){var i=e.id;t[i]?t[i].from===e.to?t[i]=null:t[i].to=e.to:t[i]={from:e.from,to:e.to}}},this),t},collectData:function(){var t=Widget.Framework.all(),e=this.getMoved(),i=t.map(function(t){if(t.params.removed)return{id:t.id,removed:!0};t.markChanged(t.id in e);var i="";return t.params.saveWithPrefs&&(i=t.params.prefs.map(function(t){return encodeURIComponent(t[0])+"="+encodeURIComponent(t[1])}).join("&")),{id:t.id,coord:t.params.position,usrCh:t.params.usrCh,settings:i}},this);return this.personalSettings=$.extend(!0,{},this.personalSettings),delete this.personalSettings.newpattern,{save:JSON.stringify({psettings:this.personalSettings,widgets:i})}},save:function(){var t=this.collectData();this.wsave(t,!0)},revert:function(){try{this.historyAcceptedPosition=this.history.length,window.location.href="/?ncrnd="+Math.random()}catch(t){}},reset:function(){window.confirm(home.l10n("informationsMessages.beforeReset"))&&this.wsave({"delete":1})},wsave:function(t,e,i){$.ajax({url:"/wsave",data:$.extend(t,{wauth:this.params.auth||this.params.wpAuth,yu:this.params.yu,prototype:this.params.prototype}),traditional:!0,type:"post",dataType:"json",success:this.changeThis(function(t){if(i||(this.historyAcceptedPosition=this.history.length),"ok"===t.result){if(!e){var n=window.location;setTimeout(function(){window.location="//"+n.host},500)}}else this.showError(home.l10n("informationsMessages.cannotSaveSettings"))})})},updatePersonalSettings:function(t,e){null===e?delete this.personalSettings[t]:this.personalSettings[t]=e,this.wsave({save:JSON.stringify({psettings:this.personalSettings})},!0,!0)},addWidget:function(t){var e=$("<div></div>").appendTo(this.domElem),i=home.parseUrl(location.href);return this.canAddWidget()?(this.widgets=null,void Widget.Framework.add(t,e,{success:this.changeThis(function(t){var n;n=t.params.smart&&t.params.defplace&&t.params.defplace.match(/\d:\d/)&&this.checkInsertPosition(t.params.defplace)?t.params.defplace:this.getInsertPosition(),this.insertAt(n,e),t.params.saveWithPrefs=!(!i.query.settings||!t.params.prefs),t.params.position=n,t.markChanged(!t.params.defplace||t.params.defplace!==n||t.classId in this.widgetsOnPage,t.params.saveWithPrefs),t.init(),this.recalculateWidgetCoords();var o=this.findBlockInside(e,"widget");this.findBlocksInside({block:"widget",modName:"state",modVal:"add"}).forEach(function(t){t.accept()});var s=o.domElem.offset();window.scrollTo(0,s.top),o.setMod("state","add"),this.history.push({type:"beforeAdd",elem:o}),t.params.open_settings_on_add&&1===t.params.havePrefsFrom&&this.showPrefs(t)}),error:this.changeThis(function(){this.hasMod("drag","add")?this.delMod("drag"):this.showError(home.l10n("informationsMessages.cannotSaveSettings"))})},{sign:i.query.sign,settings:i.query.settings,showanyway:i.query.showanyway?1:!1})):!1},onAbortAdd:function(){},commit:function(){this.save()},processHistoryState:function(){var t=window.location.hash,e=t.match(/^#open=(.+)/);if(window.history&&history.replaceState){var i=home.parseUrl(location.toString());["add","sign","settings","from"].forEach(function(t){delete i.query[t]}),i.search="";var n=function(){history.replaceState(null,null,home.makeUrl(i))};$(window).one("load",n)}else window.location.hash="m"+this.params.patternid;if(e&&e[1])for(var o=this.findBlocksInside("widget"),s=0;s<o.length;s++)if(0===o[s].getId().indexOf(e[1]))return void o[s].showPrefs()},isNewPattern:function(){var t=window.location.hash;return t!=="#m"+this.params.patternid},bindDrag:function(){var t,e,i;window.PointerEvent?(t="pointerdown mousedown",e="pointermove mousemove",i="pointerup pointercancel mouseup"):window.navigator.msPointerEnabled?(t="MSPointerDown mousedown",e="MSPointerMove mousemove",i="MSPointerUp MSPointerCancel mouseup"):void 0!==window.ontouchstart?(t="touchstart mousedown",e="touchmove mousemove",i="touchend touchcancel mouseup"):(t="mousedown",e="mousemove",i="mouseup"),this.bindToDoc(t,function(t){var e=$(t.target).closest(".widget");if(e.length&&$(t.target).closest(".widget__drag").length&&!this.dragItem&&("mousedown"!==t.type||1===t.which)){var i=e.width(),n=e.height(),o=e.offset(),s=this.getDragPlace().show(),r=home.getTouchEvent(t);return s.css({height:e.outerHeight()+parseInt(e.css("marginBottom"),10)}),e.before(s).css({position:"absolute",left:o.left,top:o.top,width:i,height:n,"z-index":10,"margin-top":0,"box-shadow":"0 0 10px #aaa"}),this.dragWidth=e.outerWidth(),this.dragItem=e.appendTo("body"),this.dragPos={x:o.left-r.x,y:o.top-r.y},this.mouseY=r.y,this.widgetHeightHalf=n/2,this.recalculateParams(),this.placeRowIndex=s.index(),this.placeColumnIndex=this.getColumnFromChild(s).index,this.scrollAnimation=this.changeThis(function(){this.scroll(),this.scrollAnimation&&window.requestAnimationFrame(this.scrollAnimation)}),this.scrollAnimation(),!1}}),this.bindToDoc(e,function(t){if(this.dragItem){if("mousemove"===t.type&&1!==t.which)return this.onMouseUp();var e=home.getTouchEvent(t),i=$(".rows"),n=i.width(),o=i.height();this.dragPos.x+e.x+this.dragWidth>n&&(e.x=n-this.dragWidth-this.dragPos.x),this.dragPos.x+e.x<0&&(e.x=-this.dragPos.x),this.dragPos.y+e.y>o&&(e.y=o-this.dragPos.y),this.mouseY=e.y,this.dragItem.css({left:this.dragPos.x+e.x,top:this.dragPos.y+e.y});var s=this.getColumn(e.x,e.y);if(s){var r=s.widgets,a=this.getDragPlace();if(r.length){if(s.index<3&&r[0].elem[0]!==this.dragItem[0])return;for(var c,u=0,l=r.length,h=this.dragPos.y+e.y+this.widgetHeightHalf;l>u&&h>r[u].center;)u++;c=r[0].elem.index()+u,c===this.placeRowIndex&&s.index===this.placeColumnIndex||(this.placeRowIndex=c,this.placeColumnIndex=s.index,0===u?a.insertBefore(r[0].elem):a.insertAfter(r[u-1].elem))}else a.appendTo(s.elems);return!1}}}),this.bindToDoc(i,this.onMouseUp),this.dragEvents=t+" "+e+" "+i},unbindDrag:function(){this.unbindFromDoc(this.dragEvents)},scroll:function(){var t,e=$(window),i=e.height(),n=e.scrollTop(),o=.2*i,s=20,r=0;this.mouseY&&(t=this.mouseY-n,o>t?r+=t-o:t>i-o&&(r+=o-i+t),n+=r*s/o,r&&n>0&&n+i<$(document).height()&&e.scrollTop(n))},onMouseUp:function(){if(this.dragItem){var t=this.elem("drag-place"),e=this.dragItem;t.before(this.dragItem).hide(),this.dragItem.attr("style",""),this.dragItem=this.dragPos=null;var i=this.findBlockOn(e,"widget"),n=i.getInstance(),o=n.params.position;return this.recalculateWidgetCoords(),n.params.position!==o&&this.commit({type:"drag",id:i.getId(),from:o,to:n.params.position}),this.mouseY=0,this.scrollAnimation=null,$(window).trigger("DragEnd"),!1}},checkInsertPosition:function(t){t=t.split(":");var e=Number(t[0]),i=this.elem("col","td",e).find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").toArray(),n=i.length;return 3>e?!n:!0},getColumn:function(t,e){for(var i,n=-1,o=0;o<this.colParams.length;o++){var s=this.colParams[o],r=t<s.left?s.left-t:t>s.right?t-s.right:0,a=e<s.top?s.top-e:e>s.bottom?e-s.bottom:0,c=Math.max(r,a);(n>c||-1===n)&&(n=c,i=s)}return i},getColumnFromChild:function(t){for(var e=t.closest(".widgets__col"),i=0;i<this.colParams.length;i++){var n=this.colParams[i];if(n.elems.is(e))return n}},getColumnWidgets:function(t){return t.find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").map(function(){var t=$(this),e=t.offset();return{elem:t,center:e.top+t.height()/2}}).toArray()},getAllColumnWidgets:function(t){return t.find(".widget:not(.widget_removed_yes)").map(function(){return{elem:$(this)}}).toArray()},getDragPlace:function(){return this.dragPlace||($(this.domElem[0]).append('<div class="widgets__drag-place"></div>'),this.dropElemCache("drag-place"),this.dragPlace=this.elem("drag-place")),this.dragPlace},getInsertPosition:function(){var t,e,i=-1;return[3,4,5].forEach(function(n){var o,s=this.elem("col","td",n).find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)").toArray(),r=s.length;o=s.reduce(function(t,e){return t+$(e).height()},0),(-1===i||i>o)&&(i=o,t=n,e=r+1)},this),t+":"+e},getParanja:function(){return this.paranja||(this.paranja=$('<div class="widgets__paranja"></div>')),this.paranja},getWidgetById:function(t){return this.findBlockOn($("#wd-wrapper-"+t),"widget")},getWidgets:function(){if(!this.widgets){var t=this.elem("col");this.widgets=this.findBlocksInside(t,"widget")}return this.widgets},recalculateParams:function(t){return this.colParams=[1,2,3,4,5].map(function(e){var i=this.elem("col","td",e),n=i.offset();return n.index=e,n.elems=i,n.height=i.height(),n.bottom=n.top+n.height,n.width=i.width(),n.right=n.left+n.width,n.widgets=t?this.getAllColumnWidgets(i):this.getColumnWidgets(i),n},this),this},recalculateWidgetCoords:function(){this.recalculateParams(!0),this.colParams.forEach(function(t,e){t.widgets.forEach(function(t,i){var n=this.findBlockOn(t.elem,"widget").getInstance();n.params.position=e+1+":"+(i+1)},this)},this)},insertAt:function(t,e){t=t.split(":");var i=this.elem("col","td",t[0]),n=i.find(".widget:not(.widget_removed_yes):not(.widget_mode_hidden)"),o=n.length,s=Number(t[1])-1;o?0===s?$(n[0]).before(e):(s>o&&(s=o),$(n[s-1]).after(e)):i.append(e)},enableActionButton:function(){this.channel("catalog").trigger("enableAction")}}),BEM.DOM.decl({block:"widgets",modName:"drag",modVal:"on"},{_afterSetMod:function(t,e){this.__base.apply(this,arguments),"drag"===t&&"on"===e&&(this.getWidgets().forEach(function(t){t.setMod("drag","on")}),this.bindToEvents(),this.eventsToUndo=this.history.filter(function(t){return"remove"===t.type}).length),this.channel("catalog").on("inited",function(){this.canAddWidget(0)},this)},onSetMod:{drag:{"":function(){this.__base.apply(this,arguments),this.getWidgets().forEach(function(t){t.delMod("drag")}),this.channel("catalog").trigger("hide"),this.unbindFromEvents()}}},commit:function(t){"recover"!==t.type&&this.history.push(t),"remove"===t.type&&++this.eventsToUndo,this.canAddWidget("remove"===t.type?-1:0),this.enableActionButton()},undo:function(){for(var t;this.history.length&&(!t||"remove"!==t.type);)t=this.history.pop();this.toggleUndoButton(--this.eventsToUndo);var e=this.getWidgetById(t.id),i=e.getInstance().params;this.checkInsertPosition(i.position)?e.delMod("removed"):(e.markChanged(!0),this.insertAt(this.getInsertPosition(),e.domElem),e.delMod("removed"),this.recalculateWidgetCoords()),this.canAddWidget()},save:function(){if(this.history.length){var t=this.collectData();this.wsave(t)}else{var e=window.location;window.location="//"+e.host}},revert:function(){this.__base.apply(this,arguments),this.delMod("drag")},canAddWidget:function(t){var e=this.__base(t);return e?(this.hideError(),this.channel("catalog").trigger("unlockAdd"),this.toggleUndoButton(this.eventsToUndo)):(this.showError(home.l10n("informationsMessages.maxCount")),this.channel("catalog").trigger("lockAdd"),this.toggleUndoButton(!1)),e},toggleUndoButton:function(t){this.channel("catalog").trigger("toggleUndo",t)},bindToEvents:function(){this.channel("catalog").on("save",this.save,this).on("revert",this.revert,this).on("reset",this.reset,this).on("undo",this.undo,this).on("add",function(t,e){this.addWidget(e)},this)},insertAt:function(){this.__base.apply(this,arguments),this.canAddWidget()},onAbortAdd:function(){this.canAddWidget(-1)},unbindFromEvents:function(){this.channel("catalog").un("save revert reset undo add")}}),BEM.DOM.decl("catalog",{onSetMod:{js:function(){this.channel("catalog").on("hide",this.hide,this),this.channel("catalog").on("show",this.show,this),this.channel("catalog").on("toggleUndo",this.toggleUndo,this),this.channel("catalog").on("error",this.error,this),this.channel("catalog").on("enableAction",this.enableAction,this),this.channel("catalog").on("lockAdd",this.lockAdd,this),this.channel("catalog").on("unlockAdd",this.unlockAdd,this),window.addEventListener("message",this.changeThis(function(t){this.hasMod("state")&&t.data&&t.data.add&&this.onWidgetSelected(t.data.add)}),!1),this.hasMod("hidden")||this.show(),this.channel("catalog").trigger("inited")},state:function(t,e){$("body").css({overflow:e?"hidden":"auto"})}},onWidgetSelected:function(t){return this.delMod("state"),this.channel("catalog").trigger("add",t),this.findBlockOn("add","button").delMod("checked"),!1},hide:function(){this.setMod("hidden","yes")},show:function(){this.delMod("hidden")},lockAdd:function(){this.findBlockOn("add","button").setMod("disabled","yes")},unlockAdd:function(){this.findBlockOn("add","button").delMod("disabled")},toggleUndo:function(t,e){this.findBlockOn("undo","button").setMod("visible",e?"":"no")},enableAction:function(){this.findBlockOn("save","button").setMod("disabled","")},error:function(t,e){e?this.elem("error").html(e).show():this.elem("error").hide()},_createCatalog:function(){var t=this.elem("panel");return t.length||(this.dropElemCache("panel"),t=$(BEMHTML.apply({block:"catalog",elem:"panel",content:[{block:"spin2",mods:{progress:"yes"}},{elem:"wrapper",content:{tag:"iframe",elem:"frame",attrs:{name:"catalog__frame",src:this.params.url,frameborder:0}}},{elem:"close",cls:"b-ico-widget-rm"}]})),t.appendTo(this.domElem)),t}},{live:function(){return this.liveBindTo("add","click",function(){this._createCatalog(),this.afterCurrentEvent(function(){this.toggleMod("state","opened")})}),this.liveBindTo("undo","click",this._getEmitFunction("undo")),this.liveBindTo("revert","click",this._getEmitFunction("revert")),this.liveBindTo("reset","click",this._getEmitFunction("reset")),this.liveBindTo("save","click",this._getEmitFunction("save")),this.liveBindTo("close","click",function(){this.delMod("state")}),!1},_getEmitFunction:function(t){return function(){this.channel("catalog").trigger(t)}}}),BEM.DOM.decl({block:"button",modName:"type",modVal:"check"},{onSetMod:{checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}}},_onClick:function(){this.__base.apply(this,arguments),this.toggleMod("checked","yes")}}),BEM.DOM.decl({block:"widgets",modName:"drag",modVal:"add"},{onAbortAdd:function(t){this.showReturnButton(t.elem.domElem),this.delMod("drag")},commit:function(t){if("drag"!==t.type)if("add"===t.type){var e=this.getWidgetById(t.id);this.save(),this.showReturnButton(e.domElem),this.delMod("drag"),e.delMod("drag")}else this.__base(t)},showReturnButton:function(t){if(this.params.retpath){var e=this.elem("button");e.length||(this.dropElemCache("button"),e=$(BEMHTML.apply({block:"button",mods:{theme:"normal",size:"m"},cls:"widgets__return",url:this.params.retpath,content:home.l10n("catalog.returnToCatalog")}))),e.insertAfter(t).show()}},canAddWidget:function(){var t=this.__base.apply(this,arguments);return t||this.delMod("drag"),t}}),function(){"use strict";var t=/^(?:(.*?):)?\/\/([^\/?#\s]+)(\/?.*)$/,e=/^(\/?[^?#\s]*)(?:\?([^#]+))?(?:#(.*))?$/;home.parseUrl=function(i){var n,o=i.match(t);if(o?n=o[3].match(e):(o=[],n=i.match(e)),!o&&!n)throw new TypeError('Invalid url "'+i+'"');var s={scheme:o[1]||"",host:o[2]||"",path:n&&n[1]||"",search:n&&n[2]||"",hash:n&&n[3]||"",query:{}};return s.search.split("&").forEach(function(t){if(t){var e=t.match(/([^=]*)=(.*)/);e?s.query[decodeURIComponent(e[1])]=decodeURIComponent(e[2]):s.query[decodeURIComponent(t)]=""}}),s},home.makeUrl=function(t){var e="";if(!t.scheme||!t.host&&t.path||(e+=t.scheme+"://"),t.host&&(t.scheme||(e+="//"),e+=t.host),e&&(t.path&&0!==t.path.indexOf("/")||!t.path)&&"/"!==e.charAt(e.length-1)&&(e+="/"),e+=t.path||"",t.query){var i=[];for(var n in t.query)t.query.hasOwnProperty(n)&&i.push(encodeURIComponent(n)+(""!==t.query[n]?"="+encodeURIComponent(t.query[n]):""));i.length&&(e+="?"+i.join("&"))}return t.hash&&(e+="#"+t.hash),e}}(),BEM.DOM.decl("w-rss",{onSetMod:{js:function(){var t=this,e=this.domElem,i=this.params.feedUrl,n=this.params.newsTimestamp,o=t.elem("list"),s=e.parent().parent().find("h2.b-widget__title,.widget__title"),r=t.elem("gradient"),a=t.elem("gradient-up"),c=t.elem("informer"),u=e.parent().find(".w-rss__arrow_type_up"),l=e.parent().find(".w-rss__arrow_type_down"),h=0===$(".i-ua_browser_touch").length,d=0,p=0,f=(new Date).getTime(),m=(new Date).getTime(),_=3e4,g=3e4,v=250,b=!1,y=!0,w=function(t,e){var i="up"===t?u:l,n="w-rss__arrow_hovered-"+("up"===t?"up":"down")+"_yes";e&&!i.get(0).clickable?(i.get(0).clickable=!0,i.css({cursor:"pointer"}),i.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup").bind("click",function(){$.browser&&$.browser.safari&&window.getSelection&&window.getSelection().empty();try{Lego.c("stred/pid=132/cid=71588/path="+C.widget.id+"."+t)}catch(e){}O.scroll(t)}),h&&i.bind("mouseenter",function(){i.addClass(n)}).bind("mouseleave",function(){clearTimeout(p),clearInterval(d),i.removeClass(n)}).bind("mousedown",function(){return p=setTimeout(function(){clearInterval(d),d=setInterval(function(){O.scroll(t)},250)},400),$.browser&&$.browser.opera?!1:void 0}).bind("mouseup",function(){clearTimeout(p),clearInterval(d)})):!e&&i.get(0).clickable&&(i.get(0).clickable=!1,i.removeClass(n),i.css({cursor:"default"}),clearTimeout(p),clearInterval(d),i.unbind("mouseenter").unbind("mouseleave").unbind("click").unbind("mousedown").unbind("mouseup"))},k=100,x=!1,E=[],M=[],T=function(t){return window.wg&&wg.isColumnWide?!!wg.isColumnWide(t):1==t},S=function(t){return window.wg&&wg.isColumnNarrow?wg.isColumnNarrow(t):2==t},C=function(){var t,i=(e.closest(".b-widget-data").attr("id")+"").substr(3),n=Widget.Framework.get(i),o=n.params.position.split(":")[0];return t=e.hasClass("w-rss_type_text-img")?"text-img":e.hasClass("w-rss_type_magazine")?"magazine":"text",{widget:n,col:o,layout:T(o)?"horiz":"vert",mode:{compact:2==n._prefs.wht,large:3==n._prefs.wht},isHeightAuto:!n._prefs.wht,type:t}}(),I=C.widget.news.length,D=function(){if("vert"===C.layout&&t.hasMod("layout","horiz")?t.setMod("layout","vert"):"horiz"===C.layout&&t.hasMod("layout","vert")&&t.setMod("layout","horiz"),C.isHeightAuto&&(parseInt(C.widget._prefs.n,10)>8?(e.find(".w-rss__body").addClass("w-rss__body_height_large"),C.mode.large=!0):"horiz"===C.layout||S(C.col)||parseInt(C.widget._prefs.n,10)<=5||5>=I?(e.find(".w-rss__body").addClass("w-rss__body_height_compact"),C.mode.compact=!0):"vert"!==C.layout||S(C.col)||(e.find(".w-rss__body").removeClass("w-rss__body_height_compact"),C.mode.compact=!1)),"text-img"!==C.type||S(C.col))return o;var i=e.parent().find(".l-rss_type_"+C.layout).clone();return i.appendTo(o),i.find("tbody").html("")},B=D(),P=function(){return"text-img"!==C.type||S(C.col)?B.find("div.w-rss__item"):B.find("tr")},O=function(){return{getCurrent:function(t,e){for(var i,n=0,o=2;n<t.length&&(i=$(t[n]).position().top)<e-o;)n++;return Math.abs(i-e)<o?{top:i,i:n,inside:!1}:{top:$(t[n-1]).position().top,i:n-1,inside:!0}},scroll:function(e){K();var i=P().toArray(),n=i.length-1,o=$(i[n]),s="up"===e?-1:1,r=t.elem("body").scrollTop(),c=t.elem("body").height(),u=o.position().top+o.height()-c,l=this.getCurrent(i,r),h=l.top,d=l.i,p=0>s&&r>h?d:d+s,f=!1;p=Math.max(0,Math.min(n,p));var m=$(i[p]).position().top;f=s*(m-r)>c-22,d===n&&s>0&&(f=!0),f?(r+=s*(c-44),d=Math.min(d,p)):(r=m,d=p),r=Math.max(0,Math.min(u,r)),f?a.removeClass("i-hidden"):a.addClass("i-hidden"),t.elem("body").animate({scrollTop:r},k)},updateControls:function(){var e=P().toArray(),i=t.elem("body").scrollTop(),n=e.length-1,o=$(e[n]),s=t.elem("body").height(),r=o.position().top+o.height()-s,c=this.getCurrent(e,i);c.inside?a.removeClass("i-hidden"):a.addClass("i-hidden"),w("up",i>0),w("down",r>i),s>r-i&&!x&&U()},reset:function(){t.elem("body").animate({scrollTop:0},k)}}}(),A=function(){var t=e.parent().find(".w-rss__item").clone().remove();return function(e){var i=t.clone(),n=e.url;n=n.replace(/^https?:/,""),i.find(".w-rss__title").attr("href",n).html(e.title).addClass(home.getData("b-rss.linkTheme","")),i.find(".w-rss__date").addClass("text_gray_yes").html(e.date),e.descr?i.find(".w-rss__description").html(e.descr):i.find(".w-rss__description").remove();var o=i.find(".w-rss__preview");if(e.img){var s="magazine"===C.type&&C.mode.compact&&e.imgCompact||e.img;s=s.replace(/^https?:/,""),o.attr("href",n),o.css({"background-image":"url("+s+")"})}else i.addClass("w-rss__item_previewable_no"),o.remove();return i.show(),i}}(),F=e.parent().find(".l-rss_type_vert").find("tr:first").clone().remove(),j=e.parent().find(".l-rss_type_horiz").find("tr:first").clone().remove(),N=function(t){var e=[];if("text-img"!==C.type||S(C.col))for(var i=0,n=t.length;n>i;i++)t[i]&&(E.push(t[i]),$.merge(e,A(t[i])));else{var o,s=function(e,i){if(""===$(i).html()){var n=t.shift();n&&($(i).html('<div class="w-rss__item">'+A(n).html()+"</div>"),E.push(n))}},r=B.find("tr:last").eq(0);for(1===r.length&&r.find("td:not(.l-rss__gap)").each(s);t.length>0;)o="vert"===C.layout?F.clone():j.clone(),o.find("td:not(.l-rss__gap)").each(s),$.merge(e,o)}B.append(e)},R=function(t,e){x=!0;var o={url:i,num:12,start:E.length+1,type:C.widget._prefs.type,"no-text":C.widget._prefs["no-text"]};"object"==typeof t&&$.extend(o,t),$.ajax({url:C.widget.params.src,dataType:"json",data:o,success:function(t){t&&t.news&&t.news.length>0&&(t.tstamp&&(n=t.tstamp),e(t))},complete:function(){x=!1,X()}})},L=function(t){return t.length>E.length||t[0].title!==E[0].title||t[0].date!==E[0].date},U=function(){R({tstamp:n},function(t){N(t.news),w("down",!0)})},W=function(t){t=t||E,O.reset(),o.html(""),B=D(),E=[],N(t),w("down",!0),q()},z=function(t){for(var i,n=P(),o=parseInt(n.eq(0).css("paddingBottom"),10),s=0,a=0;t>s&&100>a;){if(i=$(n[a]).height(),s+i+o>t){t-s>i/2&&(s+=i);break}s+=i+o,a++}100>a&&a>0&&($(".w-rss__body",e).height(s),r.addClass("i-hidden"))},H=function(){if(!e.get(0).isInited){e.get(0).isInited=!0;var i=e.height();if(o.height()>i){"magazine"===!C.type&&z(i);var n=!0;e.closest(".b-widget-fixed").mouseenter(function(){l.removeClass("w-rss__arrow_visibility_hidden"),u.removeClass("w-rss__arrow_visibility_hidden")}).mouseleave(function(){l.addClass("w-rss__arrow_visibility_hidden"),u.addClass("w-rss__arrow_visibility_hidden")}).mousemove(function(){n&&(n=!1,K(),setTimeout(function(){n=!0},250))}),t.elem("body").bind("scroll",$.debounce(O.updateControls,k,O)),w("down",!0),w("up",!0),w("up",!1)}else C.isHeightAuto&&(e.find(".w-rss__body").removeClass("w-rss__body_height_large"),e.find(".w-rss__body").addClass("w-rss__body_height_compact"),C.mode.compact=!0,C.mode.large=!1,C.isHeightAuto=!1,W(),e.get(0).isInited=!1,H())}},q=function(){if("magazine"===C.type){var t=B.find("div.w-rss__item").eq(0);t.hasClass("w-rss__item_previewable_no")||t.addClass("w-rss__item_position_first")}H()},V=function(){return Math.round(2e3*Math.random()+3e3)},K=function(){m=(new Date).getTime()},X=function(){f=(new Date).getTime()};C.widget._onDropcallback=function(t){var e=t.split(":")[0];e!=C.col&&(T(e)!==C.layout==="horiz"||"text-img"===C.type&&(S(e)||S(C.col)))&&(C.col=e,C.layout=T(e)?"horiz":"vert",W()),C.col=e},$(document).bind("mousemove keydown",function(){y&&!b&&(y=!1,setTimeout(function(){y=!0},v),(new Date).getTime()-f>_&&(c.hasClass("w-rss__informer_visibility_hidden")?(b=!0,setTimeout(function(){R({start:0},function(t){b=!1,t.news.length>0&&L(t.news)&&((new Date).getTime()-m>g?W(t.news):(c.removeClass("w-rss__informer_visibility_hidden"),M=t.news))})},V())):(new Date).getTime()-m>g&&M.length>0&&(X(),W(M),M=[],c.addClass("w-rss__informer_visibility_hidden"))))}),s.append(c),s.addClass("b-widget__title_type_rss"),N(C.widget.news),q(),$.browser&&$.browser.msie&&"text-img"===C.type&&setTimeout(function(){var t=e.find(".w-rss__preview"),i=e.find("table td").eq(0).width();t.each(function(t,e){var n=$(e);n.hide(),n.css({width:i+"px"}),n.css({heigth:"70px"}),n.show()}),e.hide(),e.css({zoom:1}),e.show()},600),setTimeout(function(){0===e.height()&&(e.parent().hide(),setTimeout(function(){e.parent().show()},200))},2e3),c.click(function(){M.length>0&&(W(M),M=[]),K(),c.addClass("w-rss__informer_visibility_hidden")})}}});var WTimer=function(t,e,i){function n(t){return i?s=setTimeout(r,t):(s=setInterval(r,t),u=!0),s}function o(){u&&(c?clearTimeout(s):clearInterval(s),u=!1)}var s,r=t,a=e,c=i||!1,u=!1;return{start:function(){return n(a)},restart:function(t){return o(),n(t)},stop:function(){o()}}},WTimersHandler=function(){function t(t,i){return t in e&&i in e[t]}var e={};return{add:function(i,n,o){"undefined"!==e[i]&&"object"==typeof e[i]||(e[i]={});var o=o||{},s=new WTimer(n.fn,864e5,n.runOnce),r=s.start();if(e[i][r]=s,"startTimerOn"in o){var a=function(){var o=i,s=r,a=n.delay;return function(){t(o,s)&&e[o][s].restart(a)}}(),c=o.startTimerOn;setTimeout(a,c)}else e[i][r].restart(n.delay);if("stopTimerOn"in o){var u=function(){var n=i,o=r;return function(){t(n,o)&&(e[n][o].stop(),delete e[n][o])}}(),l=o.stopTimerOn;setTimeout(u,l)}return r},remove:function(i,n){return t(i,n)?(e[i][n].stop(),delete e[i][n],!0):!1}}};if("undefined"==typeof Widget&&(this.Widget=function(t,e){this._(t,e)},document.Widget=Widget,function($){var wTimersHandler=new WTimersHandler;Widget.prototype={undef:function(t){return t},_:function(t,e){this._prefs={};var i=e.src?e.src:!1,n=e.wauth?e.wauth:!1,o=e.type?e.type:"raw";this.params=e,this.type=o,this.id=t,this.classId=t.replace(/-[0-9]+$/i,""),this.intClassId=e.intclassid,this.instanceId=t.replace(/^(.*)-([0-9]+)$/i,"$2"),this.htmlId=t,this.src=i,this.onLoad=this.onload=!1,this.bound=!1,""!==n&&this.setValue("wauth",n),this.savedUsrCh=this.params.usrCh},init:function(){var t=this;if(!this.bound){this.bound=!0;var e=function(){t.loadFromSrc({isBinding:!0})};if(Widget.Framework.register(this),"iframe-inside"!==this.type&&new Widget.Wrapper(this),this.params.prefs)for(var i=0;i<this.params.prefs.length;i++)this.params.prefs[i]!==!1&&this.setValue(this.params.prefs[i][0],this.params.prefs[i][1]);
var n=Widget.Framework.widgetPrefs[this.id];if(n){for(var o in this._prefs)n[o]||(n[o]=this._prefs[o]);this._prefs=n}"iframe"===this.type&&(this._stylescallback=function(){t.loadFromSrc({isBinding:!0})}),this.params.css&&"iframe"!==this.type&&this.css(this.params.css),this.params.js&&"iframe"!==this.type?this.library(this.params.js,e):e()}},showPreloader:function(t){function e(){i.$().html(Widget.Framework.params.preloader)}var i=this;t?e():window.setTimeout(function(){(i._inlineLoading||i._inlinePending)&&e()},100)},loadFromSrc:function(t){if(t||(t={noPreloader:!1,isBinding:!1}),!("inline"===this.type&&this.src===!1&&t.isBinding||("inline"!==this.type&&"iframe"!==this.type&&"json"!==this.type||(!t.noPreloader&&Widget.Framework._domloaded&&this.showPreloader("now"),this[this.type+"From"](this.src)),t.isBinding))){var e=Widget.Framework.params.rawBodyUrl+this.getWidgetId()+"?ncrnd="+Math.random()+"&prototype="+Widget.Framework.params.prototype;"raw"===this.type&&this.rawFrom(e+"&wauth="+this.getAuth()),"inline"===this.type&&this.src===!1&&this.inlineFrom(e)}},_autoValue:function(t,e){return parseInt(t,10)>0?parseInt(t,10)+"px":e},iframeElement:function(t,e,i){var n,o,s;t=this._createLoadUrl.apply(this,arguments),i?(n=this._autoValue(this.params.prefs_width,Widget.Framework.params.iframeWidth),o=this._autoValue(this.params.prefs_height,Widget.Framework.params.iframeHeight),s=this.wrapper.$$("prefs")):(n="100%",o=this._autoValue(this.params.height,Widget.Framework.params.iframeHeight),s=this.wrapper.$$("iframe"));var r=$.browser&&$.browser.msie&&"9.0"===$.browser.version,a=$('<iframe style="border:none" allowTransparency="true" frameborder="0"></iframe>').attr({id:s,src:r?"":t,name:s}).css({width:0,"min-width":n,height:o,margin:0,padding:0});if($(document.documentElement).hasClass("m-sandbox")&&a.attr("sandbox","allow-scripts allow-popups allow-forms allow-same-origin"),$.browser&&$.browser.msie){var c=function(){a.unbind("load",c).css({position:"",visibility:""})};a.css({position:"absolute",visibility:"hidden"}).bind("load",c)}return r&&setTimeout(function(){a.attr("src",t)},50),a},iframeFrom:function(t){var e=this;$(document).ready(function(){var i=function(){e.$().html("");try{var i=e.iframeElement(t,[]),n=i[0].src.split("#secure:");$.browser&&($.browser.mozilla||$.browser.safari)?i.attr({src:n[0]+"&rnd="+Math.random()+(n.length>1?"#secure:"+n[1]:"")}).appendTo(e.$()):i.appendTo(e.$()),i.one("load",e.adjustFontSize.bind(e))}catch(o){window.console&&console.error(o)}},n=function(){e.$().length?i():setTimeout(function(){n()},100)};n()})},jsonFrom:function(){var t=this._createLoadUrl.apply(this,arguments);$.getScript(t+"&ncrnd="+Math.random())},inlineFrom:function(){var t=this._createLoadUrl.apply(this,arguments),e=this;Widget.Framework.inlineLoading(1),this._inlineLoading=!0,$.get(t,function(t){e.wrapper.$().css("height",""),e._inlineFromHtml(t)})},rawFrom:function(t){var e=this;Widget.Framework.inlineLoading(1),this._inlineLoading=!0,$.get(t,function(t){e._inlineFromHtml(t)})},_inlineFromJson:function(t){return Widget.Framework.inlineLoading(1),this._inlineFromHtml(t)},_inlineLoading:!1,_inlinePending:"",_inlineFromHtml:function(html){if(!Widget.Framework._domloaded)return this._inlineLoading=!1,void(this._inlinePending=html);Widget.Framework.inlineLoading(-1);var styleRe=/(<style[^>]*>((?:\s|\S)*?)<\/style>)/gim,scriptRe=/<script[^>]*>(?!<\/script>)((?:\s|\S)*?)<\/script>/gim,match;this.wrapper.$().hasClass("b-widget-fixed")&&this.wrapper.$().addClass("b-widget-fixed"),0===this.$().length&&$("<div />").attr({id:this.$$(),"class":"b-widget-data"}).appendTo(this.wrapper.$());var ctx=this.$();BEM.DOM.destruct(ctx,!0),ctx.html(html.replace(scriptRe,"").replace(Widget.Framework.params.idTemplate,this.id));for(var root=document.getElementsByTagName("head")[0]||document.documentElement;null!==(match=styleRe.exec(html));){var newSS=document.createElement("link");newSS.rel="stylesheet",newSS.href="data:text/css,"+escape(match[2]),root.appendChild(newSS)}scriptRe.lastIndex=0;for(var widget=this;null!==(match=scriptRe.exec(html));)try{eval(match[1])}catch(e){}this._inlineLoading=!1,this._inlinePending=!1,Widget.Framework._domloaded&&this.finalize()},_createLoadUrl:function(t,e,i){var n=[{locale:this.getLocale()}];if(n.concat(e),window.toCat&&window.toReg||n.push({frommorda:1}),t=this._addParams(t,n,i||"iframe"===this.type,i),this.params.prefs_secure){for(var o=[],s=0;s<this.params.prefs_secure.length;s++)this.params.prefs_secure[s][1]&&o.push(this.params.prefs_secure[s][0]+"="+this.params.prefs_secure[s][1]);o.length&&(t+="#secure:"+o.join(","))}return t},_addParams:function(t,e,i,n){if(i&&(Widget.Framework.params.fullproxyDomain?this._prefs["."]=Widget.Framework.params.fullproxyDomain+"|"+Widget.Framework.params.proxyDomain:this._prefs["."]=location.protocol+"//"+location.host+"|"+document.domain,!n)){var o=this.getWidgetStyle()||{};o.bg&&(this._prefs.widgetBg=o.bg),o.text&&(this._prefs.widgetText=o.text),o.link&&(this._prefs.widgetLink=o.link),o.hover&&(this._prefs.widgetHover=o.hover),o.decor&&(this._prefs.widgetDecor=o.decor),this._moving&&(this._prefs.widgetMoving=1)}for(var s=[e,[this._prefs]],r=y5Url(location.href),a={},c=0;c<s.length;c++)for(var u=0;u<s[c].length;u++){var l;if(s[c][u]instanceof Array)for(l=0;l<s[c][u].length;l++)null!==r.getParam(s[c][u][l])&&(a[s[c][u][l]]=r.getParam(s[c][u][l]));else for(l in s[c][u])"function"!=typeof s[c][u][l]&&"object"!=typeof s[c][u][l]&&(a[l]=s[c][u][l])}return y5Url(t).addParams(a).toString()},_disableAutoStats:!1,hookStats:function(){return Widget.Framework.hookStats(this)},disableAutoStats:function(){this._disableAutoStats=!0},onload:function(){},resetAuth:function(){this._splitterAuth=!1},getAuth:function(){return this.getValue("wauth")},_splittedAuth:!1,splitAuth:function(){return this._splittedAuth||(this._splittedAuth=Widget.Framework.splitAuth(this.getAuth())),this._splittedAuth},getWidgetId:function(){return this.splitAuth().id},getOwner:function(){return this.splitAuth().owner},getViewer:function(){return this.splitAuth().viewer},setValue:function(t,e){this._prefs[t]=e,"wauth"===t&&Widget.Framework.registerWauth(this)},getValue:function(t){return this._prefs[t]?this._prefs[t]:this.undef()},getBoolean:function(t){var e=this.getValue(t);return e===!0||"true"===e},_encodeValues:function(t){t===this.undef()&&(t=this._prefs);var e=y5Url("");return e.query(t),e.query()},setValues:function(t){for(var e in t)"function"!=typeof t[e]&&"object"!=typeof t[e]&&this.setValue(e,t[e])},saveValues:function(t,e){t===this.undef()&&(t=this._prefs),this.markChanged(!1,!0),this.setValues(t),$.ajax({url:(Widget.Framework.params.saveDomain||"")+Widget.Framework.params.formUrl,data:{widget:this.getWidgetId(),wauth:this.getAuth(),usrCh:this.params.usrCh,s:this._encodeValues(t)},dataType:"json",success:e})},dropValues:function(t){var e=this;$.ajax({url:(Widget.Framework.params.saveDomain||"")+Widget.Framework.params.formUrl,data:{widget:this.getWidgetId(),wauth:this.getAuth(),s:"DROP"},dataType:"json",success:function(i){Widget.Framework.widgetPrefs[e.id]=!1,t&&t(i)}})},reload:function(t,e,i){if(!this.pauseReload){$(".b-wdgt-control").appendTo("body");var n=this,o=function(){t&&t(),n.onload&&n.onload(),n.queueAutoReload()};if(this.wrapper){if("undefined"!=typeof e&&(this._prefs.showAnyway=e),"raw"===this.type)return Widget.Framework.reload(this,o,e,i);this.loadFromSrc({noPreloader:!0})}else{var s=location.host;s.indexOf("/")===s.length-1&&(s=s.substr(0,s.length-1));var r=location.pathname;0===r.indexOf("/")&&(r=r.substr(1)),location.href=this._addParams("//"+s+"/"+r,[],"isIframe")}}},setTitle:function(t){this.wrapper?this.wrapper.setTitle(t):Widget.Framework.xframe(this,"Widget::setTitle",t)},savePreferences:function(t){this.saveValues(t),this._updateOnHide=!0},dropPreferences:function(t){var e=this.getAuth();this._prefs={},this.setValue("wauth",e),this.wrapper?(this.dropValues(t),$(window).trigger({type:"widgetSettingsClosed",id:this.id})):Widget.Framework.xframe(this,"Widget::dropPreferences","",t)},showPreferences:function(){this.wrapper?this.wrapper.showPreferences():Widget.Framework.xframe(this,"Widget::showPreferences")},hidePreferences:function(){this.wrapper?(this._updateOnHide&&(this.loadFromSrc(),Widget.Framework.params.notifyChangesHandler(this)),this.wrapper.hidePreferences()):Widget.Framework.xframe(this,"Widget::hidePreferences",this._updateOnHide?"<>"+this._encodeValues():""),this._updateOnHide=!1},setIFrameHeight:function(t){this.wrapper?this.wrapper.setIFrameHeight(t):Widget.Framework.xframe(this,"Widget::setIFrameHeight",t)},setIFrameWidth:function(t){this.wrapper?this.wrapper.setIFrameWidth(t):Widget.Framework.xframe(this,"Widget::setIFrameWidth",t)},setIFrameSize:function(t,e){this.wrapper?this.wrapper.setIFrameSize(t,e):Widget.Framework.xframe(this,"Widget::setIFrameSize",t+","+e)},setPreferencesFormWidth:function(t){this.wrapper?this.wrapper.setPreferencesFormWidth(t):Widget.Framework.xframe(this,"Widget::setPreferencesFormWidth",t)},setPreferencesFormHeight:function(t){this.wrapper?this.wrapper.setPreferencesFormHeight(t):Widget.Framework.xframe(this,"Widget::setPreferencesFormHeight",t)},setPreferencesFormSize:function(t,e){this.wrapper?this.wrapper.setPreferencesFormSize(t,e):Widget.Framework.xframe(this,"Widget::setPreferencesFormSize",t+","+e)},_calculateCss:function(t,e){var i=t.css(e),n=i.replace(/(\.[0-9]+)?px$/,"");return"height"!==e||"auto"!==i&&0!==parseInt(i,10)?i!==n?parseInt(i,10):0:document.body.scrollHeight},_sumCss:function(t,e){for(var i=0,n=0;n<e.length;n++)i+=this._calculateCss(t,e[n]);return i},adjustIFrameHeight:function(){var t=this;window.clearTimeout(this._adjustIFrameHeightTimeout),this._adjustIFrameHeightTimeout=window.setTimeout(function(){t._adjustIFrameHeight()},100)},_adjustIFrameHeightPrevious:-1,_adjustIFrameHeightTimeout:!1,_adjustIFrameHeight:function(){var t;t="iframe-inside"===this.type?$("body"):this.$(),t.css("overflow","hidden");var e=!1;t.css("margin-left")===t.css("margin-right")&&t.css("margin-right")===t.css("margin-top")&&t.css("margin-top")===t.css("margin-bottom")&&"0px"===t.css("margin-bottom")&&t.css("padding-left")===t.css("padding-right")&&t.css("padding-right")===t.css("padding-top")&&t.css("padding-top")===t.css("padding-bottom")&&"0px"===t.css("padding-bottom")&&(e=!0);var i=this._sumCss(t,["marginTop","marginBottom","height"]);e&&t.css("padding","1px");var n=this._sumCss(t,["marginTop","marginBottom","height"]);return n>i&&(i=n),i!==this._adjustIFrameHeightPrevious?($.browser&&$.browser.opera&&(i+=20),this._adjustIFrameHeightPrevious=i,this.setIFrameHeight(i)):void 0},library:function(t,e){var i=this;this._libraryLoading=!0,Widget.Framework.library(t,function(){i._libraryLoading=!1,e?e():i.finalize()})},css:function(t){return Widget.Framework.css(t)},iReload:function(t){var e=this;if(this.stopAutoReload(),Widget.Framework.focused)Widget.Framework.addToReloadQueue(e,t),Widget.Framework.reloadQueueTimer&&clearTimeout(Widget.Framework.reloadQueueTimer),Widget.Framework.reloadQueueTimer=setTimeout(function(){Widget.Framework.processReloadQueue()},Widget.Framework.reloadQueueTimeout);else{var i=function(){$.browser&&$.browser.msie?$(document).unbind("focusin",i):$(window).unbind("focus",i),Widget.Framework.processReloadQueue()};Widget.Framework.addToReloadQueue(e,t),$.browser&&$.browser.msie?$(document).bind("focusin",i):$(window).bind("focus",i)}},stopAutoReload:function(){Widget.Framework.unsetAutoreload(this)},queueAutoReload:function(){Widget.Framework.setAutoreload(this)},finalize:function(){this.queueAutoReload(),this.onload&&this.onload(),this.onLoad&&this.onLoad(),this._disableAutoStats||this.hookStats(),$(window).trigger({type:"widgetLoaded",id:this.id})},countShow:function(t,e){csh_ifgsid&&!this._isNotReloaded&&csh_ifgsid(t,e)},addTimer:function(t,e){return wTimersHandler.add(this.id,t,e)},removeTimer:function(t){wTimersHandler.remove(this.id,t)},getWidgetStyle:function(){var t=this.params.position,e=Widget.Framework.params.widgetStyle;if(t||(t=window.wg&&wg._addedWidgetPosition),e&&t){var i=parseInt(t.split(":")[0],10),n={};e[t]?n=e[t]:e.top&&2>=i?n=e.top:e.bottom&&i>2?n=e.bottom:e.all&&(n=e.all);for(var o in e.def)e.def.hasOwnProperty(o)&&(n[o]||(n[o]=e.def[o]));return n}return""},appendStyle:function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),document.getElementsByTagName("head").item(0).appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))},adjustFontSize:function(){if("iframe"===this.type){var t=this.$().find("iframe")[0];t.contentWindow.postMessage(JSON.stringify({type:"message",message:{name:"font-size",value:Widget.Framework.getFontSize()}}),"*")}},addWidgetStyles:function(){try{var t=$("script[nowidgetstyles='true']").length;if(t)return;"iframe-inside"===this.type&&this._prefs&&(this._prefs.widgetLink&&this.appendStyle(":link {color:#"+this._prefs.widgetLink+" !important;}"),this._prefs.widgetHover&&this.appendStyle(":link:hover {color:#"+this._prefs.widgetHover+" !important;}"),this._prefs.widgetText&&this.appendStyle("body {color:#"+this._prefs.widgetText+" !important;}"),this._prefs.widgetDecor&&this.appendStyle(":link {text-decoration: none! important;}"))}catch(e){window.console&&window.console.log&&console.log("unable to append widget styles",this._prefs.widgetBg,this._prefs.widgetText,this._prefs.widgetLink,this._prefs.widgetHover,this._prefs.widgetDecor)}},markChanged:function(t,e){this.params.usrCh|=(t?1:0)+(e?2:0)},$:function(t){return $("#"+this.$$(t))},$$:function(t){return Widget.Framework.params.idPrefix+this.id+(t===this.undef()?"":t)},getLocale:function(){return Widget.Framework.getLocale()},end:!0}}(jQuery)),y5Url=function(){function t(t,e){return f[e]||t}function e(e){return e.replace(/%([A-Fa-f0-9]{2})/g,t)}function i(t){var i=t.replace(/\+/g,"%20");try{var n=decodeURIComponent(i);if(void 0==n)throw"malformed URI sequence";return n}catch(o){try{return decodeURIComponent(e(i))}catch(o){return unescape(i)}}}function n(t){try{var i=decodeURI(t);if(void 0==i)throw"malformed URI sequence";return i}catch(n){try{return decodeURI(e(t))}catch(n){return unescape(t)}}}function o(t,e,i){u.undef(t[e])&&(t[e]=[]),u.array(i)?t[e]=t[e].concat(i):t[e].push(i)}function s(t,e){for(var i=t[e],n=i.length,o=new Array(n),s=m(e),r=0;n>r;r++)o[r]=s+"="+m(i[r]);return o}function r(t){for(var e,n,s,r={},a=t.replace(/\+/g,"%20").split("&"),c=0,u=a.length;u>c;c++)e=a[c].split("="),n=e.shift(),n&&(s=e.length>1?e.join("="):e[0]||"",o(r,i(n),i(s)));return r}var a={UNDEF:"undefined"};a.Types={UNDEF:1,UNDEFINED:1,OBJECT:2,FUNCTION:4,NUMBER:8,STRING:16,BOOLEAN:32,DATE:1024,REGEXP:2048,ARRAY:4096,NULL:8192,EVENT:16384,NODE:32768,TYPES:{undefined:1,object:2,"function":4,number:8,string:16,"boolean":32},type:function(t){var e=this.TYPES[typeof t];if(null===t)return this.NULL;if(e==this.OBJECT&&(t.nodeName||this.document(t)))return this.NODE;if(e==this.OBJECT||e==this.FUNCTION)switch(t.constructor){case Array:return this.ARRAY;case RegExp:return this.REGEXP;case Date:return this.DATE}return this.event(t)?this.EVENT:e},test:function(t,e){return!!(this.type(t)&e)},def:function(t){return typeof t!=c},undef:function(t){return typeof t==c},object:function(t){return"object"==typeof t},func:function(t){return"function"==typeof t},nativeFunc:function(t){return this.func(t)&&isNativeFunc.test(t.toString())},number:function(t){return"number"==typeof t},string:function(t){return"string"==typeof t},bool:function(t){return"boolean"==typeof t},nul:function(t){return null===t},array:function(t){return t instanceof Array},regexp:function(t){return t instanceof RegExp},date:function(t){return t instanceof Date},event:function(t){return t&&typeof t.type!=c&&typeof(t.stopPropagation||t.cancelBubble)!=c},element:function(t){return checkDomNode(t,Node.ELEMENT_NODE)},attribute:function(t){return checkDomNode(t,Node.ATTRIBUTE_NODE)},text:function(t){return checkDomNode(t,Node.TEXT_NODE)},document:function(t){return t&&typeof t.documentElement!=c||!1},comment:function(t){return checkDomNode(t,Node.COMMENT_NODE)},node:function(t){return t&&typeof t.nodeType!=c}};for(var c=a.UNDEF,u=a.Types,l=/^((((\w+):)\/\/)?(([\w\-\.]+\.\w+|localhost)(\:(\d+))?))?(\/?[^\?#]*)?(\?([^#]*))?(#(.*))?$/,h=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/,d="E9F6F3EAE5EDE3F8F9E7F5FAF4FBE2E0EFF0EEEBE4E6FDFFF7F1ECE8F2FCE1FEB8C9D6D3CAC5CDC3D8D9C7D5DAD4DBC2C0CFD0CECBC4C6DDDFD7D1CCC8D2DCC1DEA8".match(/../g),p="%D0%B9%D1%86%D1%83%D0%BA%D0%B5%D0%BD%D0%B3%D1%88%D1%89%D0%B7%D1%85%D1%8A%D1%84%D1%8B%D0%B2%D0%B0%D0%BF%D1%80%D0%BE%D0%BB%D0%B4%D0%B6%D1%8D%D1%8F%D1%87%D1%81%D0%BC%D0%B8%D1%82%D1%8C%D0%B1%D1%8E%D1%91%D0%99%D0%A6%D0%A3%D0%9A%D0%95%D0%9D%D0%93%D0%A8%D0%A9%D0%97%D0%A5%D0%AA%D0%A4%D0%AB%D0%92%D0%90%D0%9F%D0%A0%D0%9E%D0%9B%D0%94%D0%96%D0%AD%D0%AF%D0%A7%D0%A1%D0%9C%D0%98%D0%A2%D0%AC%D0%91%D0%AE%D0%81".match(/.{6}/g),f={},m=encodeURIComponent,_=[".xml",".html",".xhtml",".jpg",".gif",".png",".css",".js",".xsl",".php",".py",".pl"],g=0,v=d.length,b=/%3B|%2C|%2F|%3F|%3A|%40|%26|%3D|%2B|%24/gi;v>g;g++)f[d[g]]=p[g];a.URL=function(t){t=u.def(t)?t.toString():window.location.href;var e=t.match(l);if(e){if(this.Host=e[6]||"",this.Path=e[9]||"",e[6]){var o=e[6].substring(e[6].lastIndexOf(".")),s=$.inArray(o,_);-1!=s&&(this.Path=e[6],this.Host="")}this.Href=e[0],this.Proto=e[4]||"",this.Port=e[8]||0,this.Path=n(this.Path),this.Query=r(e[11]||""),this.Hash=i(e[13]||"")}},a.URL.prototype={go:function(){window.location.href=this.toString()},toString:function(){var t="";if((this.Proto||this.Host)&&this.Host&&(t+=(this.Proto||"http")+"://"+this.Host,this.Port&&(t+=":"+this.Port)),this.Path){this.Host&&0!=this.Path.indexOf("/")&&(t+="/"),b.lastIndex=0;for(var e,i=0,n=[];e=b.exec(this.Path);)b.lastIndex>i&&e[0]&&(n.push(this.Path.slice(i,e.index)),n.push(e[0]),i=e.index+e[0].length);i!==this.Path.length&&n.push(this.Path.slice(i)),n[0]=encodeURI(n[0]);for(var o=[],s=0;s<n.length;s++)o[s]=s%2?n[s]:encodeURI(n[s]);t+=o.join("")}for(var r="",s=0;s<r.length;s++){var a=r.charAt(s),c=encodeURIComponent(encodeURIComponent(a)),u=encodeURIComponent(encodeURIComponent(a.toUpperCase()));t.indexOf(c)>-1&&(t=t.replace(new RegExp(c,"g"),a)),t.indexOf(u)>-1&&(t=t.replace(new RegExp(u,"g"),a))}var l=this.query();return l&&(t+="?"+l),this.Hash&&(t+="#"+m(this.Hash)),t},clone:function(){return new a.URL(this.toString())},proto:function(){},host:function(){},port:function(){},path:function(){},hash:function(){},query:function(t){if(u.def(t))return this.clearQuery(),u.string(t)?this.Query=r(t):this.replaceParams(t),this;var e=[];for(var i in this.Query)e=e.concat(s(this.Query,i));return e.join("&")},queryKeys:function(){var t=[];for(var e in this.Query)t.push(e);return t.sort()},addParam:function(t,e){return o(this.Query,t,e),this},addParams:function(t){for(var e in t)o(this.Query,e,t[e]);return this},removeParams:function(t){for(var e=0,i=t.length;i>e;e++)delete this.Query[t[e]];return this},replaceParams:function(t){var e=[];for(var i in t)e.push(i);return this.removeParams(e),this.addParams(t),this},clearQuery:function(){return this.Query={},this},getParam:function(t){var e=this.Query[t];return e?e[0]:null},getParams:function(t){return this.Query[t]||[]}};var y=a.URL,w=y.prototype,k={proto:"Proto",host:"Host",port:"Port",path:"Path",hash:"Hash"};for(g in k)w[g]=function(t){return function(e){return u.def(e)?(this[t]=e,this):this[t]}}(k[g]);return w.get=w.toString,a.Url=function(t){return new y(t)},y.isValid=function(t){return h.test(t)},a.Url}(),"undefined"!=typeof Widget&&"undefined"==typeof Widget.Wrapper&&!function(t){Widget.Wrapper=function(t){this._(t)},Widget.Wrapper.prototype={undef:function(t){return t},_:function(t){this.widget=t,this.widget.wrapper=this,Widget.Framework._wrappers[this.$$()]=t},$:function(e){return t("#"+this.$$(e))},$$:function(t){return Widget.Framework.params.wrapperPrefix+(t==this.undef()?"wrapper":t)+Widget.Framework.params.wrapperPostfix+this.widget.id},setTitle:function(t){this.$("title").html((""+t).replace(/</g,"&lt;"))},getWindowSize:function(){var e=function(){return document[t.support.boxModel?"documentElement":"body"]},i=window;if("undefined"!=typeof i.innerWidth)return{width:i.innerWidth,height:i.innerHeight};var n=e();return{width:n.clientWidth,height:n.clientHeight}},_px:function(t){return(""+t).match("^[0-9]+$")&&(t+="px"),t},setIFrameHeight:function(t){this.$().css("height",""),this.$("iframe").css("height",this._px(t))},setIFrameWidth:function(t){this.$("iframe").css("width",this._px(t))},setIFrameSize:function(t,e){this.$("iframe").css("height",this._px(e)).css("width",this._px(t))},setPreferencesFormWidth:function(t){var e=this.getWindowSize().width,t=2>e/t?e/2:t;this.$("prefs").css("width",this._px(t))},setPreferencesFormHeight:function(t){var e=this.getWindowSize().height,t=2>e/t?e/2:t;this.$("prefs").css("height",this._px(t))},setPreferencesFormSize:function(t,e){this.setPreferencesFormWidth(t),this.setPreferencesFormHeight(e)},showPreferences:function(){Widget.Framework.params.showPreferencesHandler(this.widget)},hidePreferences:function(){Widget.Framework.params.hidePreferencesHandler(this.widget)},showEditForm:function(t){return Widget.Framework.showEditForm(this.widget.id,t)}}}(jQuery),"undefined"!=typeof Widget&&"undefined"==typeof Widget.Framework){var widgetTiming=1e3;!function(t){Widget.Framework={undef:function(t){return t},params:!1,_id:{},_prebindId:{},_wauth:{},_no:{},_widgets:[],_wrappers:{},_callbacks:{},_callbackId:1,widgetAutoReloadTimers:{},widgetReloadQueue:{},reloadQueueTimeout:5e3,reloadQueueTimer:null,widgetPrefs:{},getLocale:function(){return this.params.locale},getDomain:function(){return this.params.domain},get:function(t){return Widget.Framework._id[t]},getPrebind:function(t){return Widget.Framework._prebindId[t]},getByWauth:function(t){return Widget.Framework._wauth[t]},getByWrapperId:function(t){return Widget.Framework._wrappers[t]},getByClass:function(t){if(this._no[t]===this.undef())return[];for(var e=[],i=0;i<this._widgets.length;i++)this._widgets[i].classId===t&&(e[e.length]=this._widgets[i]);return e},updateNo:function(t,e){var i=parseInt((""+e).replace(/^[^\-]+-/,""),10);return this._no[t]===this.undef()&&(this._no[t]=0),this._no[t]<=i&&(this._no[t]=i+1),this._no[t]},register:function(t){this.registerWauth(t),this._id[t.id]=t,this.updateNo(t.classId,t.instanceId),t.intClassId&&this.updateNo(t.intClassId,t.instanceId),this._widgets=[];for(var e in this._id)this._id.hasOwnProperty(e)&&(this._widgets[this._widgets.length]=this._id[e])},registerWauth:function(t){var e=t.getValue("wauth");""!==e&&(this._wauth[e]=t),t.resetAuth()},all:function(){return this._widgets},bindIframe:function(){var t=y5Url(location.href).getParam("wauth");if(t){this.inIframe=!0;var e=this.splitAuth(t),i=this.bind(e.id,{type:"iframe-inside",wauth:t});return this.setValuesFromUrl(i),i.addWidgetStyles(),document.documentElement.id=this.params.idPrefix+i.id,i}return this.inIframe=!1,!1},setEdit:function(t){return arguments.length?(t=!!t,void(this.params.edit!==t&&(t?this.unsetAutoreload():this.setAutoreload(),this.params.edit=t))):this.params.edit},getValuesFromUrl:function(t){var e=[];try{var i,n,o=y5Url(location.href);t!==this.undef()&&o.query(t);var s=o.queryKeys();for(i=0;i<s.length;i++)o.getParam(s[i])===this.undef()?e[e.length]=[s[i],""]:e[e.length]=[s[i],o.getParam(s[i])];if(o.Hash){var r,a=o.Hash.replace("secure:","").split(",");for(i=0,n=a.length;n>i;i++)r=a[i].split("="),e[e.length]=r}}catch(c){}return e},setValuesFromUrl:function(t){var e,i=this.getValuesFromUrl();try{e=location.protocol}catch(n){e="http:"}for(var o=0;o<i.length;o++)if("."===i[o][0]){var s=i[o][1].split("|");this.params.saveDomain=s[0].replace(/(http:|https:)/,e),this.params.fullproxyDomain=s[0],this.params.fullproxyUrl=this.params.saveDomain+this.params.proxyUrl,this.params.proxyDomain=s[1]}else if("locale"===i[o][0])this.params.locale=i[o][1];else{var r=i[o][1],a=i[o][0];"prefs_get"===a&&(r=JSON.parse(r)),t.setValue(a,r)}},_inlineLoadingCount:0,inlineLoading:function(t){this._inlineLoadingCount+=t,this.onInlineLoadingChange(this._inlineLoadingCount,t)},onInlineLoadingChange:function(){},bind:function(t,e){var i=this.prebind(t,e);return i.init(),i},prebind:function(t,e){var i=new Widget(t,e);return Widget.Framework._prebindId[t]=i,i},init:function(t){if(this.params===!1)this.params=t;else for(var e in t)t.hasOwnProperty(e)&&t[e]!==this.undef()&&(this.params[e]=t[e]);this.params.preloader=this.params.preloader.replace("#dataLoading#",this.params.dataLoadingText)},insert:function(t,e,i,n){e.append(i),function o(){var e=Widget.Framework.getPrebind(t);e?(e.bound&&("raw"===e.type||"inline"===e.type&&e.src===!1)&&e.finalize(),n&&n(e,e.$().parent())):setTimeout(o,100)}()},replace:function(t,e,i){var n=t.$(),o=t.id,s=null;BEM.DOM.destruct(n,!0),n.html(e),BEM.DOM.init(n);var r=Widget.Framework.get(o);return s=r.wrapper.$(),i&&i(r,s),r},reload:function(e,i,n,o){n&&(e._prefs.showAnyway=n);var s={wauth:e.getAuth(),wid:e.id,usrCh:e.params.usrCh,fixed:this.params.layoutFixed?"1":"",showanyway:e._prefs.showAnyway?1:0,prefs_get:e.params.prefs_get?JSON.stringify(e.params.prefs_get):"",locale:this.getLocale(),prototype:Widget.Framework.params.prototype};o&&(s.istuning=1),this.params.gsid&&(s.g_sid=this.params.gsid),"undefined"!=typeof e.params.is_default&&(s.is_default=e.params.is_default===!0?1:0),Widget.Framework.widgetPrefs[e.id]!==!1?Widget.Framework.widgetPrefs[e.id]=e._prefs:Widget.Framework.widgetPrefs[e.id]=null,"iframe"===e.type&&(s["."]=this.params.fullproxyDomain+"|"+this.params.proxyDomain),t.get(this.params.addUrl,s,function(t){Widget.Framework.replace(e,t,i)})},add:function(e,i,n,o){var s=this.updateNo(e,"_topnews"===e?0:1);this.updateNo(e,s);var r,a;"function"==typeof n?r=n:(r=n.success,a=n.error),o=o?o:{fixed:!1};var c=e+"-"+s,u={wauth:this.params.wauth,wid:c,smart:o.smart?"1":"",fixed:o.fixed?"1":"",locale:this.getLocale(),isAddition:1,prototype:this.params.prototype};this.params.gsid&&(u.g_sid=this.params.gsid),o.settings&&(u.settings=o.settings),o.sign&&(u.sign=o.sign),o.showanyway&&(u.showanyway=o.showanyway),t.ajax({url:this.params.addUrl,data:u,success:function(t){Widget.Framework.insert(c,i,t,r)},error:a})},fromJson:function(t,e){var i=this.getByWauth(t);i&&i._inlineFromJson(e)},splitAuth:function(t){var e=t.split(".");return e.length>4?{id:e[3],owner:e[6],viewer:e[5]}:{id:e[0],owner:e[1],viewer:e[2]}},scripts:{},library:function(e,i){var n=this.prepareLibrary(e),o=0,s=this,r=function(e){if(e!==s.undef()&&"loaded"!==s.scripts[e]){for(var a=0;a<s.scripts[e].length;a++)s.scripts[e][a]();s.scripts[e]="loaded"}if(o>=n.length)return void(i!==s.undef()&&i());var c=n[o];o++,s.scripts[c]===s.undef()&&c!==!1?(s.scripts[c]=[],t.getScript(c,function(t){return function(){r(t)}}(c))):"loaded"===s.scripts[c]?r():s.scripts[c].push(r)};r()},prepareLibrary:function(t){var e=[];if(t instanceof Array)for(var i=0;i<t.length;i++)e=t[i]instanceof Array?e.concat(this.prepareLibrary(t[i][0],t[i][1])):e.concat(this.prepareLibrary(t[i]));return t!==!1&&(e=t),e},_css:{},css:function(e){e instanceof Array?this.loadCss(e):(e.any instanceof Array&&this.loadCss(e.any),t.browser&&t.browser.msie&&e.msie instanceof Array&&this.loadCss(e.msie),t.browser&&t.browser.msie||!(e.non_msie instanceof Array)||this.loadCss(e.non_msie))},loadCss:function(t){for(var e=0;e<t.length;e++)if(!this._css[t[e]]){this._css[t[e]]=!0;var i=document.createElement("link");i.rel="stylesheet",i.href=t[e];var n=document.getElementsByTagName("head")[0]||document.documentElement;n.appendChild(i)}},_click:function(e){var i="//yandex.ru/clck/jclck/dtype=stred/pid="+this.params.statParams.pid+"/cid="+this.params.statParams.cid+"/path="+e+"/rnd="+Math.random()+"/*"+location.href.replace(/^[^\/]+\/+/,"");try{t.getScript(i)}catch(n){}},_counter:function(){var e=t(this),i=(e.closest(".widget").attr("id")||"").replace(/^wd-wrapper-/,""),n=Widget.Framework.get(i),o=n.classId+".anchors";if(n){if(e.attr("rev")){var s=e.attr("rev");if("none"===s)return;o=o+"."+s}Widget.Framework._click(o)}},hookStats:function(e){var i=this;if("iframe-inside"===e.type)t("a, input[type=button], input[type=submit], button").on("mousedown.widgetstat",function(){i._click(e.classId+".anchors")});else if(e.wrapper.$("title").not(".yandex-hook-stat").mousedown(function(){i._click(e.classId+".title")}).addClass("yandex-hook-stat"),e.wrapper.$().length>0&&"raw"!==e.type){var n="#"+e.wrapper.$().attr("id")+" a:not(.yandex-hook-stat),";n+="#"+e.wrapper.$().attr("id")+" input[type=button],",n+="#"+e.wrapper.$().attr("id")+" input[type=submit],",n+="#"+e.wrapper.$().attr("id")+" button";try{t(n).off("mousedown.widgetstat").on("mousedown.widgetstat",function(){var n=t(this),o=e.classId+".anchors";if(n.attr("rev")){var s=n.attr("rev");if("none"===s)return;o=o+"."+s}i._click(o)})}catch(o){}}},_domloaded:!1,domLoaded:function(){if(this._domloaded)return!1;this._domloaded=!0;for(var t=0;t<this._widgets.length;t++)this._widgets[t]._inlineLoading?this._widgets[t].showPreloader():this._widgets[t]._inlinePending?this._widgets[t]._inlineFromHtml(this._widgets[t]._inlinePending):this._widgets[t].finalize()},setAutoreload:function(t){if(this.params.edit!==!0)if(t){var e=this.widgetAutoReloadTimers;if(t.params.rebind&&!e[t.id]){var i=t.params.rebind*widgetTiming,n=function(){e[t.id]=null,t.iReload()};e[t.id]=setTimeout(n,i)}}else for(var o=0;o<this._widgets.length;o++)this.setAutoreload(this._widgets[o])},unsetAutoreload:function(t){if(t){var e=this.widgetAutoReloadTimers,i=e[t.id];i&&(clearTimeout(i),e[t]=null)}else for(var n=0;n<this._widgets.length;n++)this.unsetAutoreload(this._widgets[n])},_storeCallback:function(t){return this._callbacks[this._callbackId]=t,this._callbackId++},_freeCallback:function(t){var e=this._callbacks[t];return delete this._callbacks[t],e},_postMessageTransport:function(t,e,i){var n={action:"message",wauth:t.getValue("wauth"),params:{message:e}},o=this.params.fullproxyDomain;i&&(n.params.callbackId=this._storeCallback(i)),window.parent.postMessage(JSON.stringify(n),o)},_iframeTransport:function(t,e,i){var n=this.params.fullproxyUrl;if(0===n.indexOf("http:")||0===n.indexOf("https:")||"/"===n.charAt(0)){this._xframe&&document.body.removeChild(this._xframe);var o=document.createElement("iframe");o.style.visibility="hidden",o.style.position="absolute",o.name="widget"+(Math.random()+"").substr(3,7),o.style.top=o.style.left=o.style.width=o.style.height=0,this._xframe=document.body.insertBefore(o,document.body.firstChild),this.xframeSrc(this._xframe,n+"#"+e,i)}},xframe:function(t,e,i,n){try{var o,s=y5Url();s.clearQuery(),s.addParams({wauth:t.getAuth(),name:e,value:i}),s.hash(encodeURIComponent(s.query())),s.clearQuery(),o=this.params.proxyDomain+"&"+s.hash(),"postMessage"in window?this._postMessageTransport(t,o,n):this._iframeTransport(t,o,n)}catch(r){}},_isCorrectWauth:function(t){var e=this.splitAuth(t),i=this.get(e.id);return i?i.getValue("wauth")===t:!1},onWindowMessage:function(t){var e,i;try{e=JSON.parse(t.data)}catch(n){return}e&&("callback"===e.action?e.params&&e.params.callbackId&&(i=this._freeCallback(e.params.callbackId),i&&i()):e.wauth&&this._isCorrectWauth(e.wauth)&&e.params&&e.params.message&&(this.xframeGet(e.params.message),e.params.callbackId&&t.source.postMessage(JSON.stringify({action:"callback",params:{callbackId:e.params.callbackId}}),t.origin)))},xframeGet:function(e){if(!this.inIframe){e.indexOf("wauth%3D")>0&&(e=decodeURIComponent(e));var i=new y5Url;i.query(e.replace(/^#/,""));var n=this.splitAuth(i.getParam("wauth")),o=this.get(n.id),s=i.getParam("value");if(o)switch(i.getParam("name")){case"Widget::setTitle":o.setTitle(s);
break;case"Widget::setIFrameHeight":o.setIFrameHeight(s);break;case"Widget::setPreferencesFormWidth":o.setPreferencesFormWidth(s);break;case"Widget::setPreferencesFormHeight":o.setPreferencesFormHeight(s);break;case"Widget::setPreferencesFormSize":var r=s.split(",");o.setPreferencesFormSize(r[0],r[1]);break;case"Widget::showPreferences":o.showPreferences();break;case"Widget::hidePreferences":var a,c="<>",u=decodeURIComponent(e).split(c);for(s=[],a=1;a<u.length;a++)s[s.length]=u[a];s=s.join(c);var l={},h=this.getValuesFromUrl(s);for(a=0;a<h.length;a++)l[h[a][0]]=h[a][1];(i.Query.wauth||[])[0]===o.getAuth()&&(""!==i.getParam("value")&&o.setValues(l),setTimeout(function(){o.loadFromSrc()},200),this.params.notifyChangesHandler(o)),t(window).trigger({type:"widgetSettingsTuned",id:o.id}),o.hidePreferences();break;case"Widget::dropPreferences":o.dropPreferences()}}},xframeSrc:function(e,i,n){var o;if(t.browser&&t.browser.msie){o=e.cloneNode(!0),o.style.position="absolute",o.style.visibility="hidden",o.id="";var s=function(){t(o).unbind("load",s),o.style.position="",o.style.visibility="",n&&n()};t(o).bind("load",s),o.src=i+"&rnd="+Math.random();try{document.body.appendChild(o)}catch(r){}}else t(e).one("load",function(){n&&n()}),e.src=i+"&rnd="+Math.random()},addToReloadQueue:function(t,e){t.id&&(this.widgetReloadQueue[t.id]={flag:!0,widget:t,callback:e})},processReloadQueue:function(){var t,e=function(t,e){var i=Math.round(4e3*Math.random());setTimeout(function(){t.reload(e),t._isNotReloaded=!0},i)};for(var i in this.widgetReloadQueue)this.widgetReloadQueue.hasOwnProperty(i)&&(t=this.widgetReloadQueue[i],t.flag&&(e(t.widget,t.callback),t.flag=!1))},showEditForm:function(e,i,n){var o=this.get(e);if(o.params.prefs_src!==this.undef()&&""!==o.params.prefs_src){var s=o.iframeElement(o.params.prefs_src,[],!0),r=s.attr("src");t(i).empty().append(s),s.attr("src",r+"&rnd="+Math.random()),s.bind("load",n)}else t.get(this.params.formUrl,{widget:o.getWidgetId(),wauth:o.getAuth(),dataType:"json",prefs_get:o.params.prefs_get?JSON.stringify(o.params.prefs_get):""},n)},getFontSize:function(){return this._fontSize||(this._fontSize=t(".widget").css("font-size")),this._fontSize},end:!0},Widget.Framework.init({jsonUrl:"",addUrl:"/adddata/",rawBodyUrl:"/inline/",formUrl:"/form.html",proxyUrl:"/xframeproxy.html",wauth:!1,idTemplate:/WIDGETID/g,idPrefix:"wd-",wrapperPrefix:"wd-",wrapperPostfix:"-",iframeHeight:"auto",iframeWidth:400,layoutFixed:!1,statParams:{pid:132,cid:2947},patternId:!1,yu:!1,is_default:!1,geoid:!1,region:!1,havePrefsFrom:!1,isWidgetNormal:!1,open_settings_on_add:!1,title:"",prefs_get:!1,locale:"ru",domain:"ru",dataLoadingText:" ",showPreferencesHandler:function(){},hidePreferencesHandler:function(){},notifyChangesHandler:function(){},preloader:"<div>#dataLoading#</div>"})}(jQuery),Widget.GetInstance=function(t){return Widget.Framework.get(t)},Widget.GetInstanceByWauth=function(t){return Widget.Framework.getByWauth(t)},Widget.Init=function(t){return Widget.Framework.init(t)},Widget.Bind=function(t,e){return Widget.Framework.bind(t,e)},Widget.BindOnAdd=function(t,e){return Widget.Framework.prebind(t,e)},$(document).ready(function(){Widget.Framework.domLoaded()}),Widget.Framework.focused=!0,$.browser&&$.browser.msie?($(document).bind("focusout",function(){Widget.Framework.focused=!1}),$(document).bind("focusin",function(){Widget.Framework.focused=!0})):($(window).focus(function(){Widget.Framework.focused=!0}),$(window).blur(function(){Widget.Framework.focused=!1}));var iframeWidget=Widget.Framework.bindIframe();iframeWidget?window.widget=iframeWidget:(window.WidgetMessaging=function(t){Widget.Framework.xframeGet(t)},$(window).on("resize",$.debounce(function(){var t=$(".widget").css("font-size");t!==Widget.Framework._fontSize&&(Widget.Framework._fontSize=t,Widget.Framework.all().forEach(function(t){t.adjustFontSize()}))},200))),"postMessage"in window&&$(window).bind("message",function(t){Widget.Framework.onWindowMessage(t.originalEvent)})}BEM.DOM.decl("stream-control",{_onClick:function(t){var e=t.data.domElem,i=e.data("stream-stat"),n={active:e.data("stream-active"),id:e.data("stream-id"),channel:e.data("stream-channel"),type:e.data("stream-type"),stream:e.data("stream"),fromBlock:e.data("stream-from")};home.stat.logPath("click",i),this.__self.play(n)}},{getContainer:function(){return $("body")},showLoader:function(){if(!this._open){var t=$(home.view("stream-control__loader",{}));t.appendTo(this.getContainer()),this._open=!0,t.on("click",".stream-control__close",function(){return this.hideAll(),!1}.bind(this)),this._loader=t,this._loader.show()}},hideAll:function(){this.hideLoader()},hideLoader:function(){this._open=!1,this._loader.off("click"),this._loader.remove()},downloadResources:function(t){var e,i,n,o=this._downloadPromise;return o||(e=new $.Deferred,i=new $.Deferred,t.jsUrl?(n=document.createElement("script"),n.src=t.jsUrl,document.documentElement.appendChild(n),n.onload=function(){i.resolve()}):i.resolve(),t.cssUrl?home.loadCss(t.cssUrl,{callback:function(){e.resolve()},noFlash:!0}):e.resolve(),o=this._downloadPromise=$.when(e,i)),o},_awaitData:function(){function t(){var i=home.getData("stream.stream");i?e.resolve(i):home["export"]?e.reject():setTimeout(t,100)}var e;return this._getDataPromise||(e=this._getDataPromise=new $.Deferred,t()),this._getDataPromise},_doPlay:function(t,e){return t&&BEM.DOM.blocks.stream?BEM.DOM.blocks.stream.play(t,e):void 0},play:function(t){this.showLoader();var e=this._currentEvent={},i={active:t.active,programParams:{from_block:t.fromBlock},container:this.getContainer()},n=t.stream,o=this.hideLoader.bind(this);return t.id&&(n={id:t.id,type:t.type}),this._waitResources().then(function(){return this._open&&this._currentEvent===e?t.channel?this.playChannel(t.channel,i):this._doPlay(n,i):void 0}.bind(this)).then(o,o)},_waitResources:function(){return this._awaitData().then(this.downloadResources.bind(this))},live:function(){this.liveBindTo("link","pointerclick",function(t){return this._onClick(t),!1}),this._awaitData().then(function(t){var e=t.clientData;e&&e.startChannel&&this.playChannel(e.startChannel,{programParams:{from_block:e.isDefaultChannel?"query_default_channel":"query_channel"}})}.bind(this))},playChannel:function(t,e){var i=this.hideLoader.bind(this);return t&&BEM.DOM.blocks.stream?BEM.DOM.blocks.stream.playChannel(t,$.extend({},e,{container:this.getContainer()})).then(i,i):(new $.Deferred).reject()}}),BEM.DOM.decl("stream-control",{},{live:function(){return this.liveBindKey("link","enter space",function(t){this._onClick(t),t.preventDefault()}),this.__base()}}),function(t){function e(t,e){function i(){!n&&e&&(n=!0,e.call(t))}var n;t.addEventListener&&t.addEventListener("load",i),t.attachEvent&&t.attachEvent("onload",i),"isApplicationInstalled"in navigator&&"onloadcssdefined"in t&&t.onloadcssdefined(i)}var i=function(e,i,n,o){function s(t){return c.body?t():void setTimeout(function(){s(t)})}function r(){u.addEventListener&&u.removeEventListener("load",r),o||(u.media=n||"all")}var a,c=t.document,u=c.createElement("link");if(i)a=i;else{var l=(c.body||c.getElementsByTagName("head")[0]).childNodes;a=l[l.length-1]}var h=c.styleSheets;u.rel="stylesheet",u.href=e,o?u.media=n||"all":u.media="only x",s(function(){a.parentNode.insertBefore(u,i?a:a.nextSibling)});var d=function(t){for(var e=u.href,i=h.length;i--;)if(h[i].href===e)return t();setTimeout(function(){d(t)})};return u.addEventListener&&u.addEventListener("load",r),u.onloadcssdefined=d,d(r),u};home.loadCss=function(t,n){var o=n||{},s=i(t,o.before,o.media,o.noFlash);o.callback&&e(s,o.callback)}}("undefined"!=typeof global?global:this),BEM.DOM.decl("etrains",{toggle:function(){var t=this;this.toggleMod("direction","rev"),home.stat.logPath("click","rasp."+t.params.counterType+".changeway")}},{live:function(){this.liveBindTo("direction","click",function(){this.toggle()})}}),BEM.DOM.decl({block:"etrains",modName:"client",modVal:"yes"},{init:function(){var t=this.domElem.data("widget"),e=this.params;if(t&&e.host){var i=e.host+"widgets/suburban/next_trains",n={locale:BEM.blocks["i-global"].param("locale")};["rasp_to","rasp_direction","rasp_from","minutes_forward","minutes_backward","n"].forEach(function(e){var i=t.getValue(e);i&&(n[e]=i)}),$.ajax({url:i,data:n,dataType:"jsonp",success:this.changeThis(function(e){this.draw(e),$(window).trigger({type:"widgetLoaded",id:t.id})}),error:this.changeThis(function(){this.clear(),$(window).trigger({type:"widgetLoaded",id:t.id})})})}},draw:function(t){var e,i;if(t){var n=!0,o=this.params.counterType;t.routes_forward.length||(n=!1),e=home.view("etrains__draw",{from:t.from.name,to:t.to.name,today:t.routes_forward,host:this.params.host,direction:n,counterType:o}),i=home.view("etrains__draw",{from:t.to.name,to:t.from.name,today:t.routes_backward,host:this.params.host,direction:!n,counterType:o}),e||i||(e=i="")}else e=i="";this.elem("tracks").append(e,i),home.stat.logDOMShow(this.domElem)},clear:function(){this.elem("tracks").empty()}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnEvent("init",function(t,e){this.init(e)})}}),BEM.DOM.decl("themes-promo",{onSetMod:{js:function(){var t=this.params,e=t.promos;this.LS_KEY="home:themes-promo-"+t.type,this.LS_KEY_THEME_PREFIX="home:themes-promo-ban-",this.now=new Date,this.expiresType=(new Date).setMonth(this.now.getMonth()+1),this.expiresSkin=(new Date).setMonth(this.now.getMonth()+2),this.now=this.now.getTime();for(var i=0,n=e.length;n>i;i+=1)if(this._canShow(e[i])){this.promo=e[i];break}this.promo&&(this.promo.dark&&this.setMod("dark","yes"),this.promo.closeCounter=this._getStatPath(this.promo.counter+".close"))},state:{shown:function(){home.subscribeData(home.stat.logDOMShow.bind(this,this.domElem)),this._hasStorage()&&this.bindTo("link","click",this._setPromo),this.bindTo("close close-icon","click",this._closePromo)}}},_canShow:function(t){return this._checkBlock(this.LS_KEY)&&this._checkBlock(this.LS_KEY_THEME_PREFIX+t.themes)},_checkBlock:function(t){if(!this._hasStorage())return!0;var e=this._getUnlockDate(t);return e?e-this.now<=0:!0},_closePromo:function(t){t.preventDefault(),home.localStorage.setItem(this.LS_KEY,this.expiresType),home.localStorage.setItem(this.LS_KEY_THEME_PREFIX+this.promo.themes,this.expiresSkin),this.promo.closeUrl&&((new Image).src=this.promo.closeUrl),this.delMod("state"),this.domElem.parent().addClass("themes-promo__gone")},_setPromo:function(t){t.preventDefault();var e=this.elem("link").attr("href"),i=this.params.curTheme,n=this.promo["default"];home.localStorage.setItem(this.LS_KEY_THEME_PREFIX+this.promo.themes,this.expiresSkin),$.ajax(this.promo.setThemeUrl).done(function(){window.location.href="/?prevTheme="+encodeURIComponent(i)+"&newTheme="+encodeURIComponent(n)}).fail(function(){window.location.href=e})},_getUnlockDate:function(t){return Number(home.localStorage.getItem(t))},_getStatPath:function(t){return"head.skinpromo."+t},_hasStorage:function(){return!home.disabledLS}}),BEM.DOM.decl({block:"themes-promo",modName:"type",modVal:"header"},{onSetMod:{js:function(){this.__base.apply(this,arguments);var t=this.promo;t&&t.href&&t.text&&(this.domElem.append(home.view("themes-promo__inner-header",{attrs:{href:t.href,"data-statlog":this._getStatPath(t.counter+".preview"),"data-statlog-redir":"0"},textMix:"default"!==this.params.curTheme?" link_black_yes":"",closeAttrs:home.getAttributes({"data-statlog":this._getStatPath(t.counter+".close"),"data-statlog-redir":"0","aria-label":home.l10n("promo.themes-promo__close"),tabindex:"0",role:"button"}),text:(t.title?t.title+" ":"")+t.text})),this.setMod("state","shown"))}},_canShow:function(t){return this.__base.apply(this,arguments)&&this._checkNotEqualCurrentTheme(t)},_checkNotEqualCurrentTheme:function(t){return t.themes!==this.params.curTheme}}),function(){"use strict";home.ltgtFilter=function(t){return String(t).replace(/</g,"&lt;").replace(/>/g,"&gt;")},home.urlFilter=function(t){return t.replace(/./g,function(t){return t.match(/[&@\/;:=+?$]/)?t:encodeURIComponent(t)})},home.capitalize=function(t){return t?t[0].toUpperCase()+t.substr(1):""},home.isXivaSupported=function(t){return!t.EditMode&&t.XivaUrl&&!t.isOldIE&&!t.isMSIE9},home.encodeParams=function(t){return JSON.stringify(t).replace(/"/g,"'")},home.getJPathValue=function(t,e){for(var i=t,n=e.split("."),o=0;i&&void 0!==i[n[o]];)i=i[n[o++]];return i instanceof Object?"":i},home.formatNumber=function(t,e,i){if(isNaN(t))return t;t+="",e=e||",",i=i||"&nbsp;";var n=t.lastIndexOf("."),o=[],s="",r=0,a="";for(-1!==n?s=e+t.substr(n+1):n=t.length;--n>-1;)a=t[n]+a,r++,3===r&&(o.push(a),a="",r=0);return a&&o.push(a),o.reverse().join(i)+s},home.deepExtend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(e[i]instanceof Array||"object"!=typeof e[i]?t[i]=e[i]:(t[i]=t[i]||{},home.deepExtend(t[i],e[i])));return t},home.rnd=function(){return String(Math.random()).substr(2)},home.randomInteger=function(t,e){var i=t+Math.random()*(e+1-t);return Math.floor(i)},home.getJPathValue=function(t,e){for(var i=t,n=e.split("."),o=0;i&&void 0!==i[n[o]];)i=i[n[o++]];return i instanceof Object?"":i}}(),function(){"use strict";var t=150,e="undefined"!=typeof detector&&!!detector.getCSS3TransformProperty();BEM.DOM.decl("domik2",{onSetMod:{js:function(){this.__base(this),this.hasMod("autotoggle")&&$("body").addClass("b-page_domik_autovisible"),this._shown=this.hasMod("expanded","yes"),this._logged=this.hasMod("logged","yes"),$(this.changeThis(function(){0===this.domElem.find(".domik2__dropdown-wrapper").length&&BEM.DOM.append(this.domElem,".domik2__dropdown-wrapper"),this._bindEvents()}))}},_bindEvents:function(){this._initUsermenu(),this._initSizes(),this._initToggle(),this._initSocial(),this._initMultiauthPromo(),this._initStale(),this._initMailCountUpdate()},_initToggle:function(){this.bindTo("toggler","mousedown",this._preventSelection),this.bindTo("toggler","click",function(t){this.hasMod("autotoggle")&&$(t.target).closest(".b-ico-arrow_down").length||this._toggleExpanded(),this.delMod("autotoggle"),$("body").removeClass("b-page_domik_autovisible")})},_initSocial:function(){this.bindTo("social-more","mousedown",this._preventSelection),this.bindTo("social-more","click",this._toggleSocialExpander),this.bindTo("dropdown-wrapper","scroll",function(){this.elem("dropdown-wrapper").scrollLeft(0)})},_preventSelection:function(t){t.preventDefault()},_initMultiauthPromo:function(){var t,e,i="doNotShowMultiAuthPromo",n=home.getData("domik2.multiauth");n&&(n.close&&((new Image).src=n.close),home.localStorage.getItem(i)||(t=$(n.html),this._appendSlide(t),e=function(){home.localStorage.setItem(i,1),this._nextSlide()},this.bindTo("dropdown-skip-multiauth","click",e),this.bindTo("dropdown-multiauth-close","click",e),this._afterAnimation(function(){home.stat.logDOMShow(t)})))},_initStale:function(){var t=this.findBlockInside("stale-not-me","button");t&&t.on("click",this.changeThis(function(){var t=this.findBlockInside("auth");t.logout(),this._nextSlide()}))},_initMailCountUpdate:function(){this.params.uid&&this.channel("mail").on("update",this.changeThis(function(t,e){this.params.uid===e.uid&&this._updateMailCounter(t,e)}))},_initUsermenu:function(){this._usermenu=this.findBlockInside("usermenu-popup","popup"),this._usermenu&&this._usermenu.on("hide",this.changeThis(function(){this.elem("usermenu-trigger").attr("aria-expanded","false")}))},_initSizes:function(){!this.hasMod("expanded","yes")&&this.hasMod("logged","yes")?this._collapsedNotificationsWidth=this.elem("collapsed-notifications").width():this._collapsedNotificationsWidth=0,this.elem("dropdown").css("height",this.elem("slide","type","current").height())},_afterAnimation:function(i,n){var o=this;!e||void 0!==n&&n!==!0?i.call(this):setTimeout(function(){i.call(o)},t)},_toggleExpanded:function(){var t,e=this.hasMod("expanded","yes");e=!e,this._shown=e,e&&!this._collapsedNotificationsWidth&&this.hasMod("logged","yes")&&(this._collapsedNotificationsWidth=this.elem("collapsed-notifications").width()),this._collapsedNotificationsWidth&&this.elem("collapsed-notifications").css("max-width",e?0:this._collapsedNotificationsWidth),this.toggleMod("expanded","yes",e),this._toggleBodyClass(),e||(t=this.findBlockInside("auth"),t&&t.hideError(),this.delMod(this.elem("collapsed-notifications"),"clickable")),this.trigger(e?"expanded":"collapsed"),this._afterAnimation(function(){this.elem("user-block").attr("tabindex",e?-1:null),e&&this.setMod(this.elem("collapsed-notifications"),"clickable","no"),this._saveState(e),this._sendStat(e?"expand":"collapse"),"undefined"!=typeof workerMessage&&workerMessage("update",{name:"domik",visible:this._shown})})},_saveState:function(t){var e=t?"setOn":"setOff",i=this.params[e];if(i)try{var n=$(".domik2__frame");n.length||(n=$('<iframe class="domik2__frame" name="domik2__frame" style="display:none"></iframe>'),$("body").append(n)),n.attr("src",i)}catch(o){}},_sendStat:function(t){home.stat.logPath("click",this.params.counters&&this.params.counters[t])},_toggleSocialExpander:function(){var t=!this.hasMod("social-expanded","yes");return this.toggleMod("social-expanded","yes"),this._sendStat("socialExpand"),this.setMod("social-expanded",t?"yes":"no"),this.elem("social-more").attr("aria-checked",t?"true":"false"),this.elem("auth-button").attr("tabindex",t?-1:106),!1},_nextSlide:function(){var t=this.elem("slide","type","current"),e=t.next();this.delMod(t,"type"),this.setMod(t,"animated","yes"),this.setMod(e,"visible","yes"),this.elem("dropdown").css("height",e.height()),this._afterAnimation(function(){this.setMod(t,"hidden","yes"),this.setMod(e,"type","current")})},_appendSlide:function(t){if(t){var e=this.elem("slider"),i=this.elem("slide","type","current");t.prependTo(e),this.setMod(t,"type","current"),this.setMod(i,"type","next"),this.elem("dropdown").css("height",t.height())}},_updateMailCounter:function(t,e){var i=!1,n=e.value;isNaN(n)||this._count===n||(this._count=n,i=!0),i&&this.elem("notification","type","mail").find(".domik2__notification-info").text(n),"undefined"!=typeof workerMessage&&workerMessage("update",{name:"mailCount",count:n})},_toggleBodyClass:function(){var t=this.hasMod("expanded","yes");$("body").toggleClass("b-page_domik_visible",t)},_showUserMenu:function(t){return this._usermenu?(this._usermenu.toggle(this.domElem),$(t.target).closest(".domik2__usermenu-trigger").attr("aria-expanded","true"),this._sendStat("userMenu"),!1):void 0}},{live:function(){return this.liveBindKey("social-more","space",function(){return this._toggleSocialExpander()}),this.liveBindTo("usermenu-trigger","click",function(t){return this._showUserMenu(t)}),this.liveBindKey("usermenu-trigger","space",function(t){return this._showUserMenu(t)}),!1}})}(),BEM.DOM.decl({block:"input",modName:"forgot",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateForgot)._updateForgot()}}},_updateForgot:function(){this.toggleMod(this.elem("forgot"),"visible","no","yes",!!this._val)}}),BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var t=this.elem("control");this.toggleMod("checked","yes",t.prop("checked")),this.toggleMod("focused","yes",t.isFocused())}},focused:{yes:function(){return this.__base.apply(this,arguments)===!1?!1:(this.setMod(this.elem("box"),"focused","yes"),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this.__base.apply(this,arguments),this.delMod(this.elem("box"),"focused"),this.afterCurrentEvent(function(){this.trigger("blur")})}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(t,e){this.elem("control").prop("checked",Boolean(e)),this.afterCurrentEvent(function(){this.trigger("change",{checked:Boolean(e)})}),this.setMod(this.elem("box"),"checked",e)},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onChange:function(t){this.toggleMod("checked","yes",t.target.checked)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.trigger("click",{domEvent:t}),this.setMod("focused","yes")},_onKeydown:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("control","keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo("control","keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo("control","change",function(t){this._onChange(t)}),this.__base()}}),function(){"use strict";BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.__base(),this.params.stat&&this.on("change",function(){home.stat.logPath("click",this.params.stat)})}}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("click",function(t){$(t.target).hasClass("checkbox")&&this.toggle()}),!1}})}(),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input"),this._password=this.findBlockInside("password","input"),this._button=this.findBlockInside("button","button2"),this._register=this.findBlockInside("register","button2"),this._remember=this.findBlockInside("remember","button2"),this._button||(this._button=this.findBlockInside("button","button")),this._register||(this._register=this.findBlockInside("register","button")),this._remember||(this._remember=this.findBlockInside("remember","button")),this._error=null,this._errorOwner=null,this._username.on("change",this._onInputChange,this),this._password.on("change",this._onInputChange,this),this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},_checkInput:function(t){var e=this,i=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),n=i.every(function(t){var i=t();return Array.isArray(i)?(e.showError(i[0],BEM.I18N("auth",i[1])),i[0].elem("control").attr("aria-invalid",!0),!1):!0});return n&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),n},_onInputChange:function(t){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._username.val(this._username.val().trim()),this._checkInput(!0)?(this._onSubmit(t),void this.trigger("submit",t)):!1},_onSubmit:function(t){this.disableButton().setRetpath(this.getRetpath(),!0),this.elem("timestamp").val((new Date).getTime())},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var i=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,i.hide().show(t)),this},hideError:function(){return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){return this._onInputChange(),this._register&&this._register.setUrl(this.getRegisterURL()),this._remember&&this._remember.setUrl(this.getRememberURL()),this},setRetpath:function(t){return this.elem("retpath").val(t),this},getRetpath:function(){return this.elem("retpath").val()},getRegisterURL:function(){return this._getPassportURL("registration")},getRememberURL:function(){return this._getPassportURL("restoration")},_getPassportURL:function(t){return this.params.passport+"/"+t+"?"+$.param({from:this.elem("from").val(),origin:this.elem("origin").val(),retpath:this.getRetpath()})},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{passport:BEM.blocks["i-global"].param("passport-host")}}},{_fromName:"from",_retpathName:"retpath",_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[---A-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=t.trim(),t=t.replace(/-\)/,"+)"),t=t.replace(/(\d)-/g,"$1"),t=t.replace(/\((\d+)\)/,"$1"),t=t.replace(/(^|\d+)\(/,"$1"),t=t.replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)},_getRetpath:function(){return BEM.blocks["i-global"].param("retpath")},_getPassportURL:function(t){var e=BEM.blocks["i-global"],i=e.param("passport-host"),n=e.param("passport-msg"),o=this._getRetpath();return[i,"/passport?mode=",t,n?"&"+this._fromName+"="+encodeURIComponent(n):"",o?"&"+this._retpathName+"="+encodeURIComponent(o):""].join("")},_getRegisterURL:function(){return this._getPassportURL("register")},_getRememberURL:function(){return this._getPassportURL("restore")},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}},_getValidators:function(t,e,i,n){var o=n.checkEmpty,s=this;return[function(){return o&&0===e.length?[t._username,"fill-input"]:!0},function(){return o&&0===i.length?[t._password,"fill-input"]:!0},function(){return/[--]/.test(i)?[t._password,"wrong-keyboard-layout"]:!0},function(){return s._isUsernameValid(e,!o)?!0:[t._username,"wrong-characters"]},function(){return s._isPasswordValid(i)?!0:[t._password,"wrong-characters"]},function(){return i&&i===e?[t._password,"wrong-password"]:!0}]}}),BEM.DOM.decl("auth",{logout:function(){if(this.params.logout){var t="frame"+parseInt(1e4*Math.random(),10),e=$('<form style="display:none" target="'+t+'" method="post" action="'+this.params.logout+'"></form>'),i=$('<iframe style="display:none" name="'+t+'"></iframe>');$("body").append(e,i),e.submit()}}}),BEM.DOM.decl("auth",{_onInputChange:function(){this.__base.apply(this),this._silentCheckInput(!0)?this.setMod(this.elem("button"),"color","yellow"):this.delMod(this.elem("button"),"color")},_silentCheckInput:function(t){var e=this,i=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),n=i.every(function(t){var e=t();return!Array.isArray(e)});return n}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._socialBroker=null,this._initSocialProviders()}}},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),i=this;if(e)i._createSocial(e);else{var n=t.param("social-host");if(!n)return;i._getSocialProviders(n,function(t){i._createSocial(t)})}},_getSocialProviders:function(t,e){$.getJSON(this.__self._getProvidersURL(t),function(t){e(t.providers)})},_createSocial:function(t){return t.length?(BEM.DOM.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),void(this._socialDropdown=this.findBlockInside("social","dropdown"))):(this.elem("social").remove(),void this.dropElemCache("social"))},_onSocialClick:function(t){var e=this;t.preventDefault(),this._socialDropdown&&this._socialDropdown.hide(),this._socialBroker&&this._socialBroker.destruct(),this._socialBroker=BEM.create("social-broker"),this._socialBroker.start(function(){var t=e.getRetpath(),i=this.__self._getTopWindow().location;t&&i.href!==t?i.href=t:i.reload()}.bind(this),$.noop,{provider:this.elemParams(t.data.domElem).provider})}},{live:function(){return this.liveBindTo("social-link","pointerclick",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){var e=t.keyCode===BEM.blocks.keycodes.SPACE;!e||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onSocialClick(t)}),this.__base(),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var i,n,o,s=[];return t=t.filter(function(t){return t.enabled}),n=this._buildSocialPrimary(t),s=s.concat(n),o=this._buildSocialSecondary(t),i=this._buildSocialMore(n,o,e,t),i&&s.push(i),s},_buildSocialPrimary:function(t){return t.filter(function(t){return t.primary}).map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}}}})},_buildSocialSecondary:function(t){return t.map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}},text:{mix:{block:"auth",elem:"social-text"},content:BEM.blocks["i-common__string"].escapeHTML(t.display_name)}}})},_buildSocialMore:function(t,e,i,n){if(t.length<n.length){var o=BEM.I18N("auth","more");return{block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:o,"aria-label":o},content:"  "},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:i}}],content:e}}]}}return!1},_getTopWindow:function(){return window.top},_socialStubHeight:24}),function(){"use strict";var t={SPACE:32};BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),Lego.params.statRoot&&this._socialDropdown&&this._socialDropdown.bindTo("switcher","click",function(){home.stat.logPath("click","mail.logout.domik.social_more")})}}},_onSocialClick:function(t){t.preventDefault();var e=BEM.blocks["i-global"],i=this.elemParams(t.data.domElem),n=i.provider;return this._socialDropdown&&this._socialDropdown.hide(),home.stat.logPath("click","mail.logout.domik.social_login."+n),i.url?(window.location=i.url,!1):void BEM.blocks["social-broker"].start(function(){var t,i=e.param("retpath");return i&&top.location.href!==i?(t=setTimeout(function(){top.location.href=i},5e3),void $.ajax({url:Lego.params["pass-host"]+"/services",data:{locale:BEM.blocks["i-global"].param("lang"),yu:$.cookie("yandexuid")},dataType:"jsonp",success:function(e){clearTimeout(t);for(var n=0,o=e.length;o>n;n++){var s=e[n].url&&(e[n].url.match(/^(?:https?:)?\/\/([^\/]+)/)||[])[1]||"";if(-1!==i.indexOf(s))return void(top.location.href=i)}top.location.reload()}})):void top.location.reload()},function(){},{provider:n})}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("social-link","keydown",function(e){e.which===t.SPACE&&this._onSocialClick(e)}),!1},
_buildSocial:function(t){var e=this.__base.apply(this,arguments),i=e[e.length-1];"dropdown"===i.block&&(i.content[0].content="",i.content[0].attrs={"aria-haspopup":"true","aria-expanded":"false","aria-label":BEM.I18N("auth","more")},i.content[1].js={directions:{to:"bottom",axis:"right",offset:{left:10}}});var n={};return x.each(t,function(t){n[t.code]=t.display_name}),x.each(e,function(t){"social-link"===t.elem&&(t.attrs=t.attrs||{},t.attrs.title=t.attrs["aria-label"]=n[t.js.provider],t.attrs.role="button")}),e}})}(),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0,this._salt=0}}},start:function(t,e,i){var n,o,s,r,a=this;if(this._onSuccess=t,this._onFailure=e,!this._hasLocalStorage())return void this.onFailure({status:"error"});this._cleanup(),i=$.extend({},a._getDefaultParams(),i),n=i.startUrl+"?",r=i.popupName,delete i.startUrl,delete i.popupName,o=i.display,s=i.retpath,this._salt=Math.floor(1e9*Math.random()).toString(16);var c=r+"_"+this._salt;return o&&"popup"!==o&&(i.retpath=i.retnopopup||i.retpath||window.location.href,delete i.retnopopup),i.retpath+=(-1!==i.retpath.indexOf("?")?"&":"?")+"social-broker_seed="+encodeURIComponent(c),n+=Object.keys(i).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(i[e])),t},[]).join("&"),o&&"popup"!==o?void this._navigate(n):(this._lsLoginStatusKey="login_status_from_"+c,this._window=window.open(n,c,this._getPopupParams(),!1),this._window?(this._window.focus(),clearInterval(this._timer),void(this._timer=setInterval(function(){var t;try{t=window.localStorage.getItem(a._lsLoginStatusKey)}catch(e){}if(a.isClosed()&&(clearInterval(a._timer),!t))return void a.onFailure({status:"error"});if(t){var i=a._deserialize(t);a._handleStatus(i)===!1&&a.onFailure({status:"error"})}},500))):void this.onFailure({status:"error"}))},_hasLocalStorage:function(){return!!window.localStorage},_deserialize:function(t){var e;try{e=JSON.parse(t)}catch(i){e={raw:t}}return e},_handleStatus:function(t){return"ok"===t.status?(this.onSuccess(t),!0):"error"===t.status?(this.onFailure(t),!0):!1},isClosed:function(){return this._window?this._window.closed:!0},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/common.blocks/social-broker/__closer/social-broker__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,i,n){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",i,", height=",n].join("")},_getPopupParams:function(){var t,e,i=this._windowWidth,n=this._windowHeight;return window.opera?(t=(screen.availWidth-i)/2,e=(screen.availHeight-n)/2):(t=(window.innerWidth-i)/2,e=(window.innerHeight-n)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,i,n)},_cleanup:function(){if(clearInterval(this._timer),this._lsLoginStatusKey)try{window.localStorage.removeItem(this._lsLoginStatusKey)}catch(t){}this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)},destruct:function(){this._cleanup(),this.__base.apply(this,arguments)}},{start:function(){this._current&&this._current.destruct(),this._current=BEM.create("social-broker"),this._current.start.apply(this._current,arguments)},onSuccess:function(){this._current.onSuccess.apply(this._current,arguments)},onFailure:function(){this._current.onFailure.apply(this._current,arguments)}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),function(){"use strict";BEM.DOM.decl({block:"auth",modName:"serverside",modValue:"yes"},{onSetMod:{js:function(){var t=this;t._button=t.findBlockInside("button","button"),t._username=t.findBlockInside("username","input"),t._password=t.findBlockInside("password","input"),t._password.on("change",t._onInputChange,t),t._username.on("change",t._onInputChange,t),t.redraw(),t._errorOn=null,t.bindTo("submit",t._onBeforeSubmit)}},_createSocial:function(){}})}(),function(){"use strict";BEM.DOM.decl({block:"auth",modName:"hint",modValue:"yes"},{_checkInput:function(t){var e=this,i=e.__self,n=e._username.val(),o=e._password.val();if(t){if(0===n.length)return e.showError(e._username,BEM.I18N("auth","fill-input")),!1;if(0===o.length)return e.showError(e._password,BEM.I18N("auth","fill-input")),!1}return i._isUsernameValid(n)?(e.hideError(),!0):(e.showError(e._username,BEM.I18N("auth","wrong-characters")),!1)}},{_isUsernameValid:function(t){return!/\s/.test(t)},_buildError:function(){var t=this.__base();return t.mods.theme="hint",t.mods["tail-size"]="xs",t.js.directions={to:"left",axis:"middle",offset:{left:-15}},t}})}(),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),i=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",i?"&yu="+i:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=window.devicePixelRatio,this._isRetina>1&&this.updateIcon()}}},_getIconPath:function(){var t=this.params.avatarHost,e=this.params.uid||BEM.blocks["i-global"].param("uid"),i=this._getIconSize(),n=(this._isRetina?"/islands-retina-":"/islands-")+i,o=[t,"/get-yapic/",e,n,"?rnd=",+new Date].join("");return o},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){var t=this._getIconPath();this._setIconBackground(t)},getDefaultParams:function(){return{avatarHost:"//avatars.yandex.net"}},_getIconSize:function(){return"middle"},redraw:function(){return this}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("pointerclick",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._url=this.params._url||this.domElem.attr("href")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("href")}}},getUrl:function(){return this._url},setUrl:function(t){return this._url=t,this.hasMod("disabled")||this.domElem.attr("href",t),this},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["ENTER"]})}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")}),this.__base()}}),BEM.decl("domik_type_popup",{destruct:function(){this._form&&this._form.destruct(),this._popup&&this._popup.destruct(),this.__base.apply(this,arguments)},create:function(){if(this._created)return this;var t,e,i=this.__self,n=i._buildTypePopup(this._uniqId,this.params.mods,this.params.js),o=$(BEMHTML.apply(n)),s=this.params.hidden;if(BEM.DOM.append(BEM.DOM.scope,o),e=this._popup=o.bem("popup"),t=this._form=this._popup.findBlockInside("auth"),s){var r=s.domElem;t.getUsernameBlock().val(r.find("input[name=login]").change().val()),t.getPasswordBlock().val(r.find("input[name=passwd]").change().val()),delete this.params.hidden,s.destruct()}return this._created=!0,this},open:function(){return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){BEM.blocks["i-ua"].ios||this._form.getUsernameBlock().setMod("focused","yes"),this._form.redraw()}),this)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShown()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e,i){var n=(i||{}).explain,o={block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:$.extend({_uniqId:t},i),mods:$.extend({type:"popup"},e),content:[n?{elem:"explain",content:n}:"",{block:"auth",mods:{content:"auto"}}]}}};return parseInt(BEM.blocks["i-ua"].ios,10)>=8?$.extend(o,{js:{left:"50%",top:150},attrs:{style:"position: absolute;"}}):o}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=60;this._dropdown=this.findBlockOutside("dropdown-menu"),this._dropdown&&this._dropdown.on("show",function(){this.bindToWin("scroll",$.throttle(this._hide,t,this)).redraw().domElem.attr("aria-expanded",!0)}.bind(this)).on("hide",function(){this.unbindFromWin("scroll").domElem.attr("aria-expanded",!1)}.bind(this))}}},_hide:function(){this._dropdown&&this._dropdown.hide()},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem("icon").length?this.elem("icon"):this.elem("name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=this.__self.getLogoutUrl();return this._dropdown._popup.findBlockInside("user").elem("logout").attr("href",t),this},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)}},{live:function(){return this._menu||(this._menu=!0,this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.SPACE&&this.domElem.click()})),this.__base(),!1}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._dropdown&&this._dropdown.on("show",function(){this.unbindFromWin("scroll")}.bind(this))}}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,i,n){return $.isFunction(i)||(n=i,i=this.params.onError),this._get(t,e,i,$.extend({},this.params,n)),this},_get:function(e,i,n,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){i.call(this.params.callbackCtx,r.data[s])},this):this._do(e,i,n,o)},_do:function(t,e,i,n){},_onSuccess:function(t,e,i,n){n.cache&&!this._preventCache&&this.putToCache(n,t,i),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(e,i,n){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(i,e);return o.data[s]=n,o.keys.push(s),this},dropCache:function(){return delete t[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),function(t){t.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,i,n){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:n.data?$.extend({},n.data,t):t},a=o._wrapCallback(function(i,s,r){o._onSuccess(o._buildCacheKey(t,n),t,i[0],n),o._allowCallback(s,r)&&e.apply(n.callbackCtx,i)}),c=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-- >0?setTimeout(function(){o._do.apply(o,s)},n.retryInterval):i&&i.apply(n.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields"].concat(n.paramsToSettings||[]),function(t,e){r[e]=n[e]}),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,i=this._number;return function(n){null!==n&&t(arguments,e,i)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})}(BEM),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){this.updateInformer(this.onUpdateSuccess,this.onUpdateError)}}},updateInformer:function(t,e){this._getExporter().get({},function(i){i&&i.counters&&void 0!==i.counters.unread?t.call(this,i.counters):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=t.unread,i=this.params.unreadMax;e&&i&&e>i&&(e=i+"+");var n=e?e+" ":"";BEM.DOM.update(this.domElem,n+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(this.params.caller),cache:!1,xhrFields:{withCredentials:!0},dataType:"json",callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(t){return"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/"+(t?t+"/":"")+"counters?silent"}}),BEM.DOM.decl({block:"user",modName:"login",modVal:"known"},{onSetMod:{js:function(){this.channel("auth").on("notme",function(){this.delMod("login")},this)}}}),function(){var t,e={};BEM.DOM.decl("notice",{onSetMod:{js:function(){var e=home.getData("notice.enabled");if(e){var i=this.getUid();i&&(this.updateByInit(),t||(t=!0,this.channel("mail").on("fresh",this.changeThis(this.updateByXiva))),this.valueFromCache(),this.channel("notice").on("up",this.changeThis(this.valueFromCache)))}}},getUid:function(){if(!this.uid){var t=this.findBlockOutside("user");this.uid=String(t.domElem.data("uid")||t.params.uid||"")}return this.uid},updateByInit:function(){var t=this.getUid();e[t]=this.params.count||0,this.channel("notice").trigger("up")},updateByXiva:function(t,i){if(i){var n=i.uid;n in e&&(e[n]=i.value,this.channel("notice").trigger("up"))}},needShowDot:function(){for(var t in e)if(e.hasOwnProperty(t)&&e[t]>0)return!0;return!1},valueFromCache:function(){var t=this.getUid();this.value(e[t])},value:function(t){t?this.delMod("state"):this.hasMod("mode","all")&&this.needShowDot()?this.setMod("state","dot"):this.setMod("state","off"),this.domElem.html(t||"")}})}(),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this._isRetina&&this.updateIcon()}}},_getIconPath:function(t){var e=this.params.avatarHost,i=this._getIconSize(),n=(this._isRetina?"/islands-retina-":"/islands-")+i;return[e,"/get-yapic/",t,n].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this.elem("icon").length&&this._setIconBackground(this._getIconPath(this.elemParams("icon").avatarId))},getDefaultParams:function(){return $.extend(this.__base(),{avatarHost:"//avatars.mds.yandex.net"})}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("usermenu",{_getEmbeddedAuth:function(){return this.auth?this.auth:this.auth=BEM.create("i-embeddedauth",this.params.auth)},_selectUser:function(t){var e=t.closest(".usermenu__user").data("uid");if(e)return this._getEmbeddedAuth().setData({uid:e},this.changeThis(this._switchResponse)).submit(),!1},_logoutUser:function(t){var e=t.closest(".usermenu__user-exit"),i=e.parent(),n=e.data("uid");if(n)return this._$userWrapper=i,this._getEmbeddedAuth().setData({uid:n,action:"logout"},this.changeThis(this._logoutResponse)).submit(),!1},_switchResponse:function(t){switch(t.status){case"ok":case"action-not-required":return void window.location.reload();default:window.location.href=this.params.passport}},_logoutResponse:function(t){var e=this._$userWrapper;switch(this._$userWrapper=null,t.status){case"ok":case"action-not-required":return void(e&&e.hide());default:window.location.href=this.params.passport}}},{live:function(){var t=function(t){return this._selectUser($(t.target))},e=function(t){return this._logoutUser($(t.target))};this.liveBindTo({elem:"user",modName:"clickable",modVal:"yes"},"pointerclick",t),this.liveBindKey({elem:"user",modName:"clickable",modVal:"yes"},"enter",t),this.liveBindTo("user-exit","pointerclick",e),this.liveBindKey("user-exit","enter",e)}}),BEM.decl("i-embeddedauth",{addCallback:function(t){var e="cb"+Math.random();return this.callbacks||(this.callbacks={}),this.callbacks[e]=t,e},addQueryParam:function(t,e){var i=t.split("?"),n=i[1]?i[1].split("&"):[];return n.push(e),i[1]=n.join("&"),i.join("?")},bindCallback:function(){var t=this;window.mordaAuth={onResponse:function(e){if(!e)return void t.processResponse();for(var i=e.split("?")[1].split("&"),n={},o=0,s=i.length;s>o;o++){var r=i[o].split("=");n[r.shift()]=decodeURIComponent(r.join("="))}t.processResponse(n)}}},submit:function(){this.getForm().trigger("submit")},setData:function(t,e){if(t=$.extend({},this.params.params||{},t),this.idkey&&(t.idkey=this.idkey),e){var i=this.addCallback(e);t.retpath=this.addQueryParam(t.retpath,"from="+i)}return this.getForm().html(this.stringifyParams(t)),this},setDomain:function(){var t=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{document.domain=t}catch(e){}},stringifyParams:function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=this.getInputHtml(i,t[i]));return e},getInputHtml:function(t,e){return'<input name="'+t+'" value="'+e+'"/>'},getForm:function(){if(this.form)return this.form;this.setDomain(),this.bindCallback();var t="embeddedauthframe"+parseInt(1e4*Math.random(),10);return this.form=$('<form style="display:none" target="'+t+'" method="'+(this.params.method||"post")+'" action="'+this.params.action+'"></form>'),this.frame=$('<iframe style="display:none" name="'+t+'"></iframe>'),$("body").append(this.form,this.frame),this.form},processResponse:function(t){var e=function(){};if(!t)return void this.trigger("no-data");switch(t.from&&this.callbacks[t.from]&&(e=this.callbacks[t.from],this.callbacks[t.from]=!1),this.idkey=t.idkey,t.status){case"login-empty":case"password-empty":case"account-not-found":case"password-invalid":case"action-not-required":case"ok":case"uid-empty":case"sessionid-invalid":case"session-no-uid":case"yu-empty":case"yu-invalid":case"captcha-invalid":case"captcha-required":return e(t),void this.trigger("data-received",t);case"internal-exception":return this.idkey="",this._interr?(e(t),void this.trigger("data-received",t)):(this._interr=!0,t.from&&(this.callbacks[t.from]=e),void this.submit());default:t.url?window.location=t.url:(e(t),this.trigger("data-received",t))}}}),BEM.DOM.decl({block:"domik2",modName:"freshexp",modVal:"enabled"},{_initMailCountUpdate:function(){this.params.uid&&this.channel("mail").on("fresh",this.changeThis(function(t,e){this.params.uid===e.uid&&this._updateMailCounter(t,e)}))},_updateMailCounter:function(t,e){var i=!1,n=e.value;isNaN(n)||this._count===n||(this._count=n,i=!0),n||(n="");var o=this.getMod("freshid"),s=n;if(n&&("2"===o?s+=" "+home.decline(n,home.l10n("mail.num.new_messages_short")):"3"===o&&(s+=" "+home.decline(n,home.l10n("mail.num.fresh_messages_short")))),i){var r=this.elem("collapsed-notifications"),a=this.elem("dropdown");this.findElem(r,"notification","type","mail").find(".domik2__notification-info").text(n||""),this.findElem(a,"notification","type","mail").find(".domik2__notification-info").text(s||"")}"undefined"!=typeof workerMessage&&workerMessage("update",{name:"mailCount",count:n})}}),$(function(){function t(t){var e;n=!0,e=t.bem("popup"),e.show(i)}function e(e,o){var s=$(".geosuggest"),r=$(o),a=$(e),c=s.find(".geosuggest__header")[0],u=c?c.onclick():{};s.length>0&&setTimeout(function(){var e;if("1"===u.ispopup){if(i=a,0===i.length)return!1;t(s)}else if(i=r,0===i.length)return!1;e=function(){t(s)},i.click(e),$(document).keydown(function(t){"27"===t.keyCode&&s.bem("popup").hide()}),s.bem("popup").on("hide",function(){n=!1}),"1"===u.ispopup&&s.bem("popup").on("hide",function(){i.unbind("click",e)}),$(window).resize(function(){setTimeout(function(){if(n){s.bem("popup")._isShowed=!1,s.bem("popup").show(i),n=!0;try{document.body.focus()}catch(t){}}},142)}),$(".b-region__ajax-action").click(function(){return $(document.body).append('<iframe style="display:none" src="'+this.href+'"></iframe>'),s.bem("popup").hide(),!1})},1e3)}var i,n=!1;e(".link_geosuggest_yes",".link_geosuggest_yes")}),BEM.DOM.decl("headline-mail",{onSetMod:{js:function(){this.params.uid&&this.channel("mail").on("update",this.changeThis(this.update))}},update:function(t,e){e.uid===this.params.uid&&this.elem("count").html(e.value)}}),BEM.DOM.decl({block:"themes-promo",modName:"type",modVal:"popup"},{onSetMod:{js:function(){var t=$(window);if(!(t.width()<951||t.height()<400||$("body").hasClass("b-page_win10-stripe")&&t.width()<1400)){this.__base.apply(this,arguments);var e=this.promo,i=this.params;if(this.promo.from_atom){var n=$("html").hasClass("i-ua_inlinesvg_yes");n&&this.promo.icon_svg?this.promo.imgSrc=this.promo.icon_svg:i.icon&&(this.promo.imgSrc=e.icon)}else this.promo.imgSrc=i.imgRoot+this.promo.counter+".jpg";this.elem("link").attr({href:e.href,title:e.text,"data-statlog":this._getStatPath(e.counter+".preview"),"data-statlog-redir":"0"}),this.elem("title").html(e.title),this.elem("text").html(e.text),this.elem("close-icon").attr({"data-statlog":e.closeCounter,"data-statlog-redir":"0"});var o=$('<img class="themes-promo__img"/>');o.one("error",function(){$(this).hide()}),o.one("load",this.changeThis(function(){this.elem("image").append(o),this.showUrl&&((new Image).src=e.showUrl),this.setMod("state","shown")})),o.attr("src",e.imgSrc)}},state:{shown:function(){this.__base.apply(this,arguments),this.findBlockOutside("footer").setMod("themes","promo")}}},_getStatPath:function(t){return"skinpromo."+t}}),BEM.DOM.decl({block:"themes-promo",modName:"type",modVal:"revert"},{onSetMod:{js:function(){this.elem("close-icon").attr({"data-statlog":"head.skinpromo.revert.close","data-statlog-redir":"0"}),this.bindTo("close-icon","click",this.setMod.bind(this,this.domElem,"state","nothing")),this.delMod("state"),home.subscribeData(home.stat.logDOMShow.bind(this,this.domElem))}}}),BEM.DOM.decl("tv-stream-promo",{onSetMod:{js:function(){this._hideTimeout=null,this._visible=!1,setTimeout(this._checkVisibility.bind(this),this.__self.SHOW_TIMEOUT),this.bindTo("link close","click",this._hide),this.bindToWin("resize",$.throttle(this._checkVisibility),this.__self.THROTTLE_TIMEOUT)}},_checkVisibility:function(){!this._visible&&this.domElem.is(":visible")&&BEM.blocks["i-message-locker"].acquireLock("tv-stream-promo").then(function(){this.setMod("visibility","visible"),this._visible=!0,this.params.show_url&&((new Image).src=this.params.show_url),this._hideTimeout=setTimeout(this._hide.bind(this),this.__self.HIDE_TIMEOUT)}.bind(this))},_hide:function(){clearTimeout(this._hideTimeout),this.params.close_url&&((new Image).src=this.params.close_url),this.delMod("visibility"),this.unbindFromWin("resize"),BEM.blocks["i-message-locker"].releaseLock("tv-stream-promo"),setTimeout(function(){this.destruct()}.bind(this),this.__self.DESTRUCT_TIMEOUT)}},{SHOW_TIMEOUT:1e3,HIDE_TIMEOUT:1e4,DESTRUCT_TIMEOUT:200,THROTTLE_TIMEOUT:200}),function(){"use strict";var t=$.Deferred();$(function(){t.resolve()}),BEM.decl("i-message-locker",{},{blockOrder:[],acquireLock:function(t){var e,i=$.Deferred(),n=this;return this._initOrder(),t in this._blockOrderMap&&!this._locked?(e=this._blockOrderMap[t],!this._showPretender||this._showPretender.index>e?(this._showPretender?this._showPretender.deferreds.forEach(function(t){t.reject()}):this._initDelay.done(function(){setTimeout(function(){var t=n._showPretender.deferreds;n._locked=n._showPretender.name,n._showPretender=null,t.forEach(function(t){t.resolve()}),BEM.channel("i-message-locker").trigger("lock",n._locked)},0)}),this._showPretender={name:t,deferreds:[i],index:e}):this._showPretender&&this._showPretender.name===t?this._showPretender.deferreds.push(i):i.reject(),i):i.reject()},releaseLock:function(t){this._locked&&this._locked===t&&(this._locked="",BEM.channel("i-message-locker").trigger("unlock",t))},_blockOrderMap:void 0,_showPretender:void 0,_locked:"",_initDelay:t,_initOrder:function(){if(!this._blockOrderMap){this._blockOrderMap={};for(var t=0;t<this.blockOrder.length;++t)this._blockOrderMap[this.blockOrder[t]]=t}}})}(),BEM.decl("i-message-locker",{},{blockOrder:["media-popup","b-hs-balloon","dist-popup","themes-touch-promo","tv-stream-promo","hockey-promo","media-grid__promo-stripe","media-disaster"]}),BEM.DOM.decl("themes-touch-promo",{onSetMod:{js:function(){var t=this.__self.LS_KEY,e=$(window),i=this,n=this.hasMod("type","sms")?3e4:15e3;!home.localStorage||home.disabledLS||home.localStorage.getItem(t)||e.width()<951||e.height()<520||$("body").hasClass("b-page_win10-stripe")&&e.width()<1400||setTimeout(function(){BEM.blocks["i-message-locker"].acquireLock("themes-touch-promo").then(function(){home.localStorage.setItem(t,"1"),i.setMod("visible","yes"),i.bindTo("button reload","click",function(){i._submit()}),i.bindTo("close","click",function(){i._close(),home.stat.logPath("click",i.params.counters.close)}),setTimeout(i.changeThis(i._close),n),home.stat.logPath("show",i.params.counters.show),i.hasMod("type","sms")&&home.stat.logPath("show","skintouchpromo.sms.button")})},1e3)}},_submit:function(){var t=this;return this.params.sk&&(this._sk=this.params.sk,this.setMod("progress","yes"),this.setMod("submitted","yes"),$.ajax({url:"/portal/proxy/sms/submit",type:"POST",xhrFields:{withCredentials:!0},data:{sk:this._sk},success:function(e){t._processSendResult(e)},error:function(){t._processSendResult({ok:0})},dataType:"json"})),!1},_processSendResult:function(t){1===t.ok&&t.track_id?this._sendTrackId(t.track_id):this._processError("submit"),this.delMod("progress")},_sendTrackId:function(t){var e=this,i={track_id:t,sk:this._sk};return $.ajax({url:"/portal/proxy/sms/commit",type:"POST",xhrFields:{withCredentials:!0},data:i,success:function(t){e._processSendSmsResult(t)},error:function(){e._processSendSmsResult({ok:0})},dataType:"json"}),!1},_processError:function(t){this.setMod("error","yes"),home.stat.logPath("show","skintouchpromo.sms.error."+t),home.stat.logPath("show","skintouchpromo.sms.reload")},_processSuccess:function(){this.delMod("error"),this.setMod("done","yes"),home.stat.logPath("show","skintouchpromo.sms.success")},_processSendSmsResult:function(t){this.delMod("progress"),1===t.ok?this._processSuccess():this._processError("commit")},_close:function(){BEM.blocks["i-message-locker"].releaseLock("themes-touch-promo"),this.delMod("visible")}},{LS_KEY:"themesTouchPromoShown"}),$(document).ready(function(){!function(){function t(){return $(".b-mobile-balloon")[0].onclick()}$(".b-mobile-balloon__button_yes").click(function(){document.location.href=t().url}),$(".b-mobile-balloon__button_no").click(function(){var e=t().statNo;(new Image).src=t().closeurl,e&&home.stat.logPath("click",e),$(".b-mobile-balloon").hide(),setTimeout(function(){$(window).trigger("popupredraw.lego")},100)})}()}),function(){function t(t){return home&&home.getData&&home.getData(t)}function e(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return e.join(",")}function i(){return s||BEM.blocks["i-global"].param("click-href")+"click"}function n(n,o,s){var r=t("timing.vars");if(r){var a,c=n.startTime,u="/dtype=stred/pid=1/cid=72202";u+="/reqid="+home.getData("timing.reqid"),u+="/path=690.2044";var l={1040.318:Math.round(n.responseEnd-c)};n.domainLookupStart&&(l[1036]=Math.round(n.domainLookupStart-c),l[1037]=Math.round(n.domainLookupEnd-n.domainLookupStart),l[1038]=Math.round(n.connectEnd-n.connectStart),l[1039]=Math.round(n.responseStart-n.requestStart),l[1040]=Math.round(n.responseEnd-n.responseStart)),n.secureConnectionStart>0&&(l[1676]=n.secureConnectionStart-n.connectStart);for(a in r)r.hasOwnProperty(a)&&(l[a]=r[a]);for(a in s)s.hasOwnProperty(a)&&(l[a]=s[a]);for(a in l)l[a]<0&&delete l[a];l[1042]=encodeURIComponent(navigator.userAgent),u+="/vars="+e(l),o&&(u+="/cdn="+o),u+="/slots="+(t("exp.data")||"")+"/*",(new Image).src=i()+u}}function o(t,e){return window[t]?void e():void setTimeout(function(){o(t,e)},r)}if(!window.performance||!window.performance.getEntries)return void(home.resourcesTiming={setClckHost:function(){},wait:function(){},send:function(){}});var s="",r=1e3;home.resourcesTiming={setClckHost:function(t){s=t},send:function(t,e,i){try{var o=window.performance.getEntries("resources");if(o&&o.length)for(var s=0,r=o.length;r>s;s++)if(o[s].name.indexOf(t)>-1)return void n(o[s],e,i)}catch(a){return}},wait:function(t,e){o(t,e)}}}(),$(document).ready(function(){var t=home&&home.getData&&home.getData("nearestjs.data");t&&setTimeout(function(){var e="//yastatic.net/"+t.file;$.getScript(e),home.resourcesTiming.wait("YaStaticRegion",function(){home.resourcesTiming.send(e,window.YaStaticRegion,{143:t.name})})},t.timeout)}),BEM.DOM.decl("desk-notif-card",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.optionsPopup=this.elem("options"),this.bindTo("action-toggle","click",this._onOptionsClick),this.bindTo("action-close","click",this._onClose),this.bindTo("popup-action-close","click",this._onActionFromPopup.bind(this,"close")),this.bindTo("popup-action-ban","click",this._onActionFromPopup.bind(this,"ban")),BEM.channel("desk-notif-card").on("ban",function(t,e){e.name===this.params.name&&e.type===this.params.type&&this._hideCard()}.bind(this)),this.dropdown=this.findBlockInside("dropdown-menu"),this.dropdown&&this.dropdown.on("hide",function(){this.delMod("hovered")},this)}},_onOptionsClick:function(){
this.setMod("hovered","yes"),home.stat.logDOMShow(this.optionsPopup,{visibilityCheck:!1})},_onClose:function(){this._hideCard(),this._sendAction("close")},_sendAction:function(t){var e=this.params&&this.params.actions;e&&e[t]&&((new Image).src=e[t])},_hideCard:function(){var t=this.domElem.parent();this.setMod(t,"state","hidden")},_onActionFromPopup:function(t){this.dropdown.hide(),"close"===t&&(this._hideCard(),this._sendAction(t)),"ban"===t&&BEM.channel("desk-notif-card").trigger("ban",{name:this.params.name,type:this.params.type})},_showClientCard:function(){var t=this.domElem.parent();!this.hasError&&this.hasMod(t,"state","hidden")&&(this.delMod("loading"),t.appendTo(t.parent()),this.delMod(t,"state"),setTimeout(function(){this.delMod(t,"position"),home.stat.logDOMShow(t)}.bind(this),0))}}),function(){"use strict";var t=150,e="undefined"!=typeof detector&&!!detector.getCSS3TransformProperty();BEM.DOM.decl("domik3",{onSetMod:{js:function(){this.__base(this),this._logged=this.hasMod("logged","yes"),$(this.changeThis(function(){0===this.domElem.find(".domik3__dropdown-wrapper").length&&BEM.DOM.append(this.domElem,".domik3__dropdown-wrapper"),this._bindEvents()}))}},_bindEvents:function(){this._initSizes(),this._initSocial(),this._initStale()},_initSocial:function(){this.bindTo("social-elsemore","mousedown",this._preventSelection),this.bindTo("social-elsemore","click",this._toggleSocialExpander),this.bindTo("dropdown-wrapper","scroll",function(){this.elem("dropdown-wrapper").scrollLeft(0)})},_preventSelection:function(t){t.preventDefault()},_initStale:function(){var t=this.findBlockInside("stale-not-me","button");t&&t.on("click",this.changeThis(function(){var t=this.findBlockInside("auth");t.logout(),this._nextSlide()}))},_initSizes:function(){this._collapsedNotificationsWidth=0,this.elem("dropdown").css("height",this.elem("slide","type","current").height())},_afterAnimation:function(i,n){var o=this;!e||void 0!==n&&n!==!0?i.call(this):setTimeout(function(){i.call(o)},t)},_saveState:function(t){var e=t?"setOn":"setOff",i=this.params[e];if(i)try{var n=$(".domik3__frame");n.length||(n=$('<iframe class="domik3__frame" name="domik3__frame" style="display:none"></iframe>'),$("body").append(n)),n.attr("src",i)}catch(o){}},_sendStat:function(t){home.stat.logPath("click",this.params.counters&&this.params.counters[t])},_toggleSocialExpander:function(){var t=!this.hasMod("social-expanded","yes"),e=parseInt(this.elem("dropdown").css("height"),10);if(e){var i=t?32:-32;this.elem("dropdown").css("height",e+i)}return this.elem("qr-button").toggle(),this.toggleMod("social-expanded","yes"),this._sendStat("socialExpand"),this.setMod("social-expanded",t?"yes":"no"),this.elem("social-elsemore").attr("aria-checked",t?"true":"false"),this.elem("auth-button").attr("tabindex",t?-1:106),!1},_nextSlide:function(){var t=this.elem("slide","type","current"),e=t.next();this.delMod(t,"type"),this.setMod(t,"animated","yes"),this.setMod(e,"visible","yes"),this.elem("dropdown").css("height",e.height()),this._afterAnimation(function(){this.setMod(t,"hidden","yes"),this.setMod(e,"type","current")})},_appendSlide:function(t){if(t){var e=this.elem("slider"),i=this.elem("slide","type","current");t.prependTo(e),this.setMod(t,"type","current"),this.setMod(i,"type","next"),this.elem("dropdown").css("height",t.height())}}},{live:function(){return this.liveBindKey("social-elsemore","space",function(){return this._toggleSocialExpander()}),!1}})}(),BEM.DOM.decl({block:"desk-notif-card",modName:"mail",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._initMailCountUpdate()}},_initMailCountUpdate:function(){this.params.uid&&this.channel("mail").on("update",function(t,e){this.params.uid===e.uid&&this._updateMailCounter(t,e)}.bind(this))},_updateMailCounter:function(t,e){var i=!1,n=e.value;isNaN(n)||this._count===n||(this._count=n,i=!0),i&&this.elem("personal-second").text(n),"undefined"!=typeof workerMessage&&workerMessage("update",{name:"mailCount",count:n})}}),BEM.DOM.decl({block:"desk-notif-card",modName:"disaster",modVal:["yes","fatal"]},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.popup=this.findBlockOn("disaster-popup","popup"),this.popup&&this.bindTo("link","click",this._showPopup)}},_showPopup:function(){this.popup.show(),home.stat.logDOMShow(this.popup.domElem)}}),BEM.DOM.decl({block:"desk-notif-card",modName:"route",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.routes={},this.placeholder={gohome:this.elem("route-gohome"),gowork:this.elem("route-gowork")},this.bindTo("action-route-switch","click",this._switchDirection),this._changeDirectionTo(this._getDirection())}},_changeDirectionTo:function(t){return this.direction=t,this.from="gohome"===t?"gowork":"gohome",this.setMod("loading","yes"),this._getRouterData().then(this._transformRouterData.bind(this)).then(this._renderRoute.bind(this)).then(this._showRoute.bind(this)).then(this._showClientCard.bind(this)).fail(this._errorHandler.bind(this))},_errorHandler:function(t){this.hasError=!0,this.setMod("loading","no");var e=this.from;this.from=this.direction,this.direction=e,home.stat.logPath("tech","notifications.route."+t)},_switchDirection:function(){this._changeDirectionTo(this.from).then(this._saveDirection.bind(this))},_saveDirection:function(){if(home.localStorage&&!home.localStorage.disabledLS){var t;t="gowork"===this._getAutoDirectionTime()?this.__self._getWorkEnd():this.__self._getHomeEnd(),home.localStorage.setItem("traffic."+this.params.id,JSON.stringify({direction:this.direction,validUntil:t}))}},_showRoute:function(){var t=this.elem("route-placeholder");t.height(this.placeholder[this.direction].height()),this.setMod("direction",this.direction),this.setMod("loading","no")},_renderRoute:function(){var t,e=this.direction,i=this.placeholder[e],n=this.routes[e];t=n.jamsNumber>6?"red":n.jamsNumber>3?"yellow":"green";var o=n.title+" "+n.timeText,s=home.l10n("traffic.personal.inbypasslink").replace(" %time","&nbsp;"+n.otherWayTimeBenefitText);i.html(home.view("desk-notif-card__inner",{link:home.view("home-link",{href:n.href,mix:" desk-notif-card__link",attrs:{"aria-label":o,"data-statlog":"notifications.route."+e+".card"},mods:{pseudo:"yes"}},{}),title:o,details:n.otherWayShow?home.view("home-link",{href:n.aroundHref,content:s,mix:" desk-notif-card__details-link",attrs:{"aria-label":s,"data-statlog":"notifications.route."+e+".bypass"},mods:{pseudo:"yes",grey:"yes"}},{}):"",iconSrc:this.params.jamIcons[t]}))},_getDirection:function(){var t="traffic."+this.params.id;if(home.localStorage&&!home.localStorage.disabledLS){var e=home.localStorage.getItem(t);if(e){var i=JSON.parse(e);if(home.now().getTime()<i.validUntil)return i.direction}}return this._getAutoDirection()},_getRouterData:function(){var t=this.params.routeData,e=this.__self,i=!0,n=!0,o=this.direction,s=e._getRouterApiOrCahedRawData(t,o,!i,!n),r=e._getRouterApiOrCahedRawData(t,o,i,n);return $.when(s,r).then(function(s,r){return s.blocked&&(r=e._getRouterApiOrCahedRawData(t,o,i,!n)),$.when(s,r)}).then(function(t,i){return{directJamData:t,aroundJamData:i,otherWayShow:e._ifOtherWayShow(t,i),timeDelta:t.jamsTime-i.jamsTime,lengthDelta:i.length-t.length}})},_getAutoDirection:function(){return this.params.direction?this.params.direction:this._getAutoDirectionTime()},_getAutoDirectionTime:function(){if(this.params.directionTime)return this.params.directionTime;var t=home.now().getHours();return 15>t&&t>=3?"gowork":"gohome"},_transformRouterData:function(t){var e=this.__self,i=t.directJamData.blocked,n=t.directJamData.jamsTime,o=t.directJamData.jamRating,s=t.aroundJamData.jamsTime,r=n-s;i&&(n=s,o=t.aroundJamData.jamRating),this.routes[this.direction]={title:this.params.pointTitles[this.direction],timeText:e._getHumanTime(n),otherWayTimeBenefitText:e._getHumanTime(r),jamsNumber:o,href:e._getMapURL(this.params.routeData,this.direction,i||!1,!1,this.params.mordaZone),aroundHref:e._getMapURL(this.params.routeData,this.direction,!0,!0,this.params.mordaZone),otherWayShow:t.otherWayShow}}},{_getPrettyPrintTime:function(t){var e="",i=0;return isNaN(t)?"":(Math.floor(t/3600)>0&&(e+=Math.floor(t/3600)+home.l10n("traffic.personal.hour_abbr")),i=Math.floor(t%3600/60),0===i&&t>=3600?e:e+i+home.l10n("traffic.personal.minutes_abbr"))},_getHumanTime:function(t){var e;switch(!0){case 1800>t:e=this._getPrettyPrintTime(t);break;case t>=1800&&2400>t:e=home.l10n("desktopNotifications.route.halfhour");break;case t>=2400&&3e3>t:e=this._getPrettyPrintTime(5*Math.round(t/300)*60);break;case t>=3e3&&4800>t:e=this._getPrettyPrintTime(10*Math.round(t/600)*60);break;case t>=4800&&6e3>t:e=home.l10n("desktopNotifications.route.hour_and_half");break;case t>=6e3:e=this._getPrettyPrintTime(15*Math.round(t/900)*60);break;default:e=this._getPrettyPrintTime(t)}return e},_getCoords:function(t,e){return t+","+e},_getWorkEnd:function(){var t=home.now();return new Date(t.getFullYear(),t.getMonth(),t.getDate(),15).getTime()},_getHomeEnd:function(){var t=home.now();return t.getHours()<3?new Date(t.getFullYear(),t.getMonth(),t.getDate(),3).getTime():new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,3).getTime()},_calcJamRating:function(t,e,i){var n=1,o=i/1e3;500>i?n=.5:1>o?n=.75:o>=15&&80>o?n=1/65*(o-15)+1:o>=80&&(n=2);var s=n*(e/t-1)*100,r=0;return s>=0&&(r=0),s>15&&(r=1),s>32&&(r=2),s>53&&(r=3),s>76&&(r=4),s>102&&(r=5),s>133&&(r=6),s>168&&(r=7),s>255&&(r=8),s>441&&(r=9),s>725&&(r=10),r},_getRouterApiOrCahedRawData:function(t,e,i,n){var o=3e5,s=this,r=s._getJamRequestURL(t,e,i,n),a=s.cache[r];return a&&a.timestamp>home.now().getTime()?$.when(JSON.parse(a.data)):$.ajax({method:"get",url:r,cache:!1,timeout:5e3}).then(function(t){if(!t||!t.properties||!t.properties.RouterRouteMetaData)return $.Deferred().reject("parseData").promise();var e=t.properties.RouterRouteMetaData;return e.jamRating=s._calcJamRating(e.time,e.jamsTime,e.length),s.cache[r]={data:JSON.stringify(e),timestamp:home.now().getTime()+o},e},function(){return $.Deferred().reject("getData").promise()})},_getViaPoints:function(t,e){return"gohome"===e?t.transit&&t.transit.reverse&&t.transit.reverse.length?t.transit.reverse.map(function(t){return this._getCoords(t.longitude,t.latitude)},this):[]:"gowork"===e?t.transit&&t.transit.direct&&t.transit.direct.length?t.transit.direct.map(function(t){return this._getCoords(t.longitude,t.latitude)},this):[]:void 0},_getGeo:function(t){return{home:this._getCoords(t.start.longitude,t.start.latitude),work:this._getCoords(t.finish.longitude,t.finish.latitude)}},_getStringifiedPoints:function(t,e,i){var n=i?[]:this._getViaPoints(t,e),o=this._getGeo(t),s=o.work,r=o.home;return["gowork"===e?r:s].concat(n).concat("gowork"===e?s:r).join("~")},_getStringifiedViaIndices:function(t,e){return x.map(this._getViaPoints(t,e),function(t,e){return e+1}).join(",")},_getJamRequestURL:function(t,e,i,n){var o=home.getData("route.isOldRouterUrl")?"https://route-maps.yandex.ru/1.x/":"https://geointernal.mob.maps.yandex.net/v1/router",s="AE_AjkgBAAAAVhRKNwIAC8tjU2RrhP-ZqBu8wUeLshaL0DUAAAAAAAAAAABvwCsB0jR6VKSmbT2ZrfeIDgc8bg==~AIjAjkgBAAAAbw43bgIAgoFaZzyAbV54HVt9PueO4c4w-5gAAAAAAAAAAAA64IjoDNvFTVN2SEqaZO38eh_fMw==~AO0V1EoBAAAAXeYMcQIA4dz0va7f19syy0BH94hwX7A9UG0AAAAAAAAAAAD3lBnSWu6wycdxwJyqkjrsJq3h3A==~ADrvmUsBAAAAEuIoNgIAU-whpUtOm5vBI8pcu2WlXzbw-IIAAAAAAAAAAAB2U9cWHgwge4qxtX7jBWIO9cRhgQ==",r=this._getStringifiedPoints(t,e,n),a=this._getStringifiedViaIndices(t,e);return o+"?rll="+r+"&output=time"+(a&&!n?"&via="+a:"")+(i?"&mode=jams":"")+"&key="+s+"&format=json"},_getMapURL:function(t,e,i,n,o){var s=this._getStringifiedPoints(t,e,n),r=!n&&this._getStringifiedViaIndices(t,e);return"https://yandex."+o+"/maps/?rt="+s+"&l=map,trf,trfe&rtm="+(i?"dtr":"atm")+"&rtt=auto"+(r?"&via="+r:"")},_ifOtherWayShow:function(t,e){if(t.blocked)return!1;if(t.jamRating<=3)return!1;var i=t.jamsTime-e.jamsTime,n=e.length-t.length;return 600>i||i/t.jamsTime<.1?!1:t.length<3e4&&5e3>n?!0:t.length>3e4&&n/t.length<.3},cache:{}}),BEM.DOM.decl("b-votes",{onSetMod:{js:function(){this.bindTo("cross","pointerclick",function(){return this.setMod("state","hidden"),$(window).trigger("popupredraw.lego"),this.params.closeUrl&&((new Image).src=this.params.closeUrl),!1})}}}),BEM.DOM.decl({block:"b-votes",modName:"ie",modVal:"true"},{onSetMod:{js:function(){this.__base(),this.updateSelectors(),this.bindToWin("resize",$.debounce(this.updateSelectors,150))}},updateSelectors:function(){var t=BEM.DOM.win.width(),e=[],i=[];[1e3,1070,1140,1210,1280].forEach(function(n){var o="b-votes_gte_"+n;t>=n?e.push(o):i.push(o)}),this.domElem.removeClass(i.join(" ")),this.domElem.addClass(e.join(" "))}}),BEM.DOM.decl({name:"i-flashcookie",modName:"type",modVal:"inline"},{onSetMod:{js:{inited:function(){Lego.block["i-flashcookie"].call(this.domElem,this.params)}}}}),function(){var t=Lego.block["i-flashcookie"],e=function(t){function e(t,e){return'<param name="'+t+'" value="'+e+'" />'}function i(t,e){return" "+t+'="'+e+'"'}function n(t,e,i){var n=t.match(e);return n&&n[i+1?i:1]||""}function o(){return n(d.cookie,new RegExp("fuid"+c+"=([^;]+)"))}function s(){var t=d.domain;return t&&n(t,/[^.]+\.[^.]{2,3}(\.tr)?$/,0)}t||(t={});var r,a,c,u,l=t.host||"kiks.yandex",h=window,d=document,p=navigator,f=p.userAgent,m=p.mimeTypes,_=9,g=f&&/gecko/i.test(f),v=f&&/MSIE/.test(f)&&/Win/.test(f),b=g?"embed":"object",y="//"+l.split(".").slice(0,-1).join(".")+".%s/system/fc%d.html",w="//"+l+".ru/system/%s%d.swf",k="//"+l+".ru/fu",x="//"+l+".ru/fu",E="application/x-shockwave-flash",M="style",T="position:absolute;margin-left:-999em;top:0;",S=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',C="allowScriptAccess",I="always",D="height",B="wmode",P="window",$="width",O="bgcolor",A="#FFFFFF",F="ya_fc",j=i(M,T)+i($,1)+i(D,1)+i("id",F)+i("tabindex","-1")+i("aria-hidden","true"),N=!1;h.ya_fc_external=function(t,n,l,h){r=t,a=n,c=l,u=h||"fc";var d,p=m&&m[E]?m[E].enabledPlugin:0,f=N,y=0,M=o()?w.replace("%d",a).replace("%s",u):k.replace("%s",s());if(p)y=p.description.split("Shockwave Flash ")[1],f=parseInt(y,10)>=_;else if(v){f=N;try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_)}catch(D){}}return d=f?g?'<div style="'+T+'"><'+b+j+i("src",M)+i(B,P)+i(O,A)+i(C,I)+i("type",E)+"/></div>":(v?"<"+b+S+j+">"+e("movie",M):"<"+b+j+i("type",E)+i("data",M)+">")+e(B,P)+e(O,A)+e(C,I)+"</"+b+">":'<img src="'+x.replace("%s",s())+'" style="'+T+'" />'},h.ya_fc_requestData=function(){var t=d.getElementById("ya_fc");try{t.setLocation(s(),o())}catch(e){}},h.ya_fc_setCookie=function(t){var e=new Date;e.setTime(e.getTime()+31536e7),d.cookie="fuid"+c+"="+t+";expires="+e.toGMTString()+";path=/;domain="+s()},h.ya_fc_getIFrame=function(t){var e=y.replace("%s",t).replace("%d",r),i=d.createElement("iframe"),n=d.getElementsByTagName("body")[0],o="40px;";i.src=e,i.style.cssText=$+o+D+o+"border:0;"+T,i.frameBorder=0,i.setAttribute("tabindex","-1"),i.setAttribute("aria-hidden","true"),n&&n.insertBefore(i,n.firstChild)},h.ya_fc_complete=function(){setTimeout(function(){var t=document.getElementById(F);t&&t.parentNode.removeChild(t)},0)};var R=this,L=arguments.callee.load=function(t){var e,i;t.mode?(e="00",i="kfc"):e="07",R.replaceWith(h.ya_fc_external("07_2",e,"01",i))};R.hasClass("i-flashcookie_autoload_no")||L(t)};Lego.block["i-flashcookie"]=function(i){var n=this.hasClass("i-flashcookie_type_inline")?e:t;n&&n.call(this,i)}}(),BEM.DOM.decl({name:"i-flashcookie",modName:"type",modVal:"inline"},{onSetMod:{js:{inited:function(){Lego.block["i-flashcookie"].call(this.domElem,this.params)}}}}),function(){var t=Lego.block["i-flashcookie"],e=function(t){function e(t,e){return'<param name="'+t+'" value="'+e+'" />'}function i(t,e){return" "+t+'="'+e+'"'}function n(t,e,i){var n=t.match(e);return n&&n[i+1?i:1]||""}function o(){return n(d.cookie,new RegExp("fuid"+c+"=([^;]+)"))}function s(){var t=d.domain;return t&&n(t,/[^.]+\.[^.]{2,3}(\.tr)?$/,0)}t||(t={});var r,a,c,u,l=t.host||"kiks.yandex",h=window,d=document,p=navigator,f=p.userAgent,m=p.mimeTypes,_=9,g=f&&/gecko/i.test(f),v=f&&/MSIE/.test(f)&&/Win/.test(f),b=g?"embed":"object",y="//"+l.split(".").slice(0,-1).join(".")+".%s/system/fc%d.html",w="//"+l+".ru/system/%s%d.swf",k="//"+l+".ru/fu",x="//"+l+".ru/fu",E="application/x-shockwave-flash",M="style",T="position:absolute;top:0;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);",S=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',C="allowScriptAccess",I="always",D="height",B="wmode",P="window",$="width",O="bgcolor",A="#FFFFFF",F="ya_fc",j=i(M,T)+i($,1)+i(D,1)+i("id",F)+i("tabindex","-1")+i("aria-hidden","true"),N=!1;h.ya_fc_external=function(t,n,l,h){r=t,a=n,c=l,u=h||"fc";var d,p=m&&m[E]?m[E].enabledPlugin:0,f=N,y=0,M=o()?w.replace("%d",a).replace("%s",u):k.replace("%s",s());if(p)y=p.description.split("Shockwave Flash ")[1],f=parseInt(y,10)>=_;else if(v){f=N;try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_)}catch(D){}}return d=f?g?'<div style="'+T+'"><'+b+j+i("src",M)+i(B,P)+i(O,A)+i(C,I)+i("type",E)+"/></div>":(v?"<"+b+S+j+">"+e("movie",M):"<"+b+j+i("type",E)+i("data",M)+">")+e(B,P)+e(O,A)+e(C,I)+"</"+b+">":'<img src="'+x.replace("%s",s())+'" style="'+T+'" />'},h.ya_fc_requestData=function(){var t=d.getElementById("ya_fc");try{t.setLocation(s(),o())}catch(e){}},h.ya_fc_setCookie=function(t){var e=new Date;e.setTime(e.getTime()+31536e7),d.cookie="fuid"+c+"="+t+";expires="+e.toGMTString()+";path=/;domain="+s()},h.ya_fc_getIFrame=function(t){var e=y.replace("%s",t).replace("%d",r),i=d.createElement("iframe"),n=d.getElementsByTagName("body")[0],o="40px;";i.name="i-flash-cookie"+(Math.random()+"").substr(3,7),i.src=e,i.style.cssText=$+o+D+o+"border:0;"+T,i.frameBorder=0,i.setAttribute("tabindex","-1"),i.setAttribute("aria-hidden","true"),n&&n.insertBefore(i,n.firstChild)},h.ya_fc_complete=function(){setTimeout(function(){var t=document.getElementById(F);t&&t.parentNode.removeChild(t)},0)};var R=this,L=arguments.callee.load=function(t){var e,i;t.mode?(e="00",i="kfc"):e="07",R.replaceWith(h.ya_fc_external("07_2",e,"01",i))};R.hasClass("i-flashcookie_autoload_no")||L(t)};Lego.block["i-flashcookie"]=function(i){var n=this.hasClass("i-flashcookie_type_inline")?e:t;n&&n.call(this,i)}}(),$(function(){function t(){var t=i.height(),e=n.height(),a=$(window).height();o||(o=t,s=t-e),o+r>a?n.css({height:Math.max(a-r-s,200),overflowY:"auto",marginRight:7}):n.css({height:"auto",overflowY:"visible",marginRight:0})}function e(e){var n=e.is(".b-disaster")?e:$(".b-disaster",e);n.bind("pointerclick",function(){if(i){var e=i.bem("popup");e.isShown()?e.hide():(e.show(),home.stat.logDOMShow(e.domElem)),e.on("hide",function(){home.stat.logPath("show","head.disaster.popup.closed")})}t(),$(window).trigger("disasterpopup.show")})}var i=$(".b-disaster-popup"),n=$(".b-disaster-popup__content"),o=0,s=0,r=70;i.find(".b-disaster-content").each(function(){$(this).replaceWith(home.getData("b-disaster-popup.text",""))}),window.initDisasterPopup=e,$(window).resize(function(){t()})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var r=e||window.event,a=c.call(arguments,1),u=0,h=0,d=0,p=0,f=0,m=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(d=-1*r.detail),"wheelDelta"in r&&(d=r.wheelDelta),"wheelDeltaY"in r&&(d=r.wheelDeltaY),"wheelDeltaX"in r&&(h=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(h=-1*d,d=0),u=0===d?h:d,"deltaY"in r&&(d=-1*r.deltaY,u=d),"deltaX"in r&&(h=r.deltaX,0===d&&(u=-1*h)),0!==d||0!==h){if(1===r.deltaMode){var _=t.data(this,"mousewheel-line-height");u*=_,d*=_,h*=_}else if(2===r.deltaMode){var g=t.data(this,"mousewheel-page-height");u*=g,d*=g,h*=g}if(p=Math.max(Math.abs(d),Math.abs(h)),(!s||s>p)&&(s=p,n(r,p)&&(s/=40)),n(r,p)&&(u/=40,h/=40,d/=40),u=Math[u>=1?"floor":"ceil"](u/s),h=Math[h>=1?"floor":"ceil"](h/s),d=Math[d>=1?"floor":"ceil"](d/s),l.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();f=e.clientX-v.left,m=e.clientY-v.top}return e.deltaX=h,e.deltaY=d,e.deltaFactor=s,e.offsetX=f,e.offsetY=m,e.deltaMode=0,a.unshift(e,u,h,d),o&&clearTimeout(o),o=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){s=null}function n(t,e){return l.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var o,s,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(t.event.fixHooks)for(var u=r.length;u;)t.event.fixHooks[r[--u]]=t.event.mouseHooks;var l=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",l.getLineHeight(this)),t.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(){"use strict";BEM.DOM.decl("b-themes-catalog",{onSetMod:{js:{inited:function(){this._vars={scrollItemsCount:5,scrollSpeed:300,tabsScrollWidth:100,themeItemWidth:this.elem("theme-item").outerWidth(!0),leftGapWidth:this.elem("theme-item-gap").outerWidth(!0),rightGapWidth:this.elem("theme-item-gap").outerWidth(!0),bodyWidth:0,visibleThemesCount:0,buttonsWidth:0,categoriesTabsWidth:0,categoriesScrollWidth:0,notLoadThemes:this.elem("theme-img").toArray()};var t=this.getLocationHash(),e=this.elem("theme-item","id",this.params.activeTheme).position().left-this._vars.leftGapWidth,i=t.group||t.tab;this.updateResize(),this.setMod("active-theme",this.params.activeTheme),i&&this.elem("tab","name",i).length?this.setMod("current-group",i):this.setMod("current-group","all"),"groups_scroll_position"in t&&this.elem("tabs-scroll").scrollLeft(parseInt(t.groups_scroll_position)||0),"themes_scroll_position"in t&&(e=parseInt(t.themes_scroll_position||0)),this.elem("body").scrollLeft(e),this.updateView(),this.bindToWin("resize",$.throttle(function(){this.updateResize(),this.updateView(),this.loadImgPreview()}),100),this.bindTo("tab","click",function(t){this.setMod("current-group",this.getMod($(t.target),"name"))}),this.bindTo(this.elem("arrow","scroll","left"),"click",function(){var t=this._vars.themeItemWidth*this._vars.scrollItemsCount+this.elem("body").scrollLeft()%this._vars.themeItemWidth;this.elem("body").stop(),this.elem("body").animate({scrollLeft:"-="+t},this._vars.scrollSpeed)}),this.bindTo(this.elem("arrow","scroll","right"),"click",function(){var t=this._vars.themeItemWidth*this._vars.scrollItemsCount-this.elem("body").scrollLeft()%this._vars.themeItemWidth;this.elem("body").stop(),this.elem("body").animate({scrollLeft:"+="+t},this._vars.scrollSpeed)}),this.bindTo(this.elem("arrow","scroll-tab","left"),"click",function(){this.elem("tabs-scroll").stop(),this.elem("tabs-scroll").animate({scrollLeft:"-="+this._vars.tabsScrollWidth},"fast")}),this.bindTo(this.elem("arrow","scroll-tab","right"),"click",function(){this.elem("tabs-scroll").stop(),this.elem("tabs-scroll").animate({scrollLeft:"+="+this._vars.tabsScrollWidth},"fast")}),this.bindTo("body","mousewheel",function(t){var e=t.deltaFactor*(t.deltaY-t.deltaX);return e=this.params.isWinOperaPresto?t.originalEvent.wheelDelta/2:e,this.elem("body").scrollLeft(this.elem("body").scrollLeft()-e),!1}),this.bindTo("body","scroll",this.updateView),this.bindTo("body","scroll",this.loadImgPreview),this.bindTo("tabs-scroll","scroll",this.updateView),this.bindTo("tabs-scroll","mousewheel",function(t){var e=t.deltaFactor*(t.deltaY-t.deltaX);return e=this.params.isWinOperaPresto?t.originalEvent.wheelDelta/2:e,this.elem("tabs-scroll").scrollLeft(this.elem("tabs-scroll").scrollLeft()-e),!1}),this.bindTo("theme-item","click",function(t){var e=$(t.currentTarget);return e.hasClass("b-themes-catalog__theme-item_active_true")?(t.preventDefault(),!0):(t.preventDefault(),home.stat.redirect(e[0],e.data("statlog")),void this.addHashAndGo(e.attr("href"),{group:this.getMod("current-group"),groups_scroll_position:this.elem("tabs-scroll").scrollLeft(),themes_scroll_position:this.elem("body").scrollLeft()}))}),this.setMod(this.elem("bg"),"hidden","true"),this.loadImgPreview(),window.Ya&&window.Ya.share2||$.getScript("//yastatic.net/share2/share.js",function(){this.setMod(this.elem("theme-item-share"),"enable","true")}.bind(this))}},"current-group":function(t,e){var i=this.elem("tab"),n=this.elem("tab","name",e),o=this.elem("theme-item"),s=this.elem("theme-item","group-"+e,"true");this.setMod(i,"active","false"),this.setMod(n,"active","true"),o.addClass("i-hidden"),s.removeClass("i-hidden"),this._vars.visibleThemesCount=s.length,this.elem("body").scrollLeft(0),this.updateView(),this.loadImgPreview()},"active-theme":function(t,e){this.setMod(this.elem("theme-item"),"active","false"),this.setMod(this.elem("theme-item","id",e),"active","true")}},updateResize:function(){this._vars.bodyWidth=this.elem("body").width(),this._vars.buttonsWidth=0,this.elem("btn").each(function(t,e){this._vars.buttonsWidth+=$(e).outerWidth(!0)}.bind(this)),this._vars.categoriesTabsWidth=this.elem("categories-general").outerWidth(!0)+this.elem("categories-other").outerWidth(!0),this._vars.categoriesScrollWidth=this._vars.bodyWidth-this._vars.buttonsWidth},updateView:function(){var t=this._vars.visibleThemesCount*this._vars.themeItemWidth+this._vars.leftGapWidth+this._vars.rightGapWidth;this.setMod(this.elem("arrow","scroll","left"),"hidden",(this.elem("body").scrollLeft()<=0).toString()),this.setMod(this.elem("arrow","scroll","right"),"hidden",(this.elem("body").scrollLeft()+this._vars.bodyWidth===t||this._vars.bodyWidth>t).toString()),this.elem("tabs-scroll").css({width:this._vars.categoriesScrollWidth+"px"}),this.setMod(this.elem("arrow","scroll-tab","left"),"hidden",(this.elem("tabs-scroll").scrollLeft()<=0).toString()),this.setMod(this.elem("arrow","scroll-tab","right"),"hidden",(this.elem("tabs-scroll").width()>this._vars.categoriesTabsWidth||this.elem("tabs-scroll").scrollLeft()+this._vars.categoriesScrollWidth>=this._vars.categoriesTabsWidth).toString())},loadImgPreview:function(){this._vars.notLoadThemes.length&&(this._vars.notLoadThemes=this._vars.notLoadThemes.filter(function(t){var e=$(t),i=e.offset().left;return!e.parent().hasClass("i-hidden")&&i+this._vars.themeItemWidth>0&&i<this._vars.bodyWidth?(e.prepend($("<img />",{"class":"b-themes-catalog__theme-async-img",src:e.data("preview_url")})),!1):!0},this))},getLocationHash:function(){for(var t,e=window.location.hash?window.location.hash.substr(1).split("&"):[],i={},n=0;n<e.length;n++)t=e[n].split("="),i[t[0]]="undefined"!=typeof t[1]?t[1]:null;return i},addHashAndGo:function(t,e){var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(n+"="+e[n]);return i.length&&(t+=(-1!==t.indexOf("#")?"":"#")+i.join("&")),location.href=t,!1}})}(),BEM.DOM.decl("splash",{onSetMod:{js:function(){this.bindToDoc("keydown",this._onEsc),this.bindTo("close","click",this._closeAndCarantine),this.bindTo("no","click",this._closeAndCarantine),this.bindTo("logo","click",this._closeAndCarantine),this.bindTo("close no logo","keydown",this._onButtonPressForCancelItems),this.setMod("state","shown"),this.domElem.find("[data-metrika]").click(function(t){var e=$(t.currentTarget).attr("data-metrika");e&&this._reachMetrikaGoal(e)}.bind(this))},state:{shown:function(){this.bindTo("yes","click",this._close),this.autoFocus=$(".search2 .input").bem("input"),this.autoFocus.setMod("listen","no"),this.elem("yes").focus()}}},_onButtonPressForCancelItems:function(t){if(t.which===BEM.KEYS.ENTER||t.which===BEM.KEYS.SPACE){var e=$(t.currentTarget).attr("data-metrika");e&&this._reachMetrikaGoal(e),this._closeAndCarantine()}},_onEsc:function(t){return t.which===BEM.KEYS.ESC?(this._reachMetrikaGoal("esc_click"),this._closeAndCarantine(),!1):void 0},_close:function(){this.unbindFromDoc("keydown"),this.delMod("visible"),setTimeout(function(){this.delMod("display"),this.destruct()}.bind(this),300),this._onClose()},_getStatPath:function(){return this.params.statRoot},_onClose:function(){setTimeout(function(){$(".b-page_overflow_hidden").removeClass("b-page_overflow_hidden")},75),this.autoFocus.setMod("listen","yes")},_closeAndCarantine:function(){this.params.carantineLink&&((new Image).src=this.params.carantineLink),this._close()},_reachMetrikaGoal:function(t){window.defaultMetrikaCounter&&window.defaultMetrikaCounter.reachGoal(t)}}),BEM.DOM.decl({block:"splash",modName:"type",modVal:"arrow"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindTo("clicable-grey","click",this._closeAndCarantine),setTimeout(function(){this.popup=$(".splash__popup"),this.popup.length&&(this.popup=this.popup.bem("popup").show())}.bind(this),75)}},_close:function(){this.setMod("state","hidden"),setTimeout(function(){this.popup.hide(),this.popup.destruct()}.bind(this),300),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"splash",modName:"inline",modVal:"yes"},{onSetMod:{state:{shown:function(){this.__base.apply(this,arguments),this.bindTo("yes","click",this.setHome)}}},setHome:function(){return this.params.extLink?(this.setInline(this.params.extLink),!1):void 0},setInline:function(t){var e=this;this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:"chrome"}},{url:t,statPath:e._getStatPath()+".inline.install",api:"chrome",curtainOpts:{theme:"black"},bannerid:e.params.bannerid,metrikaParams:{id:722545,goals:{yes:"install",no:"cancel"}}})),this._inlineInstall.request()}}),function(){var t=function(){var t=home.getData("delayed-reporter"),e=function(t){t&&(t="string"==typeof t?{url:t}:t,"undefined"!=typeof t.timeout?setTimeout(function(){(new Image).src=t.url},1e3*t.timeout):(new Image).src=t.url)};if(t)for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n instanceof Array||(n=[n]),n.forEach(e)}};window.$?$(t):"addEventListener"in document&&document.addEventListener("DOMContentLoaded",t,!1)}(),BEM.DOM.decl({block:"popup",modName:"animate-push",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=this.getCurrPos(),i=this.getPopupSize(),n={top:e.top,left:e.left},o={top:e.top,left:-i.width};this.domElem.stop(!0).css(o).animate(n,this.params.duration,"easeOutExpo")}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var i=this.getCurrPos(),n=this.getPopupSize(),o=this.domElem,s={top:i.top,left:-n.width};return o.stop(!0,!0).animate(s,this.params.duration,"easeOutExpo",function(){t()})}}),$.extend($.easing,{easeOutExpo:function(t,e,i,n,o){return e===o?i+n:n*(-Math.pow(2,-10*e/o)+1)+i}}),BEM.DOM.decl("dist-popup",{onSetMod:{js:function(){this.__base(),setTimeout(function(){BEM.blocks["i-message-locker"].acquireLock("dist-popup").then(this._onShow.bind(this),this.destruct.bind(this))}.bind(this),this.__self.SHOW_TIMEOUT)}},_getPopupPosition:function(){return{top:12,left:18}},_onShow:function(){var t=this.params,e=t.counters;this.popup=this.findBlockOn("popup").show(this._getPopupPosition()),this.popup.on({"before-hide":this._onBeforeHide,hide:this._onHide},this),this.popup._unbindFocusEvents(),this._sendCounter(e.show),this.bindTo("no close","click",this._onNoClick),this.bindKeyTo("close","space enter",this._onNoClick),this.bindTo("yes","click",this._onYesClick)},_onBeforeHide:function(t,e){e&&"esc-key"===e.source&&this.afterCurrentEvent(this._countCancel);
},_onHide:function(){BEM.blocks["i-message-locker"].releaseLock("dist-popup"),setTimeout(this.destruct.bind(this),this.__self.DESTRUCT_TIMEOUT)},_onYesClick:function(){this._closeFlag(this.params.close_url)},_onNoClick:function(){return this.popup.hide(),this._countCancel(),!1},_countCancel:function(){this._closeFlag(this.params.close_url),this._closeFlag(this.params.quarantineUrl),this._sendCounter(this.params.counters.no),window.home.gaCounter.trackCancelPopup()},_closeFlag:function(t){t&&((new Image).src=t)},_sendCounter:function(t){t&&t.length&&t.forEach(function(t){"path"===t.type?csh_ifmsid(t.content):"image"===t.type&&((new Image).src=t.content)})},destruct:function(){return this.popup&&this.popup.destruct(),this.__base.apply(this,arguments)}},{SHOW_TIMEOUT:1e3,DESTRUCT_TIMEOUT:1e3}),BEM.DOM.decl({block:"dist-popup",modName:"install",modVal:"inline"},{_onYesClick:function(){this.__base.apply(this,arguments),this._sendCounter(this.params.counters.yes);var t=this,e=this.params;return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:e.api}},$.extend(e,{callbacks:{yes:function(){this._sendCounter(e.counters.install),this.popup.hide()}.bind(this),no:function(){this.popup.hide()}.bind(this)}}))),this._inlineInstall.request().fail(function(){t.popup.hide()}),!1}}),BEM.DOM.decl({block:"dist-popup",modName:"install",modVal:"download"},{_onYesClick:function(){return this.__base.apply(this,arguments),this._sendCounter(this.params.counters.yes),this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),!1}}),BEM.DOM.decl({block:"dist-popup",modName:"white-push",modVal:"yes"},{_getPopupPosition:function(){return{top:22,left:32}}}),BEM.DOM.decl("news-popup",{onSetMod:{js:function(){var t=this;this.popup=this.findBlockOn(this.domElem,"popup"),this.$customTabLink=$(".news__custom-tab"),this.$tab=this.$customTabLink.closest(".content-tabs__head-item"),this.news=this.findBlockOn(this.$tab.closest(".content-tabs"),"content-tabs"),this.widget=this.news.findBlockOutside("widget"),this.turnReloadOff(),this.popup.on("show",function(){home.stat.logDOMShow(t.popup.domElem)}),this.bindTo("add","click",this.add),this.bindTo("cancel","click",this.cancel),this.popup.on("hide",this.changeThis(this.hideTab)),this.show()}},show:function(){this.popup.setRelativeContainer(this.widget),this.popup.show(this.$customTabLink),this.channel("widget").on("showPreferences",this.hideOnOpenSettings,this),$(window).scrollTop(this.$tab.offset().top),this.elem("add").focus()},hide:function(){this.popup.hide()},add:function(){this.saveNewPattern(),this.saveWidgetSettings()},cancel:function(){this.hide()},hideTab:function(){var t=this.widget.getInstance();this.actualData||t._prefs.customCatId||(this.news.hasMod(this.$tab,"active","true")&&this.news.selectRelative(-1),this.$tab.hide()),this.turnReloadOn()},hideOnOpenSettings:function(t,e){e.elem.instance===this.widget.getInstance()&&this.hide()},saveNewPattern:function(){var t=this.widget.findBlockOutside("widgets");t.params.settings&&t.params.settings.newpattern&&t.save()},saveWidgetSettings:function(){var t=this.widget.getInstance(),e=this.params.customId,i=t._prefs;i.customCatId=e,t.saveValues(i,this.afterSave.bind(this))},afterSave:function(t){"ok"===t.result&&((new Image).src=this.params.coockieUrl,this.actualData=!0),this.hide()},turnReloadOff:function(){this.widget.getInstance().pauseReload=!0},turnReloadOn:function(){var t=this.widget.getInstance();t.pauseReload=!1,!this.actualData&&t._prefs.customCatId?t.reload():Widget.Framework.addToReloadQueue(t,t.onload)}},{live:!1}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"relative"},{setRelativeContainer:function(t){this._parentContainer=t},_findParent:function(){return this._parentContainer},setParent:function(t){return this._parent=t,this}}),BEM.decl({name:"dataprovider-geo",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({v:9,search_type:"tune",results:15,lang:Lego.params.locale+"_"+location.host.match(/yandex\.(\w\w)$/)[1].toUpperCase(),part:t,spn:[.01,.01].join()},function(t){e.call(this,t.results.filter(function(t){return t.geoid}).map(function(t){return["geo"].concat(t)}),t.meta)})}}),BEM.DOM.decl("b-wdgt-preferences",{onSetMod:{js:function(){var t=this;this.popup=this.findBlockOn(this.domElem,"popup"),this.popup.delMod("position"),this.bindTo("save","click",this.save),this.bindTo("cancel","click",this.cancel),this.bindTo("reset","click",this.reset),Widget.Init({hidePreferencesHandler:this.changeThis(function(){this.hide()})}),this.bindToWin("widgetSettingsTuned",function(e){t.widget&&e.id===t.widget.getId()&&t.widget.markChanged(!1,!0)}),this.popup.on("show",function(){this._skipReturnFocus=!0}),this.popup.on("hide",function(){this.channel("widget").trigger("hidePreferences",{elem:t.widget}),t._resetPopup()}),this.popup.on("show",function(){this.channel("widget").trigger("showPreferences",{elem:t.widget})}),this.baseTitle||(this.baseTitle=this.elem("head").text())}},show:function(t,e){this.widget=t,this.callback=e||function(){},this.setMod("loading","yes"),BEM.DOM.destruct(this.elem("form"),!0),Widget.Framework.showEditForm(t.getId(),this.elem("form"),this.changeThis(this.updateForm)),this.popup.show(this._setPopupParams()),this.bindToWin("resize",$.debounce(this.changeThis(function(){this.popup.repaint(this._setPopupParams())}),100))},hide:function(){this.widget=null,this.callback=null,this.popup.hide()},_resetPopup:function(){this.elem("head").text(this.baseTitle),this.unbindFromWin("resize")},_getPopupPos:function(){var t=this.domElem.width(),e=this.domElem.height(),i=$(window).height();return{left:($(window).width()-t)/2,top:Math.max(50,$(window).scrollTop()+(i-e)/2)}},_setPopupParams:function(){var t=this._getPopupPos();return this.popup.params.top=t.top,this.popup.params.left=t.left,t},updateForm:function(t){var e;t&&(this.delMod("loading"),t.title&&this.elem("head").text(t.title),t.form?e=t.form:t.prefs&&(e=this.buildForm(t.prefs)),e?(BEM.DOM.update(this.elem("form"),e),BEM.DOM.init(this.elem("form")),this.elem("controls").show()):this.elem("controls").hide(),this.popup.hasMod("visibility","visible")&&this.popup.repaint(this._setPopupParams()))},buildForm:function(t){return BEMHTML.apply({block:"b-wdgt-preferences",elem:"data",list:t})},save:function(){for(var t=this.elem("form").find("form")[0],e={},i=0;i<t.length;i++){var n=t[i];n.name&&("checkbox"===n.type?e[n.name]=!!n.checked:"radio"===n.type?n.checked&&(e[n.name]=n.value):e[n.name]=n.value)}this.widget.markChanged(!1,!0);var o=this.widget.getInstance();o.saveValues(e,this.callback.bind(this.widget)),this.hide()},cancel:function(){this.hide()},reset:function(){var t=this.widget.getInstance();t.dropValues(this.callback.bind(this.widget)),this.channel("catalog").trigger("enableAction"),this.hide()}},{live:!0}),BEM.DOM.decl({block:"popup",modName:"wrapped",modVal:"yes"},{onSetMod:{visibility:{visible:function(){this.__base(),this._wrap()},"":function(){this.__base(),this._unwrap()}},wrapped:{"":function(){this._unwrap()}}},_wrap:function(){this._wrapper||(this._wrapper=this.elem("wrapper").detach()),this._wrapper&&this.domElem.wrap(this._wrapper)},_unwrap:function(){this._wrapper&&this.domElem.unwrap()},destruct:function(){this._unwrap(),this.__base()}}),BEM.DOM.decl({block:"popup",modName:"behaviour",modVal:"scrollable"},{getDefaultParams:function(){var t=this.__base();return t.top=20,t}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(t,e){var i="yes"===e;this.elem("control").attr("disabled",i),this._getButton().setMod(t,e),i&&this.delMod("opened").delMod("focused")},focused:{yes:function(){return this.hasMod("disabled","yes")?!1:(this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent(function(){this.trigger("blur")})}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down","yes"===e)}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if("undefined"==typeof t)return this.elem("control").val();var i,n=-1;return this.findElem("option").each(function(e){this.value===t&&!this.disabled&&(i=$(this).parent("optgroup")[0],!(i&&i.disabled))&&(n=e)}),n>-1&&this._selectedIndex(n,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var i=this._getSelectedIndex();return"undefined"==typeof t||t===i?i:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:i},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){return this._isParentPopup()&&this._popup._parent.repaint(),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){var t=this;t._setButtonText(t._getSelectedText()),t.trigger("change",{index:t._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode===e.UP,n=t.keyCode===e.DOWN,o=t.keyCode===e.ENTER,s=t.keyCode===e.SPACE;if(i||n){if(t.preventDefault(),!this.isOpened())return this.open();var r=this._items.length,a=this._curItemIndex;if(i&&0===a||n&&a>r-2)return;if(r){var c,u=n?1:-1;for(c=a;c>=0&&r>=c;)if(c+=u,this._isSelectableItem(this._items.eq(c))){a=c;break}this._onEnterItem(this._items.eq(a),!0)}}(o||s)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,i){this.elem("button").attr("aria-activedescendant",t.attr("id"));var n=this._curItemIndex,o=this._getItemIndex(t),s=this._items;n>-1&&this.delMod(s.eq(n),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),i&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do e=e.parent(),t=e.css("overflow-y");while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){var e;return e=!this.hasMod(t,"disabled","yes")&&!this.hasMod(t,"label","yes")},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(t){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()})},useNativeControl:null,_buildOption:function t(e,i,n){var o={};return"option"===e.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:e.value},content:e.content},e.disabled&&(o.attrs.disabled="disabled"),e.selected&&(o.attrs.selected="selected")):"optgroup"===e.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:e.label}},e.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(e.content)?e.content.map(t):e.content),o.block="select",o}}),BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var t,e=this,i=this._getPopup().domElem;return BEM.DOM.update(this.findElem(i,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(i,"item"),this._curItemIndex=-1,this._items=t.filter(function(){return!e.hasMod($(this),"label","yes")}),this.bindTo(e._items,{pointerclick:function(t){t.preventDefault(),e._onSelectItem(t.data.domElem)},pointerover:function(t){e._onEnterItem(t.data.domElem)},pointerout:function(t){e._onLeaveItem(t.data.domElem)}}),this}},{_buildItemsHtml:function(t){function e(t,e,i){var n={block:"select",elem:"item",content:{elem:"text",tag:"span",content:e||" &nbsp; "},elemMods:{}};return i&&(n.elemMods=i),n}function i(t,n){var c=t.length;if(c){var u=0;do{var l=$(t[u]),h=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){a=!0,!l.prev().is("optgroup")&&u>0&&s.push(o),r.push(s),s=[],s.push(e(l,l.attr("label"),$.extend({label:"yes"},h,n))),i(l.children(),$.extend({inner:"yes"},h,n));var d=s;s=r.pop(),s.push({block:"select",elem:"group",content:d})}else s.push(e(l,l.html(),$.extend(h,l.is(":selected")&&{selected:"yes"},n)))}while(++u<c||(a=!1))}}var n="select",o={block:n,elem:"separator",tag:"i"},s=[],r=[],a=!1;return i(t),BEMHTML.apply(s)}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled","yes"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,i=t.__self.getName(),n=this._getPopupContent(i),o=this._getPopupMix(i),s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(s,e.popupMods),$.extend(r,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:o,js:r,content:{elem:"content",content:n}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,i){t._isOutsideClicked(e,i)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,i){t._popup.containsDomElem($(i.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10),e=this._getPopup();if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var i=parseInt(e.domElem.css("height"),10),n=t*this._rowHeight;i!==n&&(e.setSize({height:n}),i>n&&this.setMod(this.findElem(e.domElem,"popup"),"scrollable","yes"))}else e.setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select"),e=this._getPopup();e.show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,i=this._popupContent,n=i.scrollTop(),o=e-n,s=2*this._rowHeight;o>i.height()-s?t=e-s:n&&s>o&&(t=e-i.height()+s),t&&i.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl("radiobox",{onSetMod:{js:{inited:function(){this._val=this.findElem(this.elem("radio","checked","yes"),"control").val(),this.elem("control").each(function(t,e){var i=$(e),n=this.__self._getRadioByElem(i);i.isFocused()&&this.setMod(n,"focused","yes"),i.prop("checked")&&this.setMod(n,"checked","yes")}.bind(this))}},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");e.isFocused()||e.focus(),this.afterCurrentEvent(function(){this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.trigger("blur",{prev:t})})}},checked:{yes:function(t){var e=this.elem("radio","checked","yes"),i=this.findElem(t,"control"),n=this._val;this._willSwitch=!0,this.delMod(e,"checked"),this._willSwitch=!1,i.prop("checked",!0),this._val=i.val(),this.trigger("change",{current:t,currentVal:this._val,prev:e,prevVal:n})},"":function(t){var e=this.findElem(t,"control"),i=this._val;e.prop("checked",!1),this._val=void 0,this._willSwitch||this.trigger("change",{current:$(),currentVal:void 0,prev:t,prevVal:i})}},hovered:function(t){return!this.isDisabled(t)},pressed:function(t){return!this.isDisabled(t)},disabled:function(t,e,i){t.find(this.buildSelector("control")).prop("disabled","yes"===i),"yes"===i&&this.delMod(t,"hovered").delMod(t,"pressed")}}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if("undefined"==typeof t)return this._val;var e=this;return this.elem("control").each(function(i,n){return n.value===t?(e.setMod(e.__self._getRadioByElem($(n)),"checked","yes"),!1):void 0}),e},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){return this.delMod(this.elem("radio","checked","yes"),"checked"),this},_onRadioEnter:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onRadioLeave:function(t){this.delMod(t.data.domElem,"hovered")},_onRadioClick:function(t,e){this.isDisabled(t)||this.setMod(t,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")},_onPointerpress:function(t){var e=t.data.domElem;this.setMod(e,"pressed","yes").bindToDoc("pointerrelease",function(){this.delMod(e,"pressed").unbindFromDoc("pointerrelease")})}},{live:function(){this.liveBindTo("radio","pointerclick",function(t){this._onRadioClick(t.data.domElem,t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","pointerover pointerout",function(t){t.data.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onRadioEnter(t):this._onRadioLeave(t))}).liveBindTo("control","focusin focusout",function(t){var e=this.__self._getRadioByElem(t.data.domElem);this.setMod(e,"focused","focusin"===t.type?"yes":""),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&t.preventDefault()}).liveBindTo("radio","pointerpress",function(t){this.hasMod(t.data.domElem,"disabled")||this._onPointerpress(t)})},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}}),BEM.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onElemSetMod:{radio:{pressed:{yes:function(){this.delMod(this.elem("radio","pressed","yes"),"pressed")}}}},_onPointerPress:function(t){this._pressedRadio=t.data.domElem,this.isDisabled(this._pressedRadio)||(this.setMod(this._pressedRadio,"pressed","yes"),this.bindToDoc("pointerrelease",this._onPointerRelease))},_onPointerRelease:function(t){var e=this._pressedRadio;delete this._pressedRadio,this.delMod(e,"pressed"),this.afterCurrentEvent(function(){var i=this.findElem(e,"control");i.prop("checked")||!e.is(t.target)&&!e.find(t.target).length||i.trigger("change").focus()}),this.unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("radio","pointerpress",function(t){this._onPointerPress(t)}),this.__base()}}),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(t){},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)})}}),BEM.DOM.decl("b-autocomplete-item",{},{live:function(){return this.liveBindTo("mouseover mouseout mousedown mouseup pointerover pointerout pointerdown pointerup",function(t){this.trigger(t.type)}),this.__base()}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(t){var e=t.param("data"),i=BEM.blocks["i-common__string"].escapeHTML($.isArray(e)?e[1]:e);$.isArray(t.param("search_cgi"))&&t.js({cgi:t.param("search_cgi")}),t.tag("li").mod("pers",t.param("pers")?"yes":!1).content(BEM.blocks["i-common__string"].highlight(i,t.param("hl"))).js(!0)}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"geo"},{val:function(){return this.elem("reg").text()},enter:function(){},select:function(t){$(".input__geo").val(this.domElem.data("id"))}}),BEM.DOM.decl({name:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){var t=this;t.params.foot&&(t.foot=t.params.foot),t._preventRequest=!0,t.__base.apply(t,arguments),t._userVal=t.val();var e=t._focused;e&&t.delMod("focused"),t.elem("control").attr("autocomplete","off"),t._preventRequest=!1,e&&t.setMod("focused","yes"),t._items=[],t._curItemIndex=-1,t._doRequest=$.debounce(t._doRequest,t.params.debounceDelay),this.bindToWin("resize",$.throttle(this._setWidth,60))}},focused:{yes:function(){this.__base();var t=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",t)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},destruct:function(){var t=this._popup;return t&&t.domElem&&(this._popup=null,BEM.DOM.destruct(t.domElem)),this.__base.apply(this,arguments)},getDataprovider:function(){var t=this.params.dataprovider.url;return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",$.extend(this.params.dataprovider,{url:t,callbackCtx:this})))},_onChange:function(){return this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(t){var e=BEM.blocks.keycodes.is(t.which,"UP","DOWN");if(e&&!t.shiftKey){t.preventDefault();var i=this._items.length,n=!1;if(i){var o=t.which-39,s=this._curItemIndex,r=0;do n=(0===s&&-1===o||s+o>=i)&&this._onLeaveItem(this._items[s],!0),s+=o,0>s?s=i-1:s>=i&&(s=0);while(!n&&this._onEnterItem(this._items[s],!0)===!1&&++r<i)}}},_onKeyPress:function(t){t.which===BEM.blocks.keycodes.ENTER&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(t.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var e=t.__self.getName(),i=[{elem:"items",tag:"ul",mix:[{block:e,elem:"popup-items"}]}],n=Array.isArray(t.params.popupMixs)?t.params.popupMixs:[],o={directions:"bottom-left"};t._hasPopupFade()&&i.push({block:e,elem:"fade"}),$.extend(o,t.params.popupParams),n.push({block:e,elem:"popup",elemMods:t.params.popupMods,js:{uniqId:t._uniqId}}),t._popup=$(BEMHTML.apply({block:"popup",mods:{animate:"no"},mix:n,js:o,content:{elem:"content",content:i}})).bem("popup").on({show:function(){t.bindTo("keypress",t._onKeyPress).bindTo("keydown",t._onKeyDown)},hide:function(){t.unbindFrom("keypress keydown")._curItemIndex=-1}}),$.each({pointerover:t._onEnterItem,pointerout:t._onLeaveItem,pointerdown:t._onSelectItem,pointerup:t._onItemMouseUp},function(e,i){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,function(e){i.call(t,e.block)})}),BEM.DOM.init(t._popup.domElem)}return t._popup},getPopup:function(){return this._getPopup()},_hasPopupFade:function(){return"yes"===(this.params.popupMods||{}).fade},_onEnterItem:function(t,e){if(t.hasMod("enterable","no"))return!1;var i=this._items,n=this._curItemIndex;n>-1&&i[n].delMod("hovered"),n=this._getItemIndex(t),n>-1&&i[n].setMod("hovered","yes"),this._curItemIndex=n,this._isCurItemEnteredByKeyboard=Boolean(e),e&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(t.enter()!==!1?t.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(t,e){var i=this._curItemIndex;return i>-1&&i===this._getItemIndex(t)&&(this._items[i].delMod("hovered"),this._curItemIndex=-1),e&&this.val(this._userVal),!0},_onSelectItem:function(t,e){var i=t.select(e||!1),n="object"==typeof i?i.needUpdate:i!==!1,o="object"==typeof i&&i.needEvent;this._preventRequest=!0,n&&(this._userVal=t.val(),this.val(this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex})),e?this.del("_preventRequest")._getPopup().hide():(this._returnFocus=!0,this.bindToDoc("pointerrelease",this._onDocMouseUp),n||(this._preventHide=!0),this.afterCurrentEvent(function(){this.setMod("focused","yes").del("_preventRequest","_preventHide")})),(n||o)&&this.trigger("select",{item:t,byKeyboard:e})},_onItemMouseUp:function(){this._closePopupByMouseUp()},_onDocMouseUp:function(){this._closePopupByMouseUp()},_closePopupByMouseUp:function(){this.unbindFromDoc("pointerrelease").del("_returnFocus")._getPopup().hide()},_getItemIndex:function(t){return $.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),function(e){t.trigger("data-received",e);var i=t._getPopup(),n=e.items||e;t.foot&&n.length&&-1===$.inArray(t.foot,n)&&n.push(t.foot),n.length?(t._curItemIndex=-1,BEM.DOM.update(i.elem("items"),t._buildItemsHtml(n),function(){i.isShown()||(i.show(t.elem("box")),t._setWidth()),t._items=i.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")})):i.hide()})},_setWidth:function(){this._hasPopupFade()&&this._getPopup().domElem.css("width",this.elem("box").outerWidth())},_buildItemsHtml:function(t){var e=this;return BEMHTML.apply($.map(t,function(t,i){var n,o={block:"b-autocomplete-item",data:t,mods:{type:$.isArray(t)?t[0]:"text"},suggestVersion:e.params.dataprovider.version||4};return $.isArray(t)&&$.isPlainObject(n=t.concat().pop())&&$.extend(o,n),o}))},setFoot:function(t){return this.foot=t,this.foot},getDefaultParams:function(){return $.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}}),BEM.decl({name:"input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({part:t},function(t){e.call(this,{items:t[1],metainfo:t[2]})})}}),BEM.DOM.decl("multiselect",{onSetMod:{js:function(){var t=this.elem("selected").val().split(","),e={};t.forEach(function(t){""!==t&&(e[t]=!0)}),this._lockUnlock(t),this.selected=e}},_onChange:function(t,e){var i=this.selected,n=[];i[t.val()]=e.checked;for(var o in i)i.hasOwnProperty(o)&&i[o]&&n.push(o);this._lockUnlock(n),this.elem("selected").val(n.join(","))},_lockUnlock:function(t){1===t.length?(this._locked=this.findBlockInside({block:"checkbox",modName:"checked",modVal:"yes"}),this._locked.setMod("disabled","yes")):this._locked&&(this._locked.delMod("disabled"),this._locked=null)}},{live:function(){return this.liveInitOnBlockInsideEvent("change","checkbox",function(t,e){this._onChange(t.target,e)}),!1}}),BEM.DOM.decl("b-wdgt-remove",{onSetMod:{js:function(){this.popup=this.findBlockOn("popup"),this.bindTo("do","click",this.yes),this.popup.on("hide",this.no,this),this.bindTo("cancel","click",this.hide),this.findBlockInside("blame","link").bindTo("click",this.changeThis(this.complain))}},show:function(t,e,i){return this.accepted=!1,this.yes=e,this.no=i,this.popup.show(t.domElem),this.updateBlameUrl(t),this},hide:function(){this.popup.hide(),this._complainUrl=""},updateBlameUrl:function(t){var e=this.findBlockInside("blame","link"),i=t.getInstance();this._complainUrl="/wcomplain/?wauth="+i.getAuth(),e.domElem.attr("href","https://yandex.ru/support/widgets/troubleshooting.xml?form2523-widget_id="+i.classId)},no:function(){return this.accepted||this.no(),this.no=this.yes=null,this},yes:function(){return this.yes(),this.accepted=!0,this.popup.hide(),this},complain:function(){if(this._complainUrl){var t=this.findBlockInside("blame","link").domElem.attr("href");return $.get(this._complainUrl,function(){window.location=t}),!1}}},{live:!0}),BEM.DOM.decl("b-wdgt-share",{onSetMod:{js:function(){this.bindTo("close","click",this.hide),this.bindTo("link","click",this.linkClick)}},show:function(t){this.updateLinks(t);var e=this.getPopup();e.show(),home.stat.logDOMShow(e.domElem)},hide:function(){this.getPopup().hide()},updateLinks:function(t){var e=t.id.substr(0,t.id.lastIndexOf("-")),i=location.protocol+"//yandex.#d#/?add=#id#&from=shared".replace(/#d#/,document.domain.split(".").pop()).replace(/#id#/,e),n=this.params.shareText;this.findBlockOn("url","input").val(i),this.elem("link").each(function(){var e=$(this),o=e.data("service"),s=e.data("title")||n;e.attr("href","//share.yandex.ru/go.xml?service="+encodeURIComponent(o)+"&url="+encodeURIComponent(i)+"&title="+encodeURIComponent(s.replace("%s",""+t.params.title+"").replace("(URL)",i)));
})},linkClick:function(t){var e=t.currentTarget;if("_blank"!==e.target)return window.open(e.href,"shareWindow","status=1, toolbar=0, menubar=0, resizable=1, scrollbars=1, width=800px, height=500px"),!1},getPopup:function(){return this.popup||(this.popup=this.findBlockOn(this.domElem,"popup"))}},{live:!0}),BEM.DOM.decl("hockey-promo",{onSetMod:{js:{inited:function(){setTimeout(function(){BEM.blocks["i-message-locker"].acquireLock("hockey-promo").then(this._show.bind(this))}.bind(this),500)}}},_show:function(){if(this.setMod("visible","yes"),this.bindTo("inner","click",this._hide),this.bindTo("close","click",this._onClose),this.bindTo("mouseenter",this._onMouseEnter),this.bindTo("mouseleave",this._onMouseLeave),home.stat.logDOMShow(this.domElem),(new Image).src=this.params.counters.show,this._hideTimeout=setTimeout(this._hide.bind(this),this.__self.HIDE_TIMEOUT),this._$mediaFooter=$(".media-grid"),this._fixed=!0,this._$mediaFooter.length){var t=BEM.blocks["i-ua"].passiveEvents?{passive:!0}:!1,e=this._updateSticky.bind(this);window.addEventListener("scroll",e,t),window.addEventListener("resize",e,t),window.addEventListener("orientationchange",e,t),e()}},_hide:function(){this.delMod("visible"),BEM.blocks["i-message-locker"].releaseLock("hockey-promo")},_onClose:function(){this._hide(),(new Image).src=this.params.counters.close},_updateSticky:function(){var t=BEM.DOM.win.scrollTop(),e=BEM.DOM.win.height(),i=this._$mediaFooter.offset().top,n=i>t+e;n!==this._fixed&&(this._fixed=n,this.toggleMod("fixed","yes","no",n),n?this.domElem.css({top:"",bottom:""}):this.domElem.css({top:i-this.__self.OFFSET-this.domElem.height(),bottom:"auto"}))},_onMouseEnter:function(){clearTimeout(this._hideTimeout)},_onMouseLeave:function(){clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this._hide.bind(this),this.__self.HIDE_TIMEOUT)}},{OFFSET:40,HIDE_TIMEOUT:1e4}),function(){"use strict";function t(t){return t?new Date(t).getTime():(new Date).getTime()}function e(t,e){return t.reverse().splice(0,e).reverse()}var i=12096e5,n=3,o="#hs"===window.location.hash,s=home.localStorage,r=!home.disabledLS&&s,a=$(window);r&&(a.bind("beforeunload",function(){"#hs"===location.hash&&(location.hash="")}),BEM.DOM.decl("b-hs-balloon",{onSetMod:{js:function(){var t=this;if(o)return void t._setDoNotShowFlag();if(!t._getDoNotShowFlag()&&90!==Math.abs(window.orientation)){var e=t._getData();e.length<n&&BEM.blocks["i-message-locker"].acquireLock("b-hs-balloon").then(function(){t.show(),t._updateShownDates(e),t.adjustBalloonPosition(),t._bindScroll(),t.elem("close").on("click",function(){t.forceHideBalloon()})})}}},adjustBalloonPosition:function(){var t=a.scrollTop();this.domElem.css("top",t)},_bindScroll:function(){a.on("scroll.balloon",this.changeThis(this.adjustBalloonPosition))},_unbindScroll:function(){a.off("scroll.balloon")},show:function(){var t=this;window.setTimeout(function(){t.setMod("display","yes"),t.adjustBalloonPosition(),t.setMod("opacity","visible"),home.stat.logDOMShow(t.domElem)},0),window.setTimeout(function(){t.hide()},15e3),window.location.hash="hs"},hide:function(){var t=this;this.setMod("opacity","hidden"),setTimeout(function(){t._unbindScroll(),t.setMod("display","no"),BEM.blocks["i-message-locker"].releaseLock("b-hs-balloon")},500)},immediateHide:function(){this._unbindScroll(),this.setMod("display","no"),this.setMod("opacity","hidden"),BEM.blocks["i-message-locker"].releaseLock("b-hs-balloon")},forceHideBalloon:function(){this._setDoNotShowFlag(),this.hide()},_getData:function(){var e;try{e=JSON.parse(s.getItem("balloonShownDates")).filter(function(e){return!isNaN(t(e))&&t()-t(e)<i})}catch(n){e=[]}return e},_updateShownDates:function(i){i.push(t());var o=e(i,n);s.setItem("balloonShownDates",JSON.stringify(o))},_setDoNotShowFlag:function(){s.setItem("doNotShowHSBalloon",1)},_getDoNotShowFlag:function(){return s.getItem("doNotShowHSBalloon")}}))}(),function(t,e,i){function n(){f&&m&&console.log.apply(console,arguments)}function o(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?l+t.elem:"")+(t.modName?u+t.modName+u+t.modVal:"")}function s(t){var e={};return t.split(l).forEach(function(t,i){var n=[i?"elem":"block","mod","val"];t.split(u).forEach(function(t,i){e[n[i]]=t})}),e}function r(t){return t?p.push(t):!1}function a(){return p.length&&p.pop()}function c(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof e.I18N&&e.I18N._proto)return e.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=e;var u="_",l="__",h="ru",d={},p=[],f=!1,m="undefined"!=typeof console&&"function"==typeof console.log;c.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&r(this._keyset),this._keyset=o(t),this},key:function(t){return this._key=t,this},decl:function(t){var e=s(this._keyset),i="i-tanker"===e.block?"tanker":this._prj,n=e.elem||this._keyset,o=this._key;i=i18n[i]||(i18n[i]={}),n=i[n]||(i[n]={}),n[o]="function"==typeof t?t:function(e){return t};var r=d[this._lang]||(d[this._lang]={}),a=r[this._keyset]||(r[this._keyset]={});a[o]=t},val:function(t,e){var i=d[this._lang]&&d[this._lang][this._keyset],o="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!i)return n("[I18N_NO_KEYSET] %s",o),"";i=i[this._key];var s=typeof i;return"undefined"===s?(n("[I18N_NO_VALUE] %s",o),""):"string"===s?i:(e||(e=this),i.call(e,t))},_cache:function(){return d}},e.I18N=function(t){var e=function(t,i,n){return e.keyset(t).key(i,n)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,i){var n,o,s=this._proto;return s.lang(this._lang).key(t),n=s.val.call(s,i,e),o=a(),o&&s.keyset(o,!1),n},e.decl=function(t,e,i){var n,o=this._proto;i||(i={}),i.lang&&o.lang(i.lang),o.keyset(t);for(n in e)e.hasOwnProperty(n)&&o.key(n).decl(e[n]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){f=!!t},e.lang(h),e}(new c)}(this,"undefined"==typeof BEM?{}:BEM),"undefined"!=typeof BEM&&BEM.I18N&&(BEM.I18N.decl("auth",{auth:"","fill-input":"  ",login:"",logon:"",more:"",password:"",register:"",remember:" ","social-log-in":"    ",temporary:" ","wrong-characters":" ","wrong-keyboard-layout":" ","wrong-password":"     "},{lang:"ru"}),BEM.I18N.decl("b-keyboard-popup",{close:""},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"",advertising:"",afisha:"",all:"",api:"API",appsearch:"",auto:"",autoru:".",avia:"",aziada:"",ba:"",backapv:" .",balance:"",bar:"","bar-ie":"","bar-ie9":"9",bayan:" ",blogs:"",books:"",browser:"",calendar:"",captcha:"...",catalogwdgt:" ",chrome:"   ",city:"",cityday:" ",collection:"",company:"",contest:"Contest",desktop:" ",direct:"","direct.market":"",disk:"",display:"",ege:"",expert:"",feedback:" ",feedback2:" ",ff:"  ",fotki:"",fresh:"",games:"",geocontext:"",goroda:"",help:"",i:"",ie:"  ",images:"","images-com":"",interests:"",internet:"",kassa:"",keyboard:"",kraski:"",kuda:"",large:"  ",legal:" ",lenta:"",libra:"",literacy:"   ",local:"",lost:"",love:"13",mail:"",maps:"","maps-wiki":" ",market:"","market.advertising":"",master:"",metrika:"",metro:"",mobile:"",moikrug:"",money:"",museums:"",music:"","music-partner":": ",nahodki:"",nano:"",newhire:"",news:"",notifications:" ",oauth:"",online:"",openid:"OpenID",opera:"Opera Software",opinion:"",partners:"",partnersearch:"  ",passport:"",pdd:"  ",peoplesearch:"",perevod:"",probki:"",pulse:": ",punto:"Puntoswitcher",pvo:"",rabota:"",ramazan:"",rasp:"",realty:"",referats:"",rk:"?",root:".  Unix ",school:"",search:"",server:"",shtrafi:"",site:"",slovari:"",so:"",social:"",soft:"",sport:"",sprav:"",start:" ",stat:"",subs:"",taxi:"",terms:"",tests:"  ",tickets:"",time:".",toster:"",translate:"",tune:"",tv:"",uslugi:"",video:"","video-com":"",vno:"",wdgt:"",weather:"",webmaster:"",widgets:"",wordstat:"",wow:".",www:"",xmlsearch:"XML",yaca:"",yamb:" ",zakladki:""},{lang:"ru"}),BEM.I18N.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,i=e%10,n=e%100;return 1==i&&11!=n?t.one:i>1&&5>i&&(10>n||n>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count;return 0===e?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t["true"]:t["false"]}.call(this,t)}},{lang:"ru"}),BEM.I18N.decl("search2",{"search-button-text":"","search-input-label":"","search-service-label":"  ","search-web-label":"  "},{lang:"ru"}),BEM.I18N.decl("suggest2",{fact:"",group:" ",nah:" ",nav:"",text:"",traffic:"",weather:""},{lang:"ru"}),BEM.I18N.decl("suggest2-item",{"quick-answer":" "},{lang:"ru"}),BEM.I18N.decl("user",{enter:"",exit:"",letter:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" ",some:" ",many:" ",none:"  "})},letter_compose:" ",passport:"",tune:"",upload_files:" "},{lang:"ru"}),BEM.I18N.lang("ru"));var BEMHTML;!function(t){var e=function(e,i){function n(t){t=t||this,te=void 0,Zt=void 0,Qt=t.mods,Jt=t.elemMods,Yt=t.elem,Gt=t.block,Xt=t._mode;try{return o(t,ee)}catch(e){throw e.xjstContext=t,e}}function o(t,e){var i=qt(t,e);if(i!==e)return i;var i=Ht(t,e);if(i!==e)return i;var i=zt(t,e);if(i!==e)return i;var i=Wt(t,e);return i!==e?i:void 0}function s(t,e){var i=t._controlAttrs;return i.disabled?(i.disabled="disabled",i.tabindex="-1"):delete i.disabled,i.checked?i.checked="checked":delete i.checked,i.type="radio",i.name=t._radioButton.name,i}function r(t,e){var i=function(){var i,n=t.__$a0;return t.__$a0=512|t.__$a0,i=o(t,e),t.__$a0=n,i}()||{};return t._labelId&&(i.id=t._labelId),i["aria-hidden"]="true",i}function a(t,e){for(var i,n=["id","name","tabindex"],o={};i=n.pop();)t._controlAttrs[i]&&(o[i]=t._controlAttrs[i]);return"yes"===Qt.disabled&&(o.disabled="disabled"),o.tabindex=-1,o["aria-hidden"]="true",t.ctx.controlAttrs||o}function c(t,e){var i=function(){var i,n=t.__$a0;return t.__$a0=256|t.__$a0,i=o(t,e),t.__$a0=n,i}()||{};i.role="listbox",i.type="button",i["aria-haspopup"]="true",i["aria-expanded"]="false";var n=t._formSelect.tabindex;return"undefined"!=typeof n&&(i.tabindex=n),i}function u(t,e){var i=t.ctx.attrs||{};return t.ctx.href?i.href=t.ctx.href:(i.role="button",i.tabindex="0"),i}function l(t,e){var i=t.ctx.label?{elem:"label",content:t.ctx.label}:"",n=3,o=[],s=Math.ceil(t.ctx.options.length/n);return t.ctx.options.forEach(function(t,e){var i=Math.floor(e/s);o[i]||(o[i]=[]),t.elem="item",t.size=this.mods.size,t.theme=this.mods.theme,o[i].push(t)},Kt(t)),[i,{elem:"items",cls:"row",content:o.map(function(t){return{elem:"column",cls:"col",content:t}})}]}function h(t,e){var i=t.ctx,n=i.subtitle,o=BEM.blocks["i-common__string"];return[{tag:"span",elem:"reg",content:o.escapeHTML(i.title)},n?{tag:"span",elem:"details",mix:n?{elem:"full"}:!1,content:" ("+o.escapeHTML(n)+")"}:!1]}function d(t,e){var i=t.ctx.data,n=BEM.blocks["i-common__string"],o=n.escapeHTML(t.isArray(i)?i[1]:i);return n.highlight(o,t.ctx.hl)}function p(t,e){var i=t.ctx.content;return Array.isArray(i)?i.filter(function(t){return!this.isSimple(t)&&t},Kt(t)):i}function f(t,e){var i=t.ctx.selected.split(","),n={};i.forEach(function(t){n[t]=!0}),t.__selected=n;var s=t.ctx.groups||[{options:t.ctx.options}];t.ctx.content=s.map(function(t){return t.elem="group",t}).concat({elem:"selected",name:t.ctx.name,selected:i});var r,a=t.__$anflg3;t.__$anflg3=!0;var c,u=t.ctx;t.ctx=t.ctx;var l=Xt;Xt="",o(t,e),c=void 0,t.ctx=u,Xt=l,r=void 0,t.__$anflg3=a}function m(t,e){Jt=t.ctx.elemMods=Jt||t.ctx.elemMods||{};var i=Jt,n=t._radioButton,s=n.disabled,r=t.extend({},t.ctx.controlAttrs),a=void 0!==r.value&&r.value===n.value;a&&(i.checked="yes"),s&&(i.disabled="yes"),i.side||(i.side=["","right","left","both"][2*t.isFirst()+t.isLast()]),r.checked=Boolean(i.checked),r.disabled=Boolean(i.disabled),r.id||(r.id=t.generateId());var c,u=t._controlAttrs;t._controlAttrs=r;var l,h=t.__$a0;return t.__$a0=1|t.__$a0,l=o(t,e),t.__$a0=h,c=l,t._controlAttrs=u,c}function _(t,e){var i=t.ctx,n=Qt;n.theme||(n.theme="normal");var s,r=t._radioButton;t._radioButton={name:i.name,value:i.value,disabled:Boolean(n.disabled)};var a,c=t.__$a0;return t.__$a0=2|t.__$a0,a=o(t,e),t.__$a0=c,s=a,t._radioButton=r,s}function g(t,e){var i=t.ctx,n=Jt=t.ctx.elemMods=Jt||t.ctx.elemMods||{},s=t.extend({id:t.generateId(),type:"radio",name:t._name},i.controlAttrs),r=void 0!==s.value&&s.value===t._value;n.disabled||(n.disabled=t._disabled),n.checked||(n.checked=r?"yes":""),"yes"===n.disabled&&(s.disabled="disabled",s.tabindex=-1),"yes"===n.checked&&(s.checked="checked");var a,c=t._controlAttrs;t._controlAttrs=s;var u,l=t.__$a0;return t.__$a0=8|t.__$a0,u=o(t,e),t.__$a0=l,a=u,t._controlAttrs=c,a}function v(t,e){var i=t.ctx,n=Qt;n.theme||(n.theme="normal");var s,r=t._disabled;t._disabled=n.disabled;var a=t._name;t._name=i.name;var c=t._value;t._value=i.value;var u,l=t.__$a0;return t.__$a0=16|t.__$a0,u=o(t,e),t.__$a0=l,s=u,t._disabled=r,t._name=a,t._value=c,s}function b(t,e){var i=t.ctx;i.attrs=t.extend(i.attrs,{value:t._initValue});var n,s=t.__$a0;return t.__$a0=32|t.__$a0,n=o(t,e),t.__$a0=s,n}function y(t,e){var i=t.ctx,n=(function(){var i,n=Xt;return Xt="js",i=o(t,e),Xt=n,i}()||{}).live;if(n){var s=i.content.filter(function(t){return"control"===t.elem})[0].content;if(s.length){var r=function(t){for(var e,i,n=0;n<t.length&&(e=t[n],"option"===e.elem&&Object(e.attrs).selected?i=e:"option-group"===e.elem&&(i=r(e.content)),!i);n++);return i},a=r(s);a||(a=s[0],"option-group"===a.elem&&(a=a.content[0]));var c,u=t._initValue;t._initValue=a.attrs.value;var l=t._initText;t._initText=a.content;var h,d=t.__$a0;return t.__$a0=1024|t.__$a0,h=o(t,e),t.__$a0=d,c=h,t._initValue=u,t._initText=l,c}}var p,f=t.__$a0;return t.__$a0=1024|t.__$a0,p=o(t,e),t.__$a0=f,p}function w(t,e){var i,n=t.ctx,s=n.id||t.generateId(),r=t._controlAttrs;t._controlAttrs={id:s,name:n.name||s};var a=t._formSelect;t._formSelect={block:Gt,mods:Qt,tabindex:n.tabindex};var c,u=t.__$a0;return t.__$a0=2048|t.__$a0,c=o(t,e),t.__$a0=u,i=c,t._controlAttrs=r,t._formSelect=a,i}function k(t,e){var i=t.ctx,n=t._formSelect.mods,s=Qt;s.arrow="down",n.theme&&(s.theme=n.theme),n.size&&(s.size=n.size),"yes"===n.disabled&&(s.disabled="yes"),t._initText&&(i.content=t._initText);var r,a=t.ctx,c=a._theme;a._theme=!0;var u,l=t.__$a0;return t.__$a0=128|t.__$a0,u=o(t,e),t.__$a0=l,r=u,a._theme=c,r}function x(t,e){Qt.wrapped="yes",Qt["body-scroll"]="no",t.ctx.wrapperMods={behaviour:"scrollable"};var i,n=t.__$a0;return t.__$a0=4096|t.__$a0,i=o(t,e),t.__$a0=n,i}function E(t,e){var i=t.ctx,n=t["i-global"],s=i.content||i.login||t._login||(n.displayName||{}).name,r=!1;s||(/^uid-/.test(n.login)?(s="",r=!0):s=n.login);var a,c=t._maxLength;t._maxLength=void 0!==i.maxLength?i.maxLength:16;var u=t._maxLengthRelative;t._maxLengthRelative=void 0!==i.maxLengthRelative?i.maxLengthRelative:3;var l=t._userName;t._userName=s;var h=t._isUglyUserName;t._isUglyUserName=i.isUglyUserName||r;var d,p=t.__$a0;return t.__$a0=32768|t.__$a0,d=o(t,e),t.__$a0=p,a=d,t._maxLength=c,t._maxLengthRelative=u,t._userName=l,t._isUglyUserName=h,a}function M(t,e){var i=t.isFirst()?t.isLast()?"both":"first":t.isLast()?"last":"middle";return{elemMods:{position:i}}}function T(t,e){var i=[];return t.isFirst()&&i.push({elemMods:{position:"first"}}),t.isLast()&&i.push({elemMods:{position:"last"}}),i}function S(t,e){var i=t.ctx;return[{elem:"first-letter",tag:"span",content:i.charAt(0)},i.slice(1)]}function C(t,e){te=t.ctx,t.position--;var i,n=Xt;Xt="";var s=t.ctx;t.ctx={elem:"layout-unit",content:t.ctx};var r,a=t.__$a0;return t.__$a0=65536|t.__$a0,r=o(t,e),t.__$a0=a,i=r,Xt=n,t.ctx=s,i}function I(t,e){var i,n=t.ctx,s=Xt;Xt="";var r=t.ctx;t.ctx={block:"dropdown",elem:"popup",js:t.ctx.js,mix:(n.mix||[]).concat({block:"dropdown-menu",elem:"popup",elemMods:t.extend({size:t.dropdownMenuSize},Jt)}),attrs:n.attrs,content:{block:"dropdown-menu",elem:"menu",title:n.menuTitle,type:n.type,elemMods:n.menuMods,mix:n.menuMix,content:n.content}};var a,c=t.__$a0;return t.__$a0=262144|t.__$a0,a=o(t,e),t.__$a0=c,i=a,Xt=s,t.ctx=r,i}function D(t,e){var i=t.ctx,n=i.type||"vert",s=Jt;s.theme||(s.theme="ffffff");var r,a=Xt;Xt="";var c=t.ctx;t.ctx={block:"b-menu-"+n,mix:(i.mix||[]).concat({block:"dropdown-menu",elem:"menu",elemMods:s}),title:i.title,content:i.content};var u,l=t.__$a0;return t.__$a0=131072|t.__$a0,u=o(t,e),t.__$a0=l,r=u,Xt=a,t.ctx=c,r}function B(t,e){var i=Qt;i.size||(i.size="m"),i.theme||(i.theme="ffffff"),t.dropdownMenuSize=i.size,t._inDropdownMenu=!0;var n,s=t.__$a0;return t.__$a0=524288|t.__$a0,n=o(t,e),t.__$a0=s,n}function P(t,e){var i=[];return t.isFirst()&&i.push({elemMods:{position:"first"}}),t.isLast()&&i.push({elemMods:{position:"last"}}),i}function $(t,e){te=t.ctx,t.position--;var i,n=Xt;Xt="";var s=t.ctx;t.ctx={elem:"layout-unit",content:[t.ctx,t.ctx["item-content"]]};var r,a=t.__$a0;return t.__$a0=2097152|t.__$a0,r=o(t,e),t.__$a0=a,i=r,Xt=n,t.ctx=s,i}function O(t,e){te=t.ctx;var i,n=Xt;Xt="user-menu",i=o(t,e),Xt=n;var s,r=i,a=Xt;Xt="";var c=t.ctx;t.ctx={block:"dropdown-menu",mods:{user:"yes"},content:[t.ctx,{elem:"popup",elemMods:{user:"yes"},mix:[{block:"popup",mods:{"fade-out":"no","watch-scroll":"no"}}],js:{directions:"bottom-right"},content:r}]};var u,l=t.__$a0;return t.__$a0=4194304|t.__$a0,u=o(t,e),t.__$a0=l,s=u,Xt=a,t.ctx=c,s}function A(t,e){var i=t.ctx,n={};return i.url?n["aria-disabled"]="true":n.disabled="disabled",t.extend(function(){var i,n=t.__$a1;return t.__$a1=4096|t.__$a1,i=o(t,e),t.__$a1=n,i}(),n)}function F(t,e){var i=t.ctx,n=function(){var i,n=t.__$a1;return t.__$a1=8192|t.__$a1,i=o(t,e),t.__$a1=n,i}(),s={type:i.type||"button",autocomplete:"off",name:i.name,value:i.value};return t.extend(n,s)}function j(t,e){var i=t.ctx,n=i.attrs,s=function(){var i,n=t.__$a1;return t.__$a1=16384|t.__$a1,i=o(t,e),t.__$a1=n,i}(),r={href:i.url,target:i.target},a=void 0!==Object(n).rel,c=a?String(n.rel):"",u="_blank"===r.target;return u&&(r.rel="noopener",c&&-1===c.indexOf("noopener")&&(n.rel=c+" noopener")),t.extend(s,r)}function N(t,e){var i=t.ctx,n={};return n.tabindex=i.tabindex,n}function R(t,e){var i=function(){var i,n=t.__$a0;return t.__$a0=8388608|t.__$a0,i=o(t,e),t.__$a0=n,i}()||{};return i.role="button",i.tabindex=0,i["aria-haspopup"]="true",i["aria-expanded"]="false",i}function L(t,e){var i=t["i-global"],n=t._login||i.login,o=n&&/^uid-/.test(n),s={href:o?i["social-host"]:i["passport-host"]+"/passport?mode=passport"},r=t.ctx.counter||(t.ctx.counters||{}).user;return r&&(s.onmousedown=r),s}function U(t,e){var i=function(){var i,n=t.__$a0;return t.__$a0=67108864|t.__$a0,i=o(t,e),t.__$a0=n,i}()||{};return i.role="dialog",i}function W(t,e){var i=t.ctx,n=i.url,s=void 0!==n,r=Boolean(Qt.disabled);return t.extend(function(){var i,n=t.__$a1;return t.__$a1=8388608|t.__$a1,i=o(t,e),t.__$a1=n,i}(),{id:i.id,name:i.name,title:i.title,target:i.target,tabindex:r?void 0:i.tabindex,href:s?t.isSimple(n)?n:t.reapply(n):void 0,role:s?void 0:"button","aria-disabled":r?"true":void 0})}function z(t,e){var i=t.ctx,n=i.attrs,s=void 0!==Object(n).rel,r=s?String(n.rel):"";return r&&-1===r.indexOf("noopener")&&(n.rel=r+" noopener"),t.extend(function(){var i,n=t.__$a1;return t.__$a1=16777216|t.__$a1,i=o(t,e),t.__$a1=n,i}(),{rel:"noopener"})}function H(t,e){var i=t.ctx,n=i.attrs,s=void 0!==Object(n).rel,r=s?String(n.rel):"";return r&&-1===r.indexOf("noopener")&&(n.rel=r+" noopener"),t.extend(function(){var i,n=t.__$a0;return t.__$a0=536870912|t.__$a0,i=o(t,e),t.__$a0=n,i}(),{rel:"noopener"})}function q(t,e){var i=t.ctx,n=Boolean(Qt.disabled);return{type:"button",autocomplete:"off",id:i.id,title:i.title,name:i.name,value:i.val,tabindex:n?void 0:i.tabindex,disabled:n?"disabled":void 0,"aria-disabled":n?"true":void 0}}function V(t,e){var i,n=t.ctx,o={src:"https://yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""},s=["alt","width","height"];for(n.url&&(o.src=n.url);i=s.shift();)n[i]&&(o[i]=n[i]);return o}function K(t,e){return delete t._popupDefaults,[{elem:"under",elemMods:t.ctx.underMods},t.ctx.content]}function X(t,e){var i=t.ctx,n=Boolean(i.text),o=Boolean(i.icon);return[o&&t.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon"}},i.icon),n&&(t.isSimple(i.text)?o?{elem:"inner",content:t.xmlEscape(i.text)}:t.xmlEscape(i.text):i.text.block?t.util.mergeBemjson({mix:{block:"link",elem:"inner"}},i.text):t.extend({block:"link",elem:"inner"},i.text))]}function G(t,e){var i=t.ctx;return[i.icon&&{elem:"icon",icon:i.icon},i.iconLeft&&{elem:"icon",elemMods:{side:"left"},icon:i.iconLeft},i.iconRight&&{elem:"icon",elemMods:{side:"right"},icon:i.iconRight},void 0!==i.text&&(t.isSimple(i.text)?{elem:"text",content:t.xmlEscape(i.text)}:t.extend(i.text,{elem:"text"}))].filter(Boolean)}function Y(t,e){var i=t.ctx;return[i.content||function(){var i,n=Xt;return Xt="auto-content",i=o(t,e),Xt=n,i}(),["retpath","from","origin","timestamp"].map(function(t){return{elem:"hidden",mix:{elem:t},name:t,val:i[t]}})]}function J(t,e){Qt.theme||(Qt.theme="pseudo");var i,n=t.__$a1;return t.__$a1=256|t.__$a1,i=o(t,e),t.__$a1=n,i}function Q(t,e){Qt.hasOwnProperty("theme")||(Qt.theme="normal");var i,n=t.__$a1;return t.__$a1=32768|t.__$a1,i=o(t,e),t.__$a1=n,i}function Z(t,e){var i,n=t.__$a1;return t.__$a1=65536|t.__$a1,i=o(t,e),t.__$a1=n,i}function tt(t,e){var i=t.ctx,n=Qt;if(n.hasOwnProperty("theme")||(n.theme="ffffff"),n.hasOwnProperty("autoclosable")||(n.autoclosable="yes"),n.hasOwnProperty("adaptive")||(n.adaptive="yes"),n.hasOwnProperty("animate")||(n.animate="yes"),i.zIndex){var s=i.attrs||(i.attrs={});s.style=(s.style||"")+";z-index:"+i.zIndex+";"}var r,a=Xt;Xt="default";var c=t._popupDefaults;return t._popupDefaults=!0,r=o(t,e),Xt=a,t._popupDefaults=c,r}function et(t,e){var i,n=BEM.I18N("user","enter"),s=Xt;Xt="";var r=t.ctx;t.ctx=[{block:"button",mods:{pseudo:"yes",size:"m"},mix:[{block:"user",elem:"enter"}],attrs:{tabindex:"-1",title:n,"aria-label":n},content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"enter"}}],alt:""},{block:"user",elem:"enter-label"}]},{block:"domik",mods:{type:"hidden"}}];var a,c=t.__$a1;return t.__$a1=512|t.__$a1,a=o(t,e),t.__$a1=c,i=a,Xt=s,t.ctx=r,i}function it(t,e){var i,n=t.ctx.js||{},s=n.uid||t.ctx.uid||t["i-global"].uid,r=t.ctx.login,a=r||t["i-global"].login||(t["i-global"].displayName||{}).name,c=t._uid;t._uid=s;var u=t._login;t._login=r;var l=t._hasDisplayName;t._hasDisplayName=a;var h,d=t.__$a1;return t.__$a1=2048|t.__$a1,h=o(t,e),t.__$a1=d,i=h,t._uid=c,t._login=u,t._hasDisplayName=l,i}function nt(t,e){var i;t.ctx.lang?i=t.ctx.lang:BEM.blocks&&BEM.blocks["i-global"]?i=BEM.blocks["i-global"].param("lang"):t["i-global"]&&(i=t["i-global"].lang),Qt.logo=-1!==["en","tr"].indexOf(i)?"en":"ru";var n,s=t.__$a1;return t.__$a1=128|t.__$a1,n=o(t,e),t.__$a1=s,n}function ot(t,e){var i=Qt;i.theme||t.ctx.notheme||(i.theme=i.outer&&"outer"||i.pseudo&&"pseudo"||"normal"),void 0===t.ctx.tabindex&&(t.ctx.tabindex="0");var n,s=t.__$a1;return t.__$a1=33554432|t.__$a1,n=o(t,e),t.__$a1=s,n}function st(t,e){var i,n=t.__$a1;return t.__$a1=1|t.__$a1,i=o(t,e),t.__$a1=n,i}function rt(t,e){void 0===t.ctx.tabindex&&(t.ctx.tabindex="0");var i,n=t.__$a1;return t.__$a1=4|t.__$a1,i=o(t,e),t.__$a1=n,i}function at(t,e){var i=t.ctx;Qt.theme||(Qt.theme="normal"),i.checkboxAttrs=t.extend({id:t.generateId(),checked:Qt.checked?"checked":void 0,disabled:Qt.disabled?"disabled":void 0},i.checkboxAttrs),i.checkboxAttrs["aria-labelledby"]="label"+i.checkboxAttrs.id;var n,s=t._labelAttrs;t._labelAttrs={id:i.checkboxAttrs["aria-labelledby"],"for":i.checkboxAttrs.id};var r,a=t.__$a1;return t.__$a1=8|t.__$a1,r=o(t,e),t.__$a1=a,n=r,t._labelAttrs=s,n}function ct(t,e){var i=t.ctx,n=[{block:"dropdown",elem:"popup"}];i.mix&&(n=n.concat(i.mix));var s,r=Xt;Xt="";var a=t.ctx;t.ctx={block:"popup",mix:n,mods:i.mods,underMods:i.underMods,attrs:i.attrs,js:i.js,content:[{elem:"tail"},{elem:"content",content:i.content}]};var c,u=t.__$a1;return t.__$a1=16|t.__$a1,c=o(t,e),t.__$a1=u,s=c,Xt=r,t.ctx=a,s}function ut(t,e){var i=t.ctx,n=function(t,e){return t?BEM.blocks["i-global"].param(e):this["i-global"][e]}.bind(Kt(t),BEM&&BEM.blocks);void 0===i.retpath&&(i.retpath=n("retpath")),void 0===i.from&&(i.from=n("passport-msg"));var s,r=t._passportHost;t._passportHost=n("passport-host");var a,c=t.__$a1;return t.__$a1=64|t.__$a1,a=o(t,e),t.__$a1=c,s=a,t._passportHost=r,s}function lt(t,e){var i=t.ctx.attrs||{};t.ctx.src&&(i.style="background-image: url('"+t.ctx.src+"');"+(i.style||""));var n,s=t.ctx,r=s.attrs;s.attrs=i;var a,c=t.__$a1;return t.__$a1=131072|t.__$a1,a=o(t,e),t.__$a1=c,n=a,s.attrs=r,n}function ht(t,e){var i,n=Jt.weather.replace("-","minus-").replace("+","plus-").replace(/_/g,"-"),s=t.ctx,r=s.autoType;s.autoType="weather."+n+".";var a=Jt,c=a.weather;a.weather=n;var u,l=t.__$a1;return t.__$a1=262144|t.__$a1,u=o(t,e),t.__$a1=l,i=u,s.autoType=r,a.weather=c,i}function dt(t,e){var i=BEM.blocks["suggest2-detect"]&&BEM.blocks["suggest2-detect"].isSupportInlineSVG()?"svg":"png";t.ctx.autoType&&(t.ctx[i]="//yastatic.net/suggest-flag-icons/icon."+t.ctx.autoType+i);var n=t.ctx.png&&t.ctx.svg?t.ctx[i]:t.ctx.svg||t.ctx.png;n&&(t.ctx.attrs=t.extend(Object(t.ctx.attrs),{style:'background-image:url("'+n+'");'+(Object(t.ctx.attrs).style||"")}));var s,r=t.__$a1;return t.__$a1=1048576|t.__$a1,s=o(t,e),t.__$a1=r,s}function pt(t,e){t.ctx.attrs=t.extend(Object(t.ctx.attrs),{style:";color:"+t.ctx.color+";"+(Object(t.ctx.attrs).style||"")});var i,n=t.__$a1;return t.__$a1=2097152|t.__$a1,i=o(t,e),t.__$a1=n,i}function ft(t,e){if(!t.ctx)return"";var i=t.ctx,n=i.keyset,s=i.key,r=i.params||{};if(!n&&!s)return"";i.content&&(r.content=t.reapply(i.content));var a,c=Xt;Xt="";var u=t.ctx;t.ctx=BEM.I18N(n,s,r);var l,h=t.__$a1;return t.__$a1=4194304|t.__$a1,l=o(t,e),t.__$a1=h,a=l,Xt=c,t.ctx=u,a}function mt(t,e){t._iconLeft&&(Jt.lpad="yes"),t._iconRight&&(Jt.rpad="yes"),t._value||0===t._value||(Jt.visibility="visible");var i,n=t.__$a1;return t.__$a1=67108864|t.__$a1,i=o(t,e),t.__$a1=n,i}function _t(t,e){var i=function(){var i,n=Xt;return Xt="exit-url",i=o(t,e),Xt=n,i}(),n=t.ctx.counters||{};return[{elem:"item",type:"mail",content:{block:"link",mods:n.mail?{counter:"yes"}:{},url:t["i-services"].serviceUrl("mail"),counter:n.mail,content:[{block:"image",mods:{icon:"mail"}},{elem:"text",tag:"span",mix:[{block:"user-menu-update",js:{caller:t.ctx.mailCallerId}}],content:function(){var t=this.ctx.js&&this.ctx.js.mail||0,e=t?t+" ":"";return e+BEM.I18N("user","letter",{count:t})}.call(Kt(t))}]}},{elem:"item",type:"mailCompose",content:{block:"link",mods:n.write?{counter:"yes"}:{},content:BEM.I18N("user","letter_compose"),url:t["i-services"].serviceUrl("mail")+"/compose",counter:n.write}},{elem:"item",type:"disk",content:{block:"link",url:t["i-services"].serviceUrl("disk")+"?source=main-loginmenu",content:[{block:"image",mods:{icon:"disk"}},{elem:"text",tag:"span",content:BEM.I18N("user","upload_files")}]}},{elem:"item",elemMods:{separator:"yes"}},{elem:"item",type:"tune",content:{block:"link",mods:n.settings?{counter:"yes"}:{},content:BEM.I18N("user","tune"),url:t["i-services"].serviceUrl("tune"),counter:n.settings}},{elem:"item",type:"passport",content:{block:"link",mods:n.passport?{counter:"yes"}:{},content:BEM.I18N("user","passport"),url:t["i-services"].serviceUrl("passport"),counter:n.passport}},{elem:"item",type:"logout",content:{block:"link",mods:n.logout?{counter:"yes"}:{},mix:[{block:"user",js:{_uniqId:"user__logout"}},{block:"user",elem:"logout"}],content:BEM.I18N("user","exit"),url:i,counter:n.logout}}]}function gt(t,e){var i=t["i-global"],n="/passport?mode=";return n+="logout&yu="+(i.yandexuid||""),i.retpath&&(n+="&retpath="+encodeURIComponent(i.retpath)),i["passport-host"]+n}function vt(t,e){te=t.ctx;var i,n=Xt;Xt="";var s=t.ctx;t.ctx=[t._placeholder?{elem:"hint",elemMods:{fallback:"yes"},content:t._placeholder}:"",{elem:"box",content:t.ctx}];var r,a=t.__$a1;return t.__$a1=134217728|t.__$a1,r=o(t,e),t.__$a1=a,i=r,Xt=n,t.ctx=s,i}function bt(t,e){var i=t.extend({id:t._inputId,name:t._name,placeholder:t._placeholder},t.ctx.controlAttrs);return(t._value||0===t._value)&&(i.value=t._value),Qt.disabled&&(i.disabled="disabled"),t._live&&(i.autocomplete="off"),i["aria-labelledby"]=t._labelId+" "+t._hintId,i}function yt(t,e){var i,n=t.__$a1;t.__$a1=536870912|t.__$a1,i=o(t,e),t.__$a1=n;var s=i;return s+=[";(function(d,e,p){","e=d.documentElement;",'p="placeholder";','e.className+=" i-ua_"+p+(p in d.createElement("input")?"_yes":"_no")',"})(document);"].join("")}function wt(t,e){var i,n=t.__$a2;t.__$a2=1|t.__$a2,i=o(t,e),t.__$a2=n;var s=i;return s+=[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("")}function kt(t,e){var i,n=function(){var i,n=Xt;Xt="value";var s=t.ctx;return t.ctx=t.ctx.value,i=o(t,e),Xt=n,t.ctx=s,i}(),s=t.ctx.id||t.generateId(),r=t.ctx.mods||{},a=function(){var i,n=Xt;return Xt="getLive",i=o(t,e),Xt=n,i}(),c=t.ctx.placeholder;r.theme=r.theme||"normal",t.ctx.hasOwnProperty("placeholder")&&(i=t.isSimple(c)?c:t.reapply(c));var u,l=t._inputId;t._inputId=s;var h=t._labelId;t._labelId="label"+s;var d=t._hintId;t._hintId="hint"+s;var p=t._name;t._name=t.ctx.name||"";var f=t._value;t._value=n;var m=t._inputLink;t._inputLink=!0;var _=t._iconLeft;t._iconLeft=t.ctx.icon||t.ctx.iconLeft;var g=t._iconRight;t._iconRight=t.ctx.iconRight;var v=t._disabled;t._disabled=Qt&&Qt.disabled;var b=t._live;t._live=a;var y=t._placeholder;t._placeholder=i;var w=t.ctx,k=w.mods;w.mods=r;var x,E=t.__$a1;return t.__$a1=268435456|t.__$a1,x=o(t,e),t.__$a1=E,u=x,t._inputId=l,t._labelId=h,t._hintId=d,t._name=p,t._value=f,t._inputLink=m,t._iconLeft=_,t._iconRight=g,t._disabled=v,t._live=b,t._placeholder=y,w.mods=k,u}function xt(t,e){var i=t.ctx.params||{},n=t["i-global"];t._iGlobalBackup.exists()?t.ctx.reset!==!1&&t._iGlobalBackup.restore():t._iGlobalBackup.save(),i.tld&&i.tld!==n.tld&&n.setTld(i.tld);
for(var o in i)n[o]=i[o];return""}function Et(t,e){var i=function(){var i,n=Xt;return Xt="live",i=o(t,e),Xt=n,i}(),n=t.ctx.js,s=t.ctx.mods,r={autofocus:"yes",width:"content","tap-ahead":"yes"};if(n){if(n.autoFocus&&n.live)throw new Error('input block can\'t have both "live" and "autoFocus" enabled');void 0!==n.live&&(i=n.live);var a=Object.keys(r).some(function(t){return s[t]===r[t]});(a||n.autoFocus)&&(i=!1)}return i}function Mt(t,e){function i(){if("no-follow"!==this.ctx.link){var i,n=this._links[this.ctx.link],s=t.ctx;return t.ctx=n,i=Vt(o,t,e),t.ctx=s,i}}if(!cache||!t._cacheLog)return i.call(Kt(t));var n=t._buf.slice(t._cachePos).join("");t._cachePos=t._buf.length,t._cacheLog.push(n,{log:t._localLog.slice(),link:t.ctx.link});var s=i.call(Kt(t));return t._cachePos=t._buf.length,s}function Tt(t,e){var i=t.BEM,n=t.ctx,s=t._buf,r=function(){var i,n=Xt;return Xt="tag",i=o(t,e),Xt=n,i}();if("undefined"!=typeof r||(r=n.tag),"undefined"!=typeof r||(r="div"),r){var a,c;if(Gt&&n.js!==!1){var u,l=Xt;Xt="js",u=o(t,e),Xt=l,c=u,c=c?t.extend(n.js,c===!0?{}:c):n.js===!0?{}:n.js,c&&((a={})[i.INTERNAL.buildClass(Gt,n.elem)]=c)}s.push("<",r);var h,d=Xt;Xt="bem",h=o(t,e),Xt=d;var p=h;"undefined"!=typeof p||(p="undefined"!=typeof n.bem?n.bem:n.block||n.elem);var f,m=Xt;Xt="cls",f=o(t,e),Xt=m;var _=f;_||(_=n.cls);var g=n.block&&a&&!n.elem;if(p||_){if(s.push(' class="'),p){i.INTERNAL.buildClasses(Gt,n.elem,n.elemMods||n.mods,s);var v,b=Xt;Xt="mix",v=o(t,e),Xt=b;var y=v;if(n.mix&&(y=y?[].concat(y,n.mix):n.mix),y){var w={},k=function(t,e){return(t||"")+"__"+(e||"")};w[k(Gt,Yt)]=!0,t.isArray(y)||(y=[y]);for(var x=0;x<y.length;x++){var E=y[x];if(E){var M=E.block||E.elem,T=E.block||E._block||Gt,S=E.elem||E._elem||Yt,C=E.mods||Qt,I=E.elemMods||{};if(M&&s.push(" "),i.INTERNAL[M?"buildClasses":"buildModsClasses"](T,E.elem||E._elem||(E.block?void 0:Yt),E.elemMods||E.mods,s),E.js&&((a||(a={}))[i.INTERNAL.buildClass(T,E.elem)]=E.js===!0?{}:E.js,g||(g=T&&!E.elem)),M&&!w[k(T,S)]){w[k(T,S)]=!0;var D,B=Xt;Xt="mix";var P=Gt;Gt=T;var $=Yt;Yt=S;var O=Qt;Qt=C;var A=Jt;Jt=I,D=o(t,e),Xt=B,Gt=P,Yt=$,Qt=O,Jt=A;var F=D;if(F)for(var j=0;j<F.length;j++){var N=F[j];(N.block||N.elem)&&w[k(N.block,N.elem)]||(N._block=T,N._elem=S,y.splice(x+1,0,N))}}}}}}_&&s.push(p?" ":"",_),g&&s.push(" i-bem"),s.push('"')}if(a){var R,L=Xt;Xt="jsAttr",R=o(t,e),Xt=L;var U=R;s.push(" ",U||"data-bem",'="',t.attrEscape(JSON.stringify(a)),'"')}var W,z=Xt;Xt="attrs",W=o(t,e),Xt=z;var H=W;if(H=t.extend(H,n.attrs)){var q;for(q in H)"undefined"!=typeof H[q]&&s.push(" ",q,'="',t.attrEscape(H[q]),'"')}}if(t.isShortTag(r))s.push("/>");else{r&&s.push(">");var V,K=Xt;Xt="content",V=o(t,e),Xt=K;var X=V;if(X||0===X){var G,p=Gt||Yt,Y=Xt;Xt="";var J=t._notNewList;t._notNewList=!1;var Q=t.position;t.position=p?1:t.position;var Z=t._listLength;t._listLength=p?1:t._listLength;var tt=t.ctx;t.ctx=X,G=o(t,e),Xt=Y,t._notNewList=J,t.position=Q,t._listLength=Z,t.ctx=tt}r&&s.push("</",r,">")}}function St(t,e){t._listLength--;var i=t.ctx;(i&&i!==!0||0===i)&&t._buf.push(i)}function Ct(t,e){t._listLength--}function It(t,e){var i=t.ctx,n=i.length,s=0,r=t.position,a=t._notNewList;for(a?t._listLength+=n-1:(t.position=0,t._listLength=n),t._notNewList=!0;n>s;){var c,u=i[s++],l=t.ctx;t.ctx=null==u?"":u,c=o(t,e),t.ctx=l}a||(t.position=r)}function Dt(t,e){t.ctx||(t.ctx={});var i,n=t.ctx.block,s=t.ctx.elem,r=t._currBlock||Gt,a=Xt;Xt="default";var c=t._links;t._links=t.ctx.links||t._links;var u=Gt;Gt=n||(s?r:void 0);var l=t._currBlock;t._currBlock=n||s?void 0:r;var h=Yt;Yt=t.ctx.elem;var d=Qt;Qt=n?t.ctx.mods||(t.ctx.mods={}):Qt;var p=Jt;Jt=t.ctx.elemMods||{},Gt||Yt?t.position=(t.position||0)+1:t._listLength--,o(t,e),i=void 0,Xt=a,t._links=c,Gt=u,t._currBlock=l,Yt=h,Qt=d,Jt=p}function Bt(t,e){var i=Gt;if("multiselect"===i){if("selected"===Yt)return{type:"hidden",name:t.ctx.name,value:t.ctx.selected}}else if("b-autocomplete-item"===i){if(Qt&&!Yt&&"geo"===Qt.type)return{"data-id":t.ctx.geoid}}else if("radio-button"===i){var i=Yt;if("control"===i){var n=s(t,e);if(n!==e)return n}else if("radio"===i)return{"for":t._controlAttrs.id}}else if("radiobox"===i){var i=Yt;if("control"===i)return t._controlAttrs;if("radio"===i)return{"for":t._controlAttrs.id}}else if("select"===i){var i=Yt;if("item"===i){if("yes"===Jt.label&&0===(512&t.__$a0)){var n=r(t,e);if(n!==e)return n}return{id:t.generateId()}}if("group"===i)return{role:"group","aria-labelledby":t._labelId};if("control"===i){var n=a(t,e);if(n!==e)return n}}else if("button"===i){if(!Yt&&t._formSelect&&0===(256&t.__$a0)){var n=c(t,e);if(n!==e)return n}}else if("b-wdgt-preferences"===i){if("pref"===Yt&&"hidden"===t.ctx.type)return{type:"hidden",name:t.ctx.name,value:t.ctx.value}}else if("widget"===i&&"control-icon"===Yt){var n=u(t,e);if(n!==e)return n}return e}function Pt(t,e){var i=Gt;if("multiselect"===i){if("selected"===Yt)return"input"}else if("b-autocomplete-item"===i){if(!Yt)return"li"}else if("radio-button"===i){var i=Yt;if("control"===i)return"input";if("radio"===i)return"label";if(!Yt)return"span"}else if("radiobox"===i){var i=Yt;if("control"===i)return"input";if("radio"===i)return"label";if(!Yt)return"span"}else if("select"===i){var i=Yt;if("control"===i)return"select";if("text"===i)return"span";if("option-group"===i)return"optgroup";if("option"===i)return"option";if(!Yt)return"span"}else if("popup"===i){if("close"===Yt)return"i"}else if("b-wdgt-preferences"===i){var i=Yt;if("pref"===i){if("hidden"===t.ctx.type)return"input"}else if("data"===i)return"form"}else if("widget"===i){if("control-icon"===Yt)return t.ctx.href?"a":"span"}else if("user"===i){if("name"===Yt)return"span"}else if("b-menu-horiz"===i&&"item-selector"===Yt)return"span";return e}function $t(t,e){var i=Gt;if("multiselect"===i){var i=Yt;if("item"===i)return{block:"checkbox",checkboxAttrs:{value:t.ctx.value},mods:{size:Qt.size,theme:Qt.theme,checked:t.__selected[t.ctx.value]?"yes":""},content:{elem:"label",content:t.ctx.label}};if("group"===i){var n=l(t,e);if(n!==e)return n}}else if("b-autocomplete-item"===i){if(Qt&&!Yt&&"geo"===Qt.type){var n=h(t,e);if(n!==e)return n}if(!Yt){var n=d(t,e);if(n!==e)return n}}else if("radio-button"===i){if("radio"===Yt)return[{elem:"control"},{elem:"text",tag:"span",content:t.ctx.content}];if(!Yt){var n=p(t,e);if(n!==e)return n}}else if("radiobox"===i){if("radio"===Yt&&0===(4&t.__$a0))return[{elem:"box",tag:"span",content:{elem:"control"}},{elem:"text",tag:"span",content:function(){var i,n=t.__$a0;return t.__$a0=4|t.__$a0,i=o(t,e),t.__$a0=n,i}()}]}else if("popup"===i){var i=!Yt;if(i){var i=Qt;if(i){if("yes"===Qt.wrapped&&0===(8192&t.__$a0))return[function(){var i,n=t.__$a0;return t.__$a0=8192|t.__$a0,i=o(t,e),t.__$a0=n,i}(),{elem:"wrapper",elemMods:t.ctx.wrapperMods}];if("yes"===Qt["has-close"]&&0===(16384&t.__$a0))return[function(){var i,n=t.__$a0;return t.__$a0=16384|t.__$a0,i=o(t,e),t.__$a0=n,i}(),{elem:"close"}]}}}else if("b-wdgt-preferences"===i){var i=Yt;if("pref"===i){if("text"===t.ctx.type)return[{tag:"table",elem:"pref-table",content:[{tag:"td",elem:"pref-td",elemMods:{labeled:"yes"},content:{tag:"span",elem:"label",content:t.ctx.label}},{tag:"td",elem:"pref-td",content:{block:"input",mods:{size:"s"},content:{elem:"control",attrs:{name:t.ctx.name,value:t.ctx.value||t.ctx["default"]}}}}]}];if("geoselect"===t.ctx.type||"geo"===t.ctx.type||"text"===t.ctx.type)return[{tag:"table",elem:"pref-table",content:[{tag:"td",elem:"pref-td",elemMods:{labeled:"yes"},content:{tag:"span",elem:"label",content:t.ctx.label}},{tag:"td",elem:"pref-td",content:{block:"input",mods:{size:"s",suggest:"yes"},js:{dataprovider:{name:"dataprovider-geo",url:"https://suggest-maps."+document.domain.replace(/[\w\d-.]+\.(yandex\.[.\w]+)/,"$1")+"/suggest-geo"},popupMods:{fade:"yes"}},content:[{elem:"control",attrs:{value:t.ctx.geoname}},{elem:"geo",tag:"input",attrs:{type:"hidden",name:t.ctx.name,value:t.ctx.value||t.ctx["default"]}}]}}]}];var i=t.ctx.type;if("radio-button"===i)return{elem:"pref-col",elemMods:{labeled:"yes"},content:[{tag:"span",elem:"label",content:t.ctx.label},{block:"radio-button",mods:{size:"xs"},content:t.ctx.options.map(function(t){return{elem:"radio",tag:"label",content:[{elem:"control",tag:"input",attrs:{value:t.value,checked:t.value==(this.ctx.value||this.ctx["default"])?"checked":void 0,type:"radio",name:this.ctx.name}},t.label]}},Kt(t))}]};if("multi"===i)return{elem:"pref-col",content:[{elem:"label",tag:"span",content:t.ctx.label},{block:"multiselect",name:t.ctx.name,mods:{theme:"normal",size:"s"},selected:t.ctx.value,groups:t.ctx.groups,options:t.ctx.options}]};if("comment"===i)return[{elem:"comment-cell",content:{elem:"comment-title",tag:"span",content:t.ctx.value}}];if("list"===i)return[{elem:"pref-col",elemMods:{labeled:"yes"},content:[{tag:"span",elem:"label",content:t.ctx.label},{block:"select",name:t.ctx.name,mods:{theme:"normal",size:"s",layout:"fixed",width:200},js:{live:!0,elemPopupMods:{width:200}},content:[{block:"button",content:""},{elem:"control",content:t.ctx.options.map(function(t){return{elem:"option",attrs:{value:t.value,selected:t.value==(this.ctx.value||this.ctx["default"])?"selected":void 0},content:t.label}},Kt(t))}]}]}];if("bool"===t.ctx.type||"boolean"===t.ctx.type)return{elem:"pref-col",content:{block:"checkbox",mods:{size:"s",checked:"true"===t.ctx.value?"yes":""},checkboxAttrs:{value:1,name:t.ctx.name},content:{elem:"label",content:t.ctx.label}}};var n=[t.ctx.name,t.ctx.value,t.ctx.label,t.ctx.type].join(", ");if(n!==e)return n}else if("data"===i)return{elem:"table",content:t.ctx.list.filter(function(t){return t.elem="pref",t.name})}}else if("widget"===i){if("control-icon"===Yt)return{cls:"b-ico b-ico-"+t.ctx.icon}}else if("user"===i&&"name"===Yt){var s,r=Xt;Xt="pre-content";var a=t.ctx;t.ctx=t.xmlEscape(t.cleverSubstring(t._userName,t._maxLength,t._maxLengthRelative)),s=o(t,e),Xt=r,t.ctx=a;var n=s;if(n!==e)return n}return e}function Ot(t,e){var i=Gt;if("multiselect"===i){if(!Yt&&t.__$anflg3!==!0){var n=f(t,e);if(n!==e)return n}}else if("radio-button"===i){if("radio"===Yt&&0===(1&t.__$a0)){var n=m(t,e);if(n!==e)return n}if(!Yt&&0===(2&t.__$a0)){var n=_(t,e);if(n!==e)return n}}else if("radiobox"===i){if("radio"===Yt&&0===(8&t.__$a0)){var n=g(t,e);if(n!==e)return n}if(!Yt&&0===(16&t.__$a0)){var n=v(t,e);if(n!==e)return n}}else if("select"===i){var i=Yt;if("group"===i){if(0===(64&t.__$a0)){var s,r=t._labelId;t._labelId=t.generateId();var a,c=t.__$a0;t.__$a0=64|t.__$a0,a=o(t,e),t.__$a0=c,s=a,t._labelId=r;var n=s;if(n!==e)return n}}else if("control"===i&&t._initValue&&0===(32&t.__$a0)){var n=b(t,e);if(n!==e)return n}var i=!Yt;if(i){if(0===(1024&t.__$a0)){var n=y(t,e);if(n!==e)return n}if(0===(2048&t.__$a0)){var n=w(t,e);if(n!==e)return n}}}else if("button"===i){if(!Yt&&t._formSelect&&0===(128&t.__$a0)){var n=k(t,e);if(n!==e)return n}}else if("popup"===i){if(!Yt&&Qt&&"scrollable"===Qt.behaviour&&0===(4096&t.__$a0)){var n=x(t,e);if(n!==e)return n}}else if("user"===i&&"name"===Yt&&0===(32768&t.__$a0)){var n=E(t,e);if(n!==e)return n}return e}function At(t,e){var i=Gt;if("button"===i){var i=!Yt;if(i){if(Qt&&"yes"===Qt.disabled&&0===(4096&t.__$a1)){var n=A(t,e);if(n!==e)return n}if(!t.ctx.url&&0===(8192&t.__$a1)){var n=F(t,e);if(n!==e)return n}if(t.ctx.url&&0===(16384&t.__$a1)){var n=j(t,e);if(n!==e)return n}var n=N(t,e);if(n!==e)return n}}else if("user"===i){if(!Yt&&Qt&&"yes"===Qt.menu&&0===(8388608&t.__$a0)){var n=R(t,e);if(n!==e)return n}if("enter-label"===Yt)return{"aria-hidden":"true"};if(!Yt){var n=L(t,e);if(n!==e)return n}}else if("domik"===i){if(!Yt&&Qt&&"popup"===Qt.type&&0===(67108864&t.__$a0)){var n=U(t,e);if(n!==e)return n}}else if("link"===i){var i=!Yt;if(i){if(0===(8388608&t.__$a1)){var n=W(t,e);if(n!==e)return n}if("_blank"===t.ctx.target&&0===(16777216&t.__$a1)){var n=z(t,e);if(n!==e)return n}}}else if("button2"===i){var i=!Yt;if(i){var i=Qt;if(i){var i=Qt.type;if("link"===i){if(0===(268435456&t.__$a0)){var n=t.extend(function(){var i,n=t.__$a0;return t.__$a0=268435456|t.__$a0,i=o(t,e),t.__$a0=n,i}(),{target:t.ctx.target,href:Qt.disabled?void 0:t.ctx.url,autocomplete:void 0,type:void 0});if(n!==e)return n}if("_blank"===t.ctx.target&&0===(536870912&t.__$a0)){var n=H(t,e);if(n!==e)return n}}else if("submit"===i&&0===(2&t.__$a1)){var n=t.extend(function(){var i,n=t.__$a1;return t.__$a1=2|t.__$a1,i=o(t,e),t.__$a1=n,i}(),{type:"submit"});if(n!==e)return n}}var n=q(t,e);if(n!==e)return n}}else if("checkbox"===i){var i=Yt;if("control"===i)return{type:"checkbox",autocomplete:"off"};if("label"===i){var n=t.extend({"aria-hidden":"true"},t._labelAttrs);if(n!==e)return n}}else if("auth"===i){var i=Yt;if("hidden"===i)return{type:"hidden",name:t.ctx.name,value:t.ctx.val};if("social"===i)return{role:"group","aria-label":BEM.I18N("auth","social-log-in")};if(!Yt)return{method:"post",action:t.ctx.url||t._passportHost+"/auth",role:"form","aria-label":BEM.I18N("auth","auth")}}else if("image"===i){if(!Yt){var n=V(t,e);if(n!==e)return n}}else if("suggest2-item"===i){var i=Yt;if("link"===i)return{href:t.ctx.url,target:t.ctx.target};if("bullet"===i)return{"aria-hidden":!0}}else if("input"===i){var i=Yt;if("hint"===i)return{id:t._hintId,"for":t._inputId,"aria-hidden":"true"};if("clear"===i)return{unselectable:"on"}}return e}function Ft(t,e){var i=Gt;if("button"===i){var i=!Yt;if(i)return t.ctx.url?"a":"button"}else if("popup"===i){if("tail"===Yt)return"i"}else if("user"===i){if("enter-label"===Yt)return"span";if(!Yt)return"a"}else if("domik"===i){var i=Yt;if("logo"===i)return"i";if("roof-body"===i)return"i";if("roof-border"===i)return"i"}else if("link"===i){if("inner"===Yt)return"span";if(!Yt)return void 0!==t.ctx.url?"a":"span"}else if("button2"===i){if(!Yt&&Qt&&"link"===Qt.type)return"a";if("text"===Yt)return"span";if(!Yt&&void 0===t.ctx.tag)return"button"}else if("checkbox"===i){var i=Yt;if("control"===i)return"input";if("label"===i)return"label";if(!Yt)return"span"}else if("auth"===i){if("hidden"===Yt)return"input";if(!Yt)return"form"}else if("image"===i){if(!Yt)return"img"}else if("suggest2-item"===i){var i=Yt;if("text"===i){var i=Jt;if(i){var i=Jt.type;if("green-url"===i)return"div";if("title-url"===i)return"div"}return t.ctx.tag||"span"}if("link"===i)return"a";if("thumb-img"===i)return"img";if("icon"===i)return"span";if("fact"===i)return"span";if("bullet"===i)return"span";if("highlight"===i)return"b";if(!Yt)return"li"}else if("suggest2"===i){var i=Yt;if("content"===i){if(Qt&&"normal"===Qt.theme)return"ul"}else{if("a11y"===i)return"span";if("items"===i)return"ul"}}else if("input"===i){var i=Yt;if("hint"===i)return"label";if("clear"===i)return"span"}return e}function jt(t,e){var i=Gt;if("button"===i){if(!Yt)return{elem:"text",tag:"span",content:t.ctx.content}}else if("popup"===i){if(!Yt){var n=K(t,e);if(n!==e)return n}}else if("user"===i){if("enter-label"===Yt){var n=BEM.I18N("user","enter");if(n!==e)return n}if(!Yt)return t._hasDisplayName?[t.ctx.content]:{elem:"enter"}}else if("domik"===i){if(!Yt)return[{elem:"roof",content:[{elem:"roof-border"},{elem:"roof-body"},{elem:"logo"}]},{elem:"content",content:t.ctx.content}]}else if("link"===i){if(!Yt&&void 0===t.ctx.content){var n=X(t,e);if(n!==e)return n}}else if("button2"===i){if(!Yt&&!t.ctx.content){var n=G(t,e);if(n!==e)return n}}else if("checkbox"===i){var i=!Yt;if(i){if(void 0===t.ctx.content){var n=[t.util.merge({elem:"box",tag:"span",elemMods:Qt.checked?{checked:"yes"}:"",content:[t.util.merge({elem:"control",attrs:t.ctx.checkboxAttrs},t.ctx.control),{elem:"tick",tag:"i"}]},t.ctx.box),void 0!==t.ctx.text&&t.util.merge({elem:"label"},t.isSimple(t.ctx.text)?{content:t.xmlEscape(t.ctx.text)}:t.ctx.text)].filter(Boolean);if(n!==e)return n}if(void 0!==t.ctx.content)return[{elem:"box",tag:"span",elemMods:Qt.checked?{checked:"yes"}:"",content:[{elem:"control",attrs:t.ctx.checkboxAttrs},{elem:"tick",tag:"i"}]},t.ctx.content]}}else if("auth"===i){var i=Yt;if("button"===i){if(Qt&&"auto"===Qt.content)return{block:"button2",mods:{theme:"action",size:"m",type:"submit"},text:BEM.I18N("auth","logon")}}else if("register"===i){if(Qt&&"auto"===Qt.content)return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:t.ctx.url||t._passportHost+"/registration",text:BEM.I18N("auth","register")}}else if("remember"===i){if(Qt&&"auto"===Qt.content)return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:t.ctx.url||t._passportHost+"/restoration",text:BEM.I18N("auth","remember")}}else if("haunter"===i){if(Qt&&"auto"===Qt.content)return{block:"checkbox",mods:{theme:"normal",size:"m"},checkboxAttrs:{autocomplete:"off",name:"twoweeks",value:"no"},text:BEM.I18N("auth","temporary")}}else if("password"===i){if(Qt&&"auto"===Qt.content)return{block:"input",mods:{theme:"normal",size:"m"},name:"passwd",placeholder:BEM.I18N("auth","password"),content:[{elem:"control",attrs:{type:"password",maxlength:256,"aria-required":"true"}}]}}else if("username"===i&&Qt&&"auto"===Qt.content)return{block:"input",mods:{theme:"normal",size:"m"},name:"login",placeholder:BEM.I18N("auth","login"),content:[{elem:"control",attrs:{"aria-required":"true"}}]};if(!Yt){var n=Y(t,e);if(n!==e)return n}}else if("suggest2-item"===i){if("thumb"===Yt&&!t.ctx.content)return{elem:"thumb-wrapper",attrs:{style:t.ctx.bgColor?"background-color: "+t.ctx.bgColor+";border: none;":""},content:{elem:"thumb-img",attrs:{src:t.ctx.src,alt:t.ctx.alt}}};if(!Yt&&Qt&&"link"===Qt.interact)return{elem:"link",url:t.ctx.url,target:t.ctx.target||"_blank",content:t.ctx.content};var i=Yt;if("text"===i)return Array.isArray(t.ctx.content)?t.ctx.content.map(function(t){return"string"==typeof t?this.xmlEscape(t):t},Kt(t)):t.xmlEscape(t.ctx.content);if("fact"===i){if(Qt&&"nav"===Qt.type){var n=t.xmlEscape(t.ctx.content);if(n!==e)return n}return[{block:"suggest2",elem:"a11y",content:BEM.I18N("suggest2-item","quick-answer")+": "},t.escapeContent===!1?t.ctx.content:t.xmlEscape(t.ctx.content)]}if("highlight"===i){var n=t.xmlEscape(t.ctx.content);if(n!==e)return n}}else if("input"===i&&"clear"===Yt&&!t.ctx.content)return"";return e}function Nt(t,e){var i=Yt;if("name"===i){if(0===(33554432&t.__$a0)){var n,s=Xt;Xt="";var r=t.ctx;t.ctx=t["i-services"].serviceName(t.ctx.id);var a,c=t.__$a0;t.__$a0=33554432|t.__$a0,a=o(t,e),t.__$a0=c,n=a,Xt=s,t.ctx=r;var u=n;if(u!==e)return u}}else if("url"===i&&0===(16777216&t.__$a0)){var l,h=Xt;Xt="";var d=t.ctx;t.ctx=t["i-services"].serviceUrl(t.ctx.id,t.ctx.region);var p,f=t.__$a0;t.__$a0=16777216|t.__$a0,p=o(t,e),t.__$a0=f,l=p,Xt=h,t.ctx=d;var u=l;if(u!==e)return u}return e}function Rt(t,e){var i=Yt;if("img"===i){if(0===(131072&t.__$a1)){var n=lt(t,e);if(n!==e)return n}}else if("icon"===i){if(Jt.weather&&0===(262144&t.__$a1)){var n=ht(t,e);if(n!==e)return n}if(Jt.traffic&&0===(524288&t.__$a1)){var s,r=t.ctx,a=r.autoType;r.autoType="traffic."+Jt.traffic+".";var c,u=t.__$a1;t.__$a1=524288|t.__$a1,c=o(t,e),t.__$a1=u,s=c,r.autoType=a;var n=s;if(n!==e)return n}if(0===(1048576&t.__$a1)){var n=dt(t,e);if(n!==e)return n}}else if("fact"===i&&t.ctx.color&&0===(2097152&t.__$a1)){var n=pt(t,e);if(n!==e)return n}return e}function Lt(t,e){var i=Gt;if("button"===i){var i=!Yt;if(i){if(Qt&&"yes"===Qt.pseudo&&0===(256&t.__$a1)){var n=J(t,e);if(n!==e)return n}if(0===(32768&t.__$a1)){var n=Q(t,e);if(n!==e)return n}if(0===(65536&t.__$a1)){var n=Z(t,e);if(n!==e)return n}}}else if("popup"===i){if(!Yt&&!t._popupDefaults){var n=tt(t,e);if(n!==e)return n}}else if("user"===i){if("enter"===Yt&&0===(512&t.__$a1)){var n=et(t,e);if(n!==e)return n}if(!Yt&&0===(2048&t.__$a1)){var n=it(t,e);if(n!==e)return n}}else if("i-services"===i){var n=Nt(t,e);if(n!==e)return n}else if("domik"===i){var i=!Yt;if(i){if(Qt&&"hidden"===Qt.type&&0===(32&t.__$a1)){var s,r=Xt;Xt="";var a=t.ctx;t.ctx={block:"auth",mix:[{block:"domik",mods:{type:"hidden"}}],js:!1,attrs:{style:"display:none"},content:[{tag:"input",attrs:{name:"login"}},{tag:"input",attrs:{name:"passwd",type:"password"}}]};var c,u=t.__$a1;t.__$a1=32|t.__$a1,c=o(t,e),t.__$a1=u,s=c,Xt=r,t.ctx=a;var n=s;if(n!==e)return n}if(!Object(t.ctx.mods).logo&&0===(128&t.__$a1)){var n=nt(t,e);if(n!==e)return n}}}else if("link"===i){if(!Yt&&0===(33554432&t.__$a1)){var n=ot(t,e);if(n!==e)return n}}else if("button2"===i){var i=!Yt;if(i){if(Qt&&"link"===Qt.type&&0===(1&t.__$a1)){var n=st(t,e);if(n!==e)return n}if(0===(4&t.__$a1)){var n=rt(t,e);if(n!==e)return n}}}else if("checkbox"===i){if(!Yt&&0===(8&t.__$a1)){var n=at(t,e);if(n!==e)return n}}else if("dropdown"===i){if("popup"===Yt&&0===(16&t.__$a1)){var n=ct(t,e);if(n!==e)return n}}else if("auth"===i){if(!Yt&&0===(64&t.__$a1)){var n=ut(t,e);if(n!==e)return n}}else if("suggest2-item"===i){var n=Rt(t,e);if(n!==e)return n}else if("i-bem"===i){if("i18n"===Yt&&0===(4194304&t.__$a1)){var n=ft(t,e);if(n!==e)return n}}else if("input"===i&&"hint"===Yt&&0===(67108864&t.__$a1)){var n=mt(t,e);if(n!==e)return n}return e}function Ut(t,e){var i=Gt;if("button"===i){if(!Yt)return!0}else if("user"===i){if(!Yt&&0===(1024&t.__$a1)){var n=t.extend({uid:t._uid,login:t._login||t["i-global"].login},function(){var i,n=t.__$a1;return t.__$a1=1024|t.__$a1,i=o(t,e),t.__$a1=n,i}());if(n!==e)return n}}else if("domik"===i){if(!Yt&&Qt&&"hidden"===Qt.type)return!1}else if("link"===i){if(!Yt)return{_tabindex:t.ctx.tabindex,origTabindex:t.ctx.tabindex}}else if("button2"===i){var i=!Yt;if(i){if(Qt&&"link"===Qt.type&&0===(134217728&t.__$a0)){var n=t.extend(function(){var i,n=t.__$a0;return t.__$a0=134217728|t.__$a0,i=o(t,e),t.__$a0=n,i}(),{_url:Qt.disabled?t.ctx.url:void 0});if(n!==e)return n}return{_tabindex:t.ctx.tabindex}}}else if("checkbox"===i){if(!Yt){var n=t.extend({live:!1},t.ctx.js);if(n!==e)return n}}else if("dropdown"===i){if(!Yt)return!0}else if("auth"===i){if(!Yt)return!0}else if("suggest2-item"===i&&!Yt)return!0;return e}function Wt(t,e){var i=Xt;if("attrs"!==i){if("tag"!==i){if("content"===i){var i=Gt;if("input"===i){if("box"===Yt){var n=[t._iconLeft&&{elem:"icon",icon:t._iconLeft,elemMods:{side:"left"}},t._iconRight&&{elem:"icon",icon:t._iconRight,elemMods:{side:"right"}},!Qt.clear&&{elem:"clear",elemMods:t._value?{visibility:"visible"}:void 0,content:"&nbsp;"},t.ctx.content].filter(Boolean);if(n!==e)return n}}else if("i-ua"===i){var i=!Yt;if(i){if(0===(536870912&t.__$a1)){var n=yt(t,e);if(n!==e)return n}if(0===(1&t.__$a2)){var n=wt(t,e);if(n!==e)return n}var n=[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("");if(n!==e)return n}}return t.ctx.content}if("default"===i){var i=Gt;if("input"===i){if(!Yt&&0===(268435456&t.__$a1)){var n=kt(t,e);if(n!==e)return n}}else if("i-global"===i&&!Yt){var n=xt(t,e);if(n!==e)return n}}else{if("js"===i){if("input"===Gt&&!Yt)return{live:t._live};return}if("mix"===i)return;if("bem"===i){if("i-ua"===Gt&&!Yt)return!1;return}if("value"===i){var i=Gt;if("input"===i){var i=!Yt;if(i){if(t.isSimple(t.ctx))return t.ctx;if(t.ctx){var n=t.reapply(t.ctx);if(n!==e)return n}return""}}}else if("getLive"===i){if("input"===Gt&&!Yt){var n=Et(t,e);if(n!==e)return n}}else if("live"===i){if("input"===Gt&&!Yt)return!1}else{if("jsAttr"===i)return;if("cls"===i)return}}if(t.ctx&&!t.isSimple(t.ctx)&&t.ctx.link){var n=Mt(t,e);if(n!==e)return n}var n,i=Xt;if("default"===i){var n=Tt(t,e);if(n!==e)return n}else if(""===i){if(t.isSimple(t.ctx)){var n=St(t,e);if(n!==e)return n}if(!t.ctx){var n=Ct(t,e);if(n!==e)return n}if(t.isArray(t.ctx)){var n=It(t,e);if(n!==e)return n}var n=Dt(t,e);if(n!==e)return n}throw new Error("Match failed, no templates found")}var i=Gt;if("input"===i){var i=Yt;if("control"===i)return"input";if("box"===i)return"span";if(!Yt)return"span"}else if("i-ua"===i){if(!Yt)return"script"}else if("i-global"===i&&!Yt)return""}else{var i=Gt;if("input"===i){if("control"===Yt){var n=bt(t,e);if(n!==e)return n}}else if("i-ua"===i&&!Yt)return{nonce:t.ctx.nonce||t["i-global"].nonce}}}function zt(t,e){var i=Xt;if("attrs"===i){var n=At(t,e);if(n!==e)return n}else if("tag"===i){var n=Ft(t,e);if(n!==e)return n}else if("content"===i){var n=jt(t,e);if(n!==e)return n}else if("default"===i){var n=Lt(t,e);if(n!==e)return n}else if("js"===i){var n=Ut(t,e);if(n!==e)return n}else if("mix"===i){var i=Gt;if("dropdown"===i){if(!Yt)return[{mods:{action:"closed"}}]}else if("suggest2-item"===i&&"text"===Yt&&Qt&&"link"===Qt.interact&&("nav"===Qt.type||"icon"===Qt.type))return{mods:{type:"url"}}}else if("user-menu"===i){if("user"===Gt&&!Yt&&Qt&&"yes"===Qt.menu){var n=_t(t,e);if(n!==e)return n}}else if("exit-url"===i){if("user"===Gt&&!Yt&&Qt&&"yes"===Qt.menu){var n=gt(t,e);if(n!==e)return n}}else if("auto-content"===i){var i=Gt;if("auth"===i){var i=!Yt;if(i)return Qt&&"auto"===Qt.content?[{elem:"username"},{elem:"password"},{elem:"row",elemMods:{button:"yes"},content:[{elem:"haunter"},{elem:"button"}]},{elem:"social"},{elem:"row",content:[{elem:"remember"},{elem:"register"}]}]:[]}}else if("bem"===i&&"suggest2-item"===Gt&&"highlight"===Yt)return!1;if("input"===Gt&&"control"===Yt&&te!==t.ctx&&"default"===Xt&&0===(134217728&t.__$a1)){var n=vt(t,e);if(n!==e)return n}return e}function Ht(t,e){var i=Xt;if("attrs"===i){var i=Gt;if("b-menu-horiz"===i){if("item"===Yt&&t._inDropdownMenu)return{role:"menuitem"};if(!Yt&&t._inDropdownMenu)return{role:"menu"}}else if("b-menu-vert"===i){if("item"===Yt&&t._inDropdownMenu)return{role:"menuitem"};if(!Yt&&t._inDropdownMenu)return{role:"menu"}}}else if("tag"===i){var i=Gt;if("b-menu-vert"===i){var i=Yt;if("item-selector"===i)return"span";if("layout-unit"===i)return"li";if("submenu"===i)return"ul"}}else if("default"===i){var i=Gt;if("b-menu-vert"===i){if("item-content"===Yt&&0===(1048576&t.__$a0)){var n,s=t._inItemContent;t._inItemContent=!0;var r,a=t.__$a0;t.__$a0=1048576|t.__$a0,r=o(t,e),t.__$a0=a,n=r,t._inItemContent=s;var c=n;if(c!==e)return c}}else if("dropdown-menu"===i){var i=Yt;if("popup"===i){if(0===(262144&t.__$a0)){var c=I(t,e);if(c!==e)return c}}else if("menu"===i&&0===(131072&t.__$a0)){var c=D(t,e);if(c!==e)return c}if(!Yt&&0===(524288&t.__$a0)){var c=B(t,e);if(c!==e)return c}}}else if("js"===i){var i=Gt;if("b-menu-horiz"===i){if(!Yt)return!0}else if("dropdown-menu"===i&&!Yt)return!0}else if("mix"===i&&"b-menu-vert"===Gt&&"layout-unit"===Yt){var c=P(t,e);if(c!==e)return c}if("b-menu-vert"===Gt&&"item"===Yt&&te!==t.ctx&&"default"===Xt&&!t._inItemContent&&0===(2097152&t.__$a0)){var c=$(t,e);if(c!==e)return c}var i=Xt;if("tag"===i){if("b-menu-vert"===Gt&&"layout"===Yt)return"ul"}else if("content"===i&&"b-menu-vert"===Gt&&!Yt)return[t.ctx.title,{elem:"layout",content:t.ctx.content}];if("user"===Gt&&!Yt&&Qt&&"yes"===Qt.menu&&te!==t.ctx&&"default"===Xt&&t["i-global"].login&&0===(4194304&t.__$a0)){var c=O(t,e);if(c!==e)return c}return e}function qt(t,e){var i=Xt;if("attrs"===i){var n=Bt(t,e);if(n!==e)return n}else if("tag"===i){var n=Pt(t,e);if(n!==e)return n}else if("content"===i){var n=$t(t,e);if(n!==e)return n}else if("default"===i){var n=Ot(t,e);if(n!==e)return n}else if("js"===i){var i=Gt;if("multiselect"===i){if(!Yt)return!0}else if("b-autocomplete-item"===i){var i=!Yt;if(i)return!0}else if("radio-button"===i){if(!Yt){var n=t.extend({live:!1},t.ctx.js);if(n!==e)return n}}else if("radiobox"===i){if(!Yt){var n=t.extend({live:!1},t.ctx.js);if(n!==e)return n}}else if("select"===i){if(!Yt){var n=t.extend({live:!1},t.ctx.js);if(n!==e)return n}}else if("user"===i){if("name"===Yt)return{maxLength:t._maxLength,maxLengthRelative:t._maxLengthRelative,isUglyUserName:t._isUglyUserName}}else if("user-menu-update"===i&&!Yt)return!0}else if("mix"===i){var i=Gt;if("b-autocomplete-item"===i){if(!Yt)return[{mods:{pers:t.ctx.pers?"yes":""}}]}else if("select"===i){if("group"===Yt){var n=M(t,e);if(n!==e)return n}}else if("button"===i){if(!Yt&&t._formSelect)return[{block:t._formSelect.block,elem:"button"}]}else if("b-menu-horiz"===i&&"layout-unit"===Yt){var n=T(t,e);if(n!==e)return n}}else if("pre-content"===i&&"user"===Gt&&"name"===Yt){var n=S(t,e);if(n!==e)return n}if("b-menu-horiz"===Gt&&"item"===Yt&&te!==t.ctx&&"default"===Xt&&0===(65536&t.__$a0)){var n=C(t,e);if(n!==e)return n}return e}function Vt(t,e){var i=Xt;Xt=e._mode;var n=Gt;Gt=e.block;var o=Yt;Yt=e.elem;var s=Jt;Jt=e.elemMods;var r=Qt;Qt=e.mods;var a=t(e);return Xt=i,Gt=n,Yt=o,Jt=s,Qt=r,a}function Kt(t){return t._mode=Xt,t.block=Gt,t.elem=Yt,t.elemMods=Jt,t.mods=Qt,t}"undefined"==typeof Vow&&(t.Vow=i.vow||i.Vow);var Xt="",Gt="",Yt="",Jt=null,Qt=null,Zt=!1,te=!1,ee={};return e.apply=n,[function(){!function(t,e){if(!e.I18N){t.BEM=e;var i=e.I18N=function(t,e){return e};i.keyset=function(){return i},i.key=function(t){return t},i.lang=function(){}}}(this,"undefined"==typeof BEM?{}:BEM)},function(t){function e(t,e){this.ctx="undefined"==typeof t?"":t,this.apply=e,this._buf=[],this._=this,this._start=!0,this._mode="",this._listLength=0,this._notNewList=!1,this._inside=!1,this.position=0,this.block=i,this.elem=i,this.mods=i,this.elemMods=i}var i,n={},o=Object.prototype.toString,s=Array.isArray||function(t){return"[object Array]"===o.call(t)},r={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};!function(t,e){function i(t,e,i){i.push(s,t,s,e)}function n(t,e,n,o){o.push(t),n&&i(e,n,o)}function o(t,o,s,a,c){n(t,e,e,c),c.push(r,o),a&&i(s,a,c)}var s="_",r="__",a="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:a,MOD_DELIM:s,ELEM_DELIM:r,buildModPostfix:function(t,e,n){var o=n||[];return i(t,e,o),n?o:o.join("")},buildClass:function(t,i,s,r,a){var c=typeof s;if("string"===c?"string"!=typeof r&&(a=r,r=s,s=i,i=e):"undefined"!==c?(a=s,s=e):i&&"string"!=typeof i&&(a=i,i=e),!(i||s||a))return t;var u=a||[];return i?o(t,i,s,r,u):n(t,s,r,u),a?u:u.join("")},buildModsClasses:function(t,e,i,s){var r=s||[];if(i){var a;for(a in i)if(i.hasOwnProperty(a)){var c=i[a];null!=c&&(c=String(i[a]),c&&(r.push(" "),e?o(t,e,a,c,r):n(t,a,c,r)))}}return s?r:r.join("")},buildClasses:function(t,i,s,r){var a=r||[];return i?o(t,i,e,e,a):n(t,e,e,a),this.buildModsClasses(t,i,s,r),r?a:a.join("")}}}(n),e.prototype.isArray=s,e.prototype.isSimple=function(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e},e.prototype.isShortTag=function(t){return r.hasOwnProperty(t)},e.prototype.extend=function(t,e){if(!t||!e)return t||e;var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n};var a=0,c=n.__id=Number(new Date),u="__"+c,l=function(){return"uniq"+c+ ++a};e.prototype.identify=function(t,e){return t?e||t[u]?t[u]:t[u]=l():l()},e.prototype.xmlEscape=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.prototype.attrEscape=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.prototype.BEM=n,e.prototype.isFirst=function(){return 1===this.position},e.prototype.isLast=function(){return this.position===this._listLength},e.prototype.generateId=function(){return this.identify(this.ctx)},t.BEMContext=e;var h=t.apply;t.apply=e.apply=function(t){var i=new e(t||this,h);return i.apply(),i._buf.join("")},e.prototype.reapply=function(){var t="undefined"!=typeof Xt&&Xt,i="undefined"!=typeof Gt&&Gt,n="undefined"!=typeof Yt&&Yt,o="undefined"!=typeof Jt&&Jt,s="undefined"!=typeof Qt&&Qt,r=this._mode,a=this.block,c=this.elem,u=this.elemMods,l=this.mods,h=e.apply.apply(this,arguments);return t&&(Xt=t),i&&(Gt=i),n&&(Yt=n),o&&(Jt=o),s&&(Qt=s),this._mode=r,this.block=a,this.elem=c,this.elemMods=u,this.mods=l,h}},function(t){var e=t.BEMContext.prototype,i=t["i-global"]=e["i-global"]=e.extend({lang:"ru",tld:"ru","content-region":"ru","click-host":"//clck.yandex.ru","passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","export-host":"https://export.yandex.ru",login:"","lego-static-host":"https://yastatic.net/lego/2.10-142"},e["i-global"]);i._public={id:!0,lang:!0,tld:!0,"content-region":!0,"user-region":!0,login:!0,displayName:!0,index:!0,yandexuid:!0,
"passport-host":!0,"pass-host":!0,"passport-msg":!0,"static-host":!0,"lego-static-host":!0,"social-host":!0,clck:!0,"click-host":!0,"export-host":!0,"i-host":!0,"social-retpath":!0,"lego-path":!0,sid:!0,retpath:!0,uid:!0},i.makePublic=function(t,n){return"object"==typeof t?void(i._public=e.extend(i._public,t)):("undefined"==typeof n&&(n=!0),void(i._public[t]=n))},i.isPublic=function(t){return Boolean(i._public[t])},i.setTld=function(t){var e="tr"===t?"yandex.com.tr":"yandex."+t,n=-1!==["ua","by","kz"].indexOf(t)?"yandex.ru":e;i.tld=t,i["content-region"]=t,i["click-host"]="//clck."+n,i["passport-host"]="https://passport."+n,i["pass-host"]="https://pass."+e,i["social-host"]="https://social."+e,i["export-host"]="https://export."+e},e._iGlobalBackup={_backup:null,exists:function(){return Boolean(this._backup)},save:function(){this._backup=e.extend({},i)},restore:function(){var t;for(t in i)delete i[t];for(t in this._backup)i[t]=this._backup[t]}}},function(t){t.BEMContext.prototype.cleverSubstring=function(t,e,i){return t.length>e+i?t.substring(0,e-1)+"":t}},function(t){t.BEMContext.prototype.util||(t.BEMContext.prototype.util={})},function(t){function e(t){return"[object Object]"===o.call(t)}function i(t,n,o){var s,r;t=Object(t),n=Object(n);for(s in n)r=o&&o(t[s],n[s],s),void 0!==r?t[s]=r:e(t[s])&&e(n[s])?t[s]=i(t[s],n[s],o):t[s]=n[s];return t}function n(t,e){return i(t,e,function(t,e,i){return"mix"===i?[].concat(t,e):void 0})}var o=Object.prototype.toString;t.BEMContext.prototype.util.merge=i,t.BEMContext.prototype.util.mergeBemjson=n},function(t){var e=t["i-services"]=t.BEMContext.prototype["i-services"]={},i=t["i-global"];e.serviceName=function(t){return BEM.I18N("i-services",t||i.id)},e.serviceUrl=function(t,n){var o=i;return t||(t=o.id),n||(n=o["content-region"]),e._data[t](n)}},function(t){t["i-services"]._data={404:function(t){switch(t){case"ua":return"http://404.yandex.ua";case"by":return"http://404.yandex.by";case"kz":return"http://404.yandex.kz";case"com":return"http://404.yandex.com";case"tr":return"http://404.yandex.com.tr";default:return"http://404.yandex.ru"}},adresa:function(){return"http://adresa.yandex.ru"},advertising:function(t){switch(t){case"ua":return"https://advertising.yandex.ua";case"by":return"https://advertising.yandex.by";case"kz":return"https://advertising.yandex.kz";case"com":return"https://advertising.yandex.com";default:return"https://advertising.yandex.ru"}},afisha:function(t){switch(t){case"ua":return"https://afisha.yandex.ua";case"by":return"https://afisha.yandex.by";case"kz":return"https://afisha.yandex.kz";default:return"https://afisha.yandex.ru"}},all:function(t){switch(t){case"ua":return"//www.yandex.ua/all";case"by":return"//www.yandex.by/all";case"kz":return"//www.yandex.kz/all";case"com":return"//www.yandex.com/all";case"tr":return"//www.yandex.com.tr/all";default:return"//www.yandex.ru/all"}},api:function(t){switch(t){case"com":return"http://api.yandex.com";default:return"http://api.yandex.ru"}},appsearch:function(){return"//appsearch.yandex.ru"},auto:function(t){switch(t){case"ua":return"https://auto.yandex.ua";default:return"https://auto.yandex.ru"}},autoru:function(t){switch(t){case"ua":return"https://auto.ru";default:return"https://auto.ru"}},avia:function(t){switch(t){case"ua":return"https://avia.yandex.ua";default:return"https://avia.yandex.ru"}},aziada:function(){return"http://aziada2011.yandex.kz"},ba:function(t){switch(t){case"ua":return"https://ba.yandex.ua";case"by":return"https://ba.yandex.by";case"kz":return"https://ba.yandex.kz";case"com":return"https://ba.yandex.com";default:return"https://ba.yandex.ru"}},backapv:function(){return"http://backapv.yandex.ru"},balance:function(){return"https://balance.yandex.ru"},bar:function(t){switch(t){case"ua":return"http://bar.yandex.ua";case"by":return"http://bar.yandex.by";case"kz":return"http://bar.yandex.kz";case"tr":return"http://bar.yandex.com.tr";default:return"http://bar.yandex.ru"}},"bar-ie":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},"bar-ie9":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},bayan:function(){return"http://bayan.yandex.ru"},blogs:function(t){switch(t){case"ua":return"https://blogs.yandex.ua";case"by":return"https://blogs.yandex.by";case"kz":return"https://blogs.yandex.kz";default:return"https://blogs.yandex.ru"}},books:function(){return"http://books.yandex.ru"},browser:function(t){switch(t){case"ua":return"https://browser.yandex.ua";case"by":return"https://browser.yandex.by";case"kz":return"https://browser.yandex.kz";case"com":return"https://browser.yandex.com";case"tr":return"https://browser.yandex.com.tr";default:return"https://browser.yandex.ru"}},calendar:function(){return"https://calendar.yandex.ru"},catalogwdgt:function(){return"https://www.yandex.ru/catalog"},chrome:function(){return"http://chrome.yandex.ru"},city:function(t){switch(t){case"ua":return"https://gorod.yandex.ua";case"by":return"https://gorod.yandex.by";case"kz":return"https://gorod.yandex.kz";case"com":return"https://city.yandex.com";case"tr":return"https://city.yandex.com.tr";default:return"https://gorod.yandex.ru"}},cityday:function(){return"http://cityday.yandex.ru"},collection:function(){return"https://collection.yandex.ru"},company:function(t){switch(t){case"com":return"https://company.yandex.com";case"tr":return"https://company.yandex.com.tr";default:return"https://company.yandex.ru"}},contest:function(t){switch(t){case"com":return"https://contest.yandex.com";default:return"https://contest.yandex.ru"}},desktop:function(){return"http://desktop.yandex.ru"},direct:function(t){switch(t){case"ua":return"https://direct.yandex.ua";case"by":return"https://direct.yandex.by";case"kz":return"https://direct.yandex.kz";case"com":return"https://direct.yandex.com";default:return"https://direct.yandex.ru"}},"direct.market":function(){return"https://partner.market.yandex.ru/yandex.market/"},disk:function(t){switch(t){case"ua":return"https://disk.yandex.ua";case"by":return"https://disk.yandex.by";case"kz":return"https://disk.yandex.kz";case"com":return"https://disk.yandex.com";case"tr":return"https://disk.yandex.com.tr";default:return"https://disk.yandex.ru"}},display:function(t){switch(t){case"tr":return"https://display.yandex.com.tr";default:return"https://display.yandex.ru"}},ege:function(t){switch(t){case"ua":return"https://zno.yandex.ua";default:return"https://ege.yandex.ru"}},expert:function(){return"http://expert.yandex.ru"},feedback:function(t){switch(t){case"ua":return"http://feedback.yandex.ua";case"by":return"http://feedback.yandex.by";case"kz":return"http://feedback.yandex.kz";case"com":return"http://feedback.yandex.com";case"tr":return"http://contact.yandex.com.tr";default:return"http://feedback.yandex.ru"}},feedback2:function(t){switch(t){case"ua":return"//feedback2.yandex.ua";case"by":return"//feedback2.yandex.by";case"kz":return"//feedback2.yandex.kz";case"com":return"//feedback2.yandex.com";case"tr":return"//contact2.yandex.com.tr";default:return"//feedback2.yandex.ru"}},ff:function(){return"http://ff.yandex.ru"},fotki:function(){return"https://fotki.yandex.ru"},fresh:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://www.yandex.com";case"tr":return"https://www.yandex.com.tr";default:return"https://yandex.ru"}},fx:function(t){switch(t){case"ua":return"https://fx.yandex.ua";case"tr":return"https://fx.yandex.com.tr";default:return"https://fx.yandex.ru"}},games:function(){return"http://games.yandex.ru"},geocontext:function(){return"https://geocontext.yandex.ru"},goroda:function(){return"http://goroda.yandex.ru"},help:function(t){switch(t){case"ua":return"https://help.yandex.ua";case"com":return"https://help.yandex.com";case"tr":return"https://yardim.yandex.com.tr";default:return"https://help.yandex.ru"}},i:function(){return"http://i.yandex.ru"},ie:function(t){switch(t){case"ua":return"https://ie.yandex.ua";case"tr":return"https://ie.yandex.com.tr";default:return"https://ie.yandex.ru"}},images:function(t){switch(t){case"ua":return"https://yandex.ua/images/";case"by":return"https://yandex.by/images/";case"kz":return"https://yandex.kz/images/";case"com":return"https://yandex.com/images/";case"tr":return"https://yandex.com.tr/gorsel/";default:return"https://yandex.ru/images/"}},"images-com":function(){return"https://yandex.com/images/"},interests:function(){return"http://interests.yandex.ru"},internet:function(t){switch(t){case"com":return"//internet.yandex.com";case"tr":return"//internet.yandex.com.tr";default:return"//internet.yandex.ru"}},kassa:function(){return"https://kassa.yandex.ru"},keyboard:function(){return"http://www.yandex.ru/index_engl_qwerty.html"},kraski:function(){return"http://kraski.yandex.ru"},kuda:function(){return"http://kuda.yandex.ru"},large:function(){return"http://large.yandex.ru"},legal:function(t){switch(t){case"ua":return"https://yandex.ua/legal";case"com":return"https://yandex.com/legal";case"tr":return"https://yandex.com.tr/legal";default:return"https://yandex.ru/legal"}},lenta:function(){return"http://lenta.yandex.ru"},literacy:function(){return"https://literacy.yandex.ru"},local:function(){return"http://local.yandex.ru"},lost:function(){return"http://lost.yandex.ru"},love:function(){return"http://love.yandex.ru"},mail:function(t){switch(t){case"ua":return"https://mail.yandex.ua";case"by":return"https://mail.yandex.by";case"kz":return"https://mail.yandex.kz";case"com":return"https://mail.yandex.com";case"tr":return"https://mail.yandex.com.tr";default:return"https://mail.yandex.ru"}},maps:function(t){switch(t){case"ua":return"https://maps.yandex.ua";case"com":return"https://maps.yandex.com";case"tr":return"https://harita.yandex.com.tr";default:return"https://maps.yandex.ru"}},"maps-com":function(){return"https://maps.yandex.com"},"maps-wiki":function(){return"http://nk.yandex.ru"},market:function(t){switch(t){case"ua":return"https://market.yandex.ua";case"by":return"https://market.yandex.by";case"kz":return"https://market.yandex.kz";case"tr":return"https://market.yandex.com.tr";default:return"https://market.yandex.ru"}},"market.advertising":function(){return"https://welcome.advertising.yandex.ru/market/"},master:function(){return"https://master.yandex.ru"},metrika:function(t){switch(t){case"ua":return"https://metrika.yandex.ua";case"by":return"https://metrika.yandex.by";case"kz":return"https://metrika.yandex.kz";case"com":return"https://metrica.yandex.com";case"tr":return"https://metrica.yandex.com.tr";default:return"https://metrika.yandex.ru"}},metro:function(){return"https://metro.yandex.ru"},mobile:function(t){switch(t){case"ua":return"https://mobile.yandex.ua";case"tr":return"https://mobil.yandex.com.tr";default:return"https://mobile.yandex.ru"}},moikrug:function(){return"http://moikrug.ru"},money:function(){return"https://money.yandex.ru"},museums:function(){return"http://18.yandex.ru"},music:function(t){switch(t){case"ua":return"https://music.yandex.ua";case"by":return"https://music.yandex.by";case"kz":return"https://music.yandex.kz";default:return"https://music.yandex.ru"}},"music-partner":function(){return"http://music-partner.yandex.ru"},nahodki:function(t){switch(t){case"ua":return"https://nahodki.yandex.ua";case"kz":return"https://nahodki.yandex.kz";default:return"https://nahodki.yandex.ru"}},nano:function(){return"http://nano.yandex.ru"},news:function(t){switch(t){case"ua":return"https://news.yandex.ua";case"by":return"https://news.yandex.by";case"kz":return"https://news.yandex.kz";case"tr":return"https://haber.yandex.com.tr";default:return"https://news.yandex.ru"}},"news-com":function(){return"https://news.yandex.com"},notifications:function(t){switch(t){case"ua":return"https://notifications.yandex.ua";case"by":return"https://notifications.yandex.by";case"kz":return"https://notifications.yandex.kz";case"com":return"https://notifications.yandex.com";case"tr":return"https://notifications.yandex.com.tr";default:return"https://notifications.yandex.ru"}},oauth:function(t){switch(t){case"com":return"https://oauth.yandex.com";default:return"https://oauth.yandex.ru"}},online:function(){return"http://online.yandex.ru"},openid:function(){return"http://openid.yandex.ru"},opera:function(t){switch(t){case"tr":return"https://opera.yandex.com.tr";default:return"https://opera.yandex.ru"}},opinion:function(){return"http://opinion.yandex.ru"},partners:function(t){switch(t){case"ua":return"http://partner.yandex.ua";case"by":return"http://partner.yandex.by";case"kz":return"http://partner.yandex.kz";case"com":return"http://partner.yandex.com";default:return"http://partner.yandex.ru"}},partnersearch:function(){return"http://yandex.ru"},passport:function(t){switch(t){case"ua":return"https://passport.yandex.ua";case"by":return"https://passport.yandex.by";case"kz":return"https://passport.yandex.kz";case"com":return"https://passport.yandex.com";case"tr":return"https://passport.yandex.com.tr";default:return"https://passport.yandex.ru"}},pdd:function(){return"https://pdd.yandex.ru"},peoplesearch:function(t){switch(t){case"ua":return"http://people.yandex.ua";default:return"http://people.yandex.ru"}},perevod:function(){return"https://perevod.yandex.ru"},probki:function(t){switch(t){case"ua":return"http://probki.yandex.ua";default:return"http://probki.yandex.ru"}},pulse:function(t){switch(t){case"ua":return"http://blogs.yandex.ua/pulse";case"by":return"http://blogs.yandex.by/pulse";case"kz":return"http://blogs.yandex.kz/pulse";default:return"http://blogs.yandex.ru/pulse"}},punto:function(){return"https://punto.yandex.ru"},pvo:function(){return"http://ask.yandex.ru"},rabota:function(t){switch(t){case"ua":return"https://rabota.yandex.ua";case"by":return"https://rabota.yandex.by";case"kz":return"https://rabota.yandex.kz";default:return"https://rabota.yandex.ru"}},rasp:function(t){switch(t){case"ua":return"https://rasp.yandex.ua";case"by":return"https://rasp.yandex.by";case"kz":return"https://rasp.yandex.kz";case"tr":return"https://seferler.yandex.com.tr";default:return"https://rasp.yandex.ru"}},realty:function(t){switch(t){case"ua":return"https://realty.yandex.ua";case"by":return"https://realty.yandex.by";case"kz":return"https://realty.yandex.kz";default:return"https://realty.yandex.ru"}},referats:function(){return"https://referats.yandex.ru"},review:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://www.yandex.com";case"tr":return"https://www.yandex.com.tr";default:return"https://yandex.ru"}},rk:function(){return"http://rk.yandex.ru"},root:function(){return"https://root.yandex.ru"},school:function(){return"http://school.yandex.ru"},search:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},serp:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://www.yandex.com";case"tr":return"https://www.yandex.com.tr";default:return"https://yandex.ru"}},server:function(){return"http://company.yandex.ru/technology/server/"},shtrafi:function(){return"https://money.yandex.net/debts"},site:function(t){switch(t){case"ua":return"https://site.yandex.ua";case"tr":return"https://ozel.yandex.com.tr";default:return"https://site.yandex.ru"}},slovari:function(t){switch(t){case"ua":return"https://slovari.yandex.ua";case"by":return"https://slovari.yandex.by";case"kz":return"https://slovari.yandex.kz";default:return"https://slovari.yandex.ru"}},so:function(){return"http://so.yandex.ru"},social:function(t){switch(t){case"ua":return"https://social.yandex.ua";case"by":return"https://social.yandex.by";case"kz":return"https://social.yandex.kz";case"com":return"https://social.yandex.ru";case"tr":return"https://social.yandex.com.tr";default:return"https://social.yandex.ru"}},soft:function(t){switch(t){case"ua":return"https://soft.yandex.ua";case"tr":return"https://soft.yandex.com.tr";default:return"https://soft.yandex.ru"}},sport:function(t){switch(t){case"ua":return"http://sport.yandex.ua";case"by":return"http://sport.yandex.by";case"kz":return"http://sport.yandex.kz";case"tr":return"http://spor.yandex.com.tr";default:return"http://sport.yandex.ru"}},sprav:function(t){switch(t){case"ua":return"https://sprav.yandex.ua";case"by":return"https://sprav.yandex.by";case"kz":return"https://sprav.yandex.kz";case"tr":return"https://rehber.yandex.com.tr";default:return"https://sprav.yandex.ru"}},start:function(t){switch(t){case"ua":return"https://help.yandex.ua/start/";case"com":return"https://help.yandex.com/start/";case"tr":return"https://yardim.yandex.com.tr/start";default:return"https://help.yandex.ru/start/"}},stat:function(t){switch(t){case"ua":return"https://stat.yandex.ua";case"by":return"https://stat.yandex.by";default:return"https://stat.yandex.ru"}},subs:function(){return"https://subs.yandex.ru"},taxi:function(){return"https://taxi.yandex.ru"},terms:function(){return"http://terms.yandex.ru"},tests:function(){return"http://tests.yandex.ru"},ticket:function(){return"http://ticket.yandex.ru"},time:function(t){switch(t){case"ua":return"https://time.yandex.ua";case"by":return"https://time.yandex.by";case"kz":return"https://time.yandex.kz";case"com":return"https://time.yandex.com";case"tr":return"https://saat.yandex.com.tr";default:return"https://time.yandex.ru"}},toster:function(){return"http://toster.yandex.ru"},translate:function(t){switch(t){case"ua":return"https://translate.yandex.ua";case"by":return"https://translate.yandex.by";case"kz":return"https://translate.yandex.kz";case"com":return"https://translate.yandex.com";case"tr":return"https://ceviri.yandex.com.tr";default:return"https://translate.yandex.ru"}},tune:function(t){switch(t){case"ua":return"https://tune.yandex.ua";case"by":return"https://tune.yandex.by";case"kz":return"https://tune.yandex.kz";case"com":return"https://tune.yandex.com";case"tr":return"https://tune.yandex.com.tr";default:return"https://tune.yandex.ru"}},tv:function(t){switch(t){case"ua":return"https://tv.yandex.ua";case"by":return"https://tv.yandex.by";case"kz":return"https://tv.yandex.kz";default:return"https://tv.yandex.ru"}},uslugi:function(){return"http://uslugi.yandex.ru"},video:function(t){switch(t){case"ua":return"http://yandex.ua/video/";case"by":return"http://yandex.by/video/";case"kz":return"http://yandex.kz/video/";case"com":return"https://yandex.com/video/";case"tr":return"http://yandex.com.tr/video/";default:return"http://yandex.ru/video/"}},"video-com":function(){return"https://yandex.com/video/"},vno:function(){return"https://zno.yandex.ua"},wdgt:function(t){switch(t){case"ua":return"https://wdgt.yandex.ua";case"by":return"https://wdgt.yandex.by";case"kz":return"https://wdgt.yandex.kz";case"tr":return"https://wdgt.yandex.com.tr";default:return"https://wdgt.yandex.ru"}},weather:function(t){switch(t){case"ua":return"https://pogoda.yandex.ua";case"by":return"https://pogoda.yandex.by";case"kz":return"https://pogoda.yandex.kz";case"tr":return"https://hava.yandex.com.tr";default:return"https://pogoda.yandex.ru"}},webmaster:function(t){switch(t){case"ua":return"https://webmaster.yandex.ua";case"com":return"https://webmaster.yandex.com";case"tr":return"https://webmaster.yandex.com.tr";default:return"https://webmaster.yandex.ru"}},widgets:function(t){switch(t){case"ua":return"https://widgets.yandex.ua";case"by":return"https://widgets.yandex.by";case"kz":return"https://widgets.yandex.kz";case"tr":return"https://widgets.yandex.com.tr";default:return"https://widgets.yandex.ru"}},wordstat:function(){return"https://wordstat.yandex.ru"},wow:function(){return"http://my.ya.ru"},www:function(t){switch(t){case"ua":return"https://www.yandex.ua";case"by":return"https://www.yandex.by";case"kz":return"https://www.yandex.kz";case"com":return"https://www.yandex.com";case"tr":return"https://www.yandex.com.tr";default:return"https://www.yandex.ru"}},xmlsearch:function(t){switch(t){case"ua":return"https://xml.yandex.ua";case"by":return"https://xml.yandex.by";case"kz":return"https://xml.yandex.kz";case"com":return"https://xml.yandex.com";case"tr":return"https://xml.yandex.com.tr";default:return"https://xml.yandex.ru"}},yaca:function(t){switch(t){case"ua":return"https://yaca.yandex.ua";case"by":return"https://yaca.yandex.by";default:return"https://yaca.yandex.ru"}},yamb:function(){return"https://yamb.yandex.ru"},zakladki:function(){return"http://zakladki.yandex.ru"}}},function(t,e){var n=t.BEMContext||e.BEMContext;if(!n)throw Error("Seems like you have no base templates from i-bem.bemhtml");n.prototype.require=function(t){return i[t]}}].forEach(function(t){t(e,this)},{recordExtensions:function(t){t.__$anflg3=!1,t.ctx=void 0,t._mode=void 0,t._controlAttrs=void 0,t.__$a0=0,t._radioButton=void 0,t._disabled=void 0,t._name=void 0,t._value=void 0,t._labelId=void 0,t._theme=void 0,t._initValue=void 0,t._initText=void 0,t._formSelect=void 0,t._maxLength=void 0,t._maxLengthRelative=void 0,t._userName=void 0,t._isUglyUserName=void 0,t._inItemContent=void 0,t.__$a1=0,t._labelAttrs=void 0,t._passportHost=void 0,t._uid=void 0,t._login=void 0,t._hasDisplayName=void 0,t.attrs=void 0,t.autoType=void 0,t.elemMods=void 0,t.weather=void 0,t._popupDefaults=void 0,t._inputId=void 0,t._hintId=void 0,t._inputLink=void 0,t._iconLeft=void 0,t._iconRight=void 0,t._live=void 0,t._placeholder=void 0,t.mods=void 0,t.__$a2=0,t.cache=void 0,t._cachePos=void 0,t._cacheLog=void 0,t._localLog=void 0,t.link=void 0,t._notNewList=void 0,t.position=void 0,t._listLength=void 0,t.block=void 0,t.elem=void 0,t._links=void 0,t._currBlock=void 0},resetApplyNext:function(t){t.__$a0=0,t.__$a1=0,t.__$a2=0}}),e},i=!0;"object"==typeof module&&"object"==typeof module.exports&&(exports.BEMHTML=e({},{}),i=!1),"object"==typeof modules&&(modules.define("BEMHTML",[],function(t){t(e({},{}))}),i=!1),i&&(BEMHTML=e({},{}),t.BEMHTML=BEMHTML)}(this),home.lang={catalog:{returnToCatalog:"  "},desktopNotifications:{route:{halfhour:" ",hour_and_half:"  "}},hockey:{Draws:"",Wins:"",addWidget:" ",bullits:"",canceled:" ",draw:["","",""],end:"","final":"",final_1:"1- ",final_2:"2- ",final_3:"3- ",finishB:"",finishOT:"",finished:" ",gamefinished:"",games:"",goals:"",goes:"",group_name:" %s",history:" ",minute:"",month:"",more:"",news:"",now:"",otime:"",overtime:"",overview:"  ",performance:"  ",place3:"  3- ",points:"",postponed:" ",q_play_off:"1/8 ",quarterfinal:"1/4 ",schedule:" ",semifinal:"",shootout:"  ",sites:"",start:"  %s",stat_close:" ",stat_show:" ",stream:" ",stream_short:"",subtitle_2015:"117 , ",subtitle_2016:"622 , ",suspended:" ",till_start:"  %s",till_start_minutes:["","",""],time1:"1 ",time1_goes:"  ",time2:"2 ",time2_goes:"  ",time3:"3 ",time3_goes:"  ",timeout:"",title:"   ",title_2013:"  2013",title_2014:"  2014",title_2015:"    2017",title_2016:"    2016",title_bullet:"    ",title_finished:" ",title_overtime:"   ",title_short:" 2017",title_short_2016:" ",title_short_tv:"  ",title_short_tv_2017:"   2017",title_touch:"  &nbsp;",today:"",tomorrow:"",tournament_table:" ",tv:"-",webcard_all:" ",win:[" %s %d "," %s %d "," %s %d "],yesterday:""},informationsMessages:{beforeReset:" ,       ?     .",cannotSaveSettings:",     .  .",maxCount:"   ",settingsNotSaved:"      ."},mail:{num:{fresh_messages_short:["","",""],new_messages_short:["","",""]}},promo:{"themes-promo__close":" "},rates:{newalt:{ceni:"%s:  ",index:"%s:  ",korz:" ",kurs:"%s:  "}},securityMessages:{noYandexWidgetAddedA:"       ."},spok_yes:{month_accus:{1:"",10:"",11:"",12:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""}},"time-alert":{date_format_long:"%day %month %year ",date_format_short:"%day %month"},traffic:{personal:{hour_abbr:"&nbsp;&nbsp;",inbypasslink:"    %time",minutes_abbr:"&nbsp;"}},widgetbaloon:{cancel:"",keep:""},widgetcontrol:{"delete":"",setup:"",share:" "}},function(){function execView(t,e,i){function n(t,e){var i=t instanceof Function?t:templates[t],s="";return i&&(s=i.cached?i(o,n):i(e,o,n)),s}var o=i||e||{};for(var s in contextDefaults)o.hasOwnProperty(s)||(o[s]=contextDefaults[s]);return n(t,e)}function views(t,e){if(e){var i=templates[t];e instanceof Function?templates[t]=e:templates[t]=home.templateGenerator(e,t),i&&(templates[t].base=i)}}!function(){"use strict";home.templateRe=/([\s\S]*?)\[%\s+(.+?)\s+%\]/g,home.parseRules={l10n:function(t,e,i){return e.l10n||home.error("Can't proccess 'l10n:"+i+"', check context of template"),e.l10n&&e.l10n(i)},baseViews:function(t,e,i){return e.baseViews(i,t)},bem:function(t,e,i){i=i.split("."),t=t||{};var n=i.pop(),o=i.pop(),s=i.pop();switch(n){case"class":return home.getBEMClassname(o,(s?t[s]:t)||{});case"js":return home.getBEMParams(t[o||"js"]||{});case"attrs":return home.getAttributes(t[o||"attrs"])}}};var encode=function(t){return t.replace(/(["\\])/g,"\\$&").replace(/\n/g,"\\n")},getPropAccessor=function(t){return/^[a-zA-Z_$][\w$]*$/.test(t)?"."+t:'["'+t+'"]'},stringRule=function(t){return'"'+encode(t.contents)+'"'},parsedRule=function(t){return"home.parseRules"+getPropAccessor(t.name)+'(data,req,"'+t.expr+'")'},subCallRule=function(t){var e=t.prefix,i=t.key;if("exec"===e)return'(execView("'+i+'",data)||"")';if(e&&"data"!==e&&"req"!==e)throw new TypeError('Unknown builtin prefix "'+e+'"');if(-1===i.indexOf(".")){var n=getPropAccessor(i);return e?"("+e+n+"!==undefined?"+e+n+':"")':"(data"+n+"!==undefined?data"+n+":req"+n+"!==undefined?req"+n+':(execView("'+i+'",data)||""))'}e||(e="data"),i=i.split(".");var o=i.pop();return"(q="+e+getPropAccessor(i.shift())+",q"+i.map(function(t){return"&&(q=q"+getPropAccessor(t)+")"}).join("")+"&&q"+getPropAccessor(o)+'||"")'},rules={};rules.string=stringRule,rules.parsed=parsedRule,rules.subCall=subCallRule;var createTemplateFunction=function(statements,name){var items=[];return name=name&&name.replace(/\-/g,"_")||"viewTemplate",statements.forEach(function(t){var e=rules[t.type](t);e&&items.push(e)}),eval("0,function "+name+"(data,req,execView){var q;return "+items.join("+")+";}")};home.templateGenerator=function(t,e){var i=[],n={data:!0,req:!0,exec:!0},o=t.replace(home.templateRe,function(t,e,o){if(e&&i.push({type:"string",contents:e}),o){var s=o.replace(/\s/g,"").split(":");s.length>1&&!(s[0]in n)?i.push({type:"parsed",name:s[0],expr:s[1]}):i.push({type:"subCall",prefix:s.length>1?s[0]:"",key:s.length>1?s[1]:s[0]})}return""});return o&&i.push({type:"string",contents:o}),createTemplateFunction(i,e)}}();var templates=home.view?Object.create(home.view.templates):{},contextDefaults={l10n:home.l10n,stat:{logShow:function(){},getAttr:function(t){return t?' data-statlog="'+t+'"':""},getAdaptiveCounter:function(t,e){return t?' data-statlog="'+t+'"'+(e?' data-statlog-redir="0"':"")+' data-statlog-autoshow="1"':""},getClientCounter:function(t,e){return t?' data-statlog="'+t+'"'+(e?' data-statlog-redir="0"':""):""}},settingsJs:{add:function(t,e,i){home["export"][i]||(home["export"][i]={}),home["export"][i][t]=e}},beget:function(t){return x.beget(this,t)}};views.cached=function(t,e){e&&(views(t,e),templates[t].cached=!0)},home.view=execView,home.view.templates=templates,home.view.define=views,views("promo-curtain__message",'<div class="promo-curtain__message" style="top:[% data:offset.top %]px"><div class="promo-curtain__arrow" style="left:[% data:offset.left %]px"></div><div class="promo-curtain__header">[% data:langs.header %]</div><div class="promo-curtain__line">[% data:langs.line1 %]</div><div class="promo-curtain__line">[% data:langs.line2 %]</div></div>'),views("promo-curtain__layout",'<div class="[% bem:promo-curtain.class %]"><div class="promo-curtain__agreement-text">[% data:langs.agreement %]</div></div>'),views("b-disk-uploader__force_item",'<div class="b-disk-uploader__force_item"><label class="b-disk-uploader__force_label" for="[% id %]"><input type="checkbox" id="[% id %]" class="b-disk-uploader__force_box">[% text %]</label></div>'),views("link",function(t,e,i){var n={};return t.mod=t.mod?["link",t.mod.trim()].join(" "):"link",t.title&&(n.title=t.title),t.target&&(n.target=t.target),t.attrs=(t.attrs||"")+home.getAttributes(n),i("link__tmpl",t)}),views("link__tmpl",'<a href="[% data:href %]" class="[% data:mod %]"[% data:attrs %][% data:stat %][% data:link__target %][% data:link__title %]>[% link__icon %][% data:content %]</a>'),views("consistency-popup__html",'<div [% className %] style="position:fixed;z-index:[% zIndex %];bottom:16px;right:16px;width:340px;color:#FFF;background-color:#E26A68;padding:16px;"><div style="font-size:120%;margin-top:5px;margin-bottom:10px;">[% title %]</div><div style="line-height: 18px;">[% text %]</div><div style="margin-top: 30px;text-align: right"><a class="button_theme_cpopup" style="margin-right: 16px;" role="button" href="[% yesLink %]"><div class="button_theme_cpopup__text b-inline" style="background-color: #EB9796;">[% yesButton %]</div></a><a class="button_theme_cpopup" role="button" href="[% noLink %]"><div class="button_theme_cpopup__text b-inline">[% noButton %]</div></a></div><div class="button_theme_cpopup__close"><div class="button_theme_cpopup__close_img"></div></div></div>'),views("b-time-banner__text",function(t){var e="";return e+='<span class="b-time-banner__text">',e+=t.text.replace("%local_date","<b>("+t.now+")</b>").replace("%current_date","<b>("+t.timestamp+")</b>")+(t.helpQuery?" "+t.helpQuery:""),e+="</span>"}),views("b-time-banner__inner",function(t,e,i){var n=i("b-time-banner__text",t);return t.helpUrl?i("link",{content:n,stat:e.stat.getAdaptiveCounter("wrong_date."+t.type+".url"),href:t.helpUrl,mod:"b-time-banner__link"}):n}),views("datetime__date",'<span class="datetime__date"><span class="datetime__day">[% day %] </span><span class="datetime__month">[% month %], </span><span class="datetime__wday">[% wday %] </span></span>'),views("inline-stocks__head",function(t){if(!t.col2&&!t.col4)return"";for(var e=[t.col2,t.col4],i="",n=0;n<e.length;n++)e[n]&&(i+='<th class="inline-stocks__cell" colspan="2">'+e[n]+"</th>");return'<tr class="inline-stocks__head">'+i+"</tr>"}),views("inline-stocks__t-title",function(t,e,i){
var n,o;switch(t.type){case"currency":n="",o="";break;case"cash":n="",o=""}return i("inline-stocks__head",{col2:n,col4:o})}),views("inline-stocks__date",function(t){var e=t.datetime||t.time||t.date;return e?'<td><i class="inline-stocks__cell_datetime">'+e+"</i></td>":""}),views("inline-stocks__delta",function(t,e){var i,n=t.data;return t.klimit&&(i="     %d%%".replace(/%d%(%)/,t.klimit+"$1")),n.delta?'<td><i class="inline-stocks__cell inline-stocks__cell_type_delta inline-stocks__cell_delta_'+(n.is_hot?"hot":"small text_gray_yes")+'"'+(i&&n.is_hot?' title="'+i+'"':"")+' aria-hidden="true">'+n.delta+'</i><span class="a11y-hidden">'+String(n.delta).replace("","-")+"</span></td>":""}),views("inline-stocks__rows-by-type",function(t,e,i){var n=t.klimit;switch(t.type){case"cash":return t.rows.map(function(t){return i("inline-stocks__val",t)}).join("");case"currency":return t.rows.map(function(t,e){return(e?i("inline-stocks__delta",{data:t,klimit:n}):"")+i("inline-stocks__val",t)}).join("");case"indexes":var o=t.rows[0];return i("inline-stocks__date",o)+i("inline-stocks__delta",{data:o,klimit:n})+i("inline-stocks__val",o)}}),views("inline-stocks__replaceCaps",function(t){return t.text.replace(/<(\w)>([^<]+)<\/\1>/g,function(t,e,i){switch(e){case"c":return'<span class="inline-stocks__caps">'+i+"</span>";case"d":return'<span class="inline-stocks__numbers">'+i+"</span>";default:return t}})}),views("inline-stocks__block-content",function(t,e,i){for(var n="",o=t.rows,s=0,r=o.length;r>s;s++){var a=o[s],c=e.l10n("rates.newalt."+a.alt).replace(/%s/,a.text);n+='<tr class="inline-stocks__row_id_'+a.id+'" data-klimit="'+a.klimit+'"><td class="inline-stocks__row-title">'+i("home-link",{href:!e.nolinks&&a.href,mix:"home-link_blue_yes",attrs:{title:c,"data-statlog":"news_rates_manual.popup."+a.id},content:i("inline-stocks__replaceCaps",{text:a.text_caps})})+(a.nscale?'<span class="inline-stocks__row-nscale">'+a.nscale+"</span>":"")+"</td>"+i("inline-stocks__rows-by-type",{type:t.type,rows:a.data,klimit:a.klimit})+"</tr>"}return'<h2 class="inline-stocks__table-title">'+t.text+'</h2><table class="inline-stocks__table inline-stocks__table_type_'+t.type+" inline-stocks__table_id_"+t.i+'">'+i("inline-stocks__t-title",t)+n+"</table>"}),views("inline-stocks__grid",function(t){var e,i=t.data,n=i.length/2,o="",s="";for(e=0;n>e;e++)o+='<div class="inline-stocks__grid-item inline-stocks__grid-item_first">'+i[2*e]+"</div>",s+=i[2*e+1]?'<div class="inline-stocks__grid-item">'+i[2*e+1]+"</div>":"";return'<tr class="inline-stocks__grid-row"><td>'+o+"</td><td>"+s+"</td></tr>"}),views("inline-stocks__tables",function(t,e,i){var n,o=t.blocks;return o?(n=o.map(function(t,e){return t.i=e,"cash_rate"===t.type&&(t.type="cash"),i("inline-stocks__block-content",t)}),i("inline-stocks__grid",{data:n})):""}),views("inline-stocks__nscale",'<span class="inline-stocks__nscale text_gray_yes">([% nscale %])</span>'),views("inline-stocks__val",'<td><i class="inline-stocks__cell">[% value %]</i></td>'),views("home-link",function(t,e,i){var n="a",o=t.attrs||{},s=t.mods||{},r=t.inlineIcon||"";return t.href?o.href=t.href:n="span",t.title&&(o.title=t.title),t.target&&(o.target=t.target),i("home-link__tmpl",{attrs:o,tag:n,mix:t.mix,mods:s,content:t.content,stat:t.stat,icon:r})}),views("home-link__tmpl",'<[% data:tag %] class="[% bem:home-link.class %]"[% bem:attrs %][% data:stat %]>[% data:icon %][% data:content %]</[% tag %]>'),views("inline-hockey__stream-link",function(t,e,i){return i("inline-hockey__stream-link-layout",{mix:"stream-control__link link link_black_yes link_pseudo_yes",title:"",stat:e.stat.getAttr("hockey.inline.stream-link"),attrs:{"data-stream-channel":"20170505","data-stream-from":"hockey-inline-link",tabindex:0,role:"button"}})}),views("inline-hockey__status-text",function(t,e,i){var n,o,s;return"not_started"===t.m_status?t.time:(n=e.l10n("hockey."+t.m_status),"finished"===t.m_status&&(4===t.m_finished?(o="   ",s=""):5===t.m_finished&&(o="    ",s="")),n+(o?i("inline-hockey__status_finished",{title:o,text:s}):""))}),views("inline-hockey__score-array",function(t){var e=t.m_result,i=t.m_status;return e&&2===e.length&&"postponed"!==i&&"canceled"!==i&&"not_started"!==i?[e[0],e[1]]:!1}),views("inline-hockey__stream-link-layout",'<span class="[% bem:inline-hockey__stream-link.class %]"[% stat %] [% bem:attrs %]>[% title %]</span>'),views("inline-hockey__status_finished",'&nbsp;<span title="[% title %]">([% text %])</span>'),views("inline-hockey__inline-score__item",'<span class="inline-hockey__inline-score-item">[% score %]</span>'),views("i-install-download__content",'<div class="[% bem:i-install-download__content.class %]" [% bem:attrs %] data-bem="[% bem:js %]"><div class="i-install-download__target-pointer"><div class="i-install-download__arrow"><div class="i-install-download__stick"></div></div></div><div class="i-install-download__install-text">[% text %]</div><div class="i-install-download__agreement">[% legalText %] <a href="[% legalLink %]" class="link link_gray_yes i-install-download__legal">[% legalLinkText %]</a></div></div>'),views("popup",function(t){var e=t.mods||{},i=t.attrs||{};return e.theme=e.theme||"ffffff",void 0===e.autoclosable&&(e.autoclosable="yes"),void 0===e.adaptive&&(e.adaptive="yes"),void 0===e.animate&&(e.animate="yes"),t.zIndex&&(i.style=i.style||"",i.style+="z-index:"+t.zIndex),'<div class="i-bem '+home.getBEMClassname("popup",{mods:e,mix:t.mix})+'" data-bem="{&quot;popup&quot;:'+home.getBEMParams(t.js?t.js:[])+(t.jsMix?","+t.jsMix:"")+'}"'+home.getAttributes(i)+'><div class="'+home.getBEMClassname("popup__under",{mods:t.underMods,mix:t.underMix})+'"></div>'+(t.tail?'<i class="popup__tail"></i>':"")+(t.content?'<div class="'+home.getBEMClassname("popup__content",{mods:t.contentMods,mix:t.contentMix})+'">'+t.content+"</div>":"")+("yes"===e["has-close"]?'<i class="popup__close"'+(t.statClose||"")+">"+(t.closeText?'<div class="popup__close-text">'+t.closeText+"</div>":"")+"</i>":"")+"</div>"}),views("input__ahead",'<div class="input__ahead"><input class="input__ahead-hint" type="text" disabled="disabled" aria-hidden="true"><span class="input__ahead-filler"></span><div class="input__ahead-hintholder"></div></div>'),views("b-banner__link",'<a href="[% data:url %]" target=_blank>[% data:content %]</a>'),views("b-banner__img","<img [% bem:attrs %]>"),views("b-banner__iframe",'<iframe class="banner-iframe" name="[% data:name %]" src="[% data:src %]" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"  width="728" height="90"></iframe>'),views("stream-control__loader",'<div class="stream-control__loader"><div class="stream-control__close" role="button" tabindex="0" title=""></div><div class="stream-control__spin spin2 spin2_size_l spin2_progress_yes"></div></div>'),views("etrains__hint",'<div class="etrains__hint"><span class="etrains__hint-baloon"><i class="etrains__hint-baloon-tail-bd"></i><i class="etrains__hint-baloon-tail"></i><span class="inline-stocks__item__baloon_inner">[% express %][% name %]</span></span></div>'),views("etrains__directionLayout",'<span class="etrains__direction link link_black_yes">&#8203;[% stfrom %]&nbsp; [% stto %]</span>'),views("etrains__time",'<li class="etrains__track-time"><a href="[% href %]" class="link link_black_yes etrains__time[% timeClass %]"[% stat %][% target %]>[% time %]</a>[% hint %]</li>'),views("etrains__trackEmpty",'<div class="etrains__track">[% text %]</div>'),views("etrains__track",'<span class="etrains__track etrains__track-[% trackClass %]">[% direction %]<ul class="etrains__times-list">[% times %]</ul></span>'),views("etrains__draw",function(t,e,i){var n,o,s="",r=[],a=(t.from||"").replace(/\s*\(.*$/,""),c=(t.to||"").replace(/\s*\(.*$/,""),u=t.today,l=t.tomorrow,h="rasp."+t.counterType+".track";if(u&&u.length||l&&l.length){if(u&&u.length)for(n=0,o=u.length;o>n;n++)r.push(i("etrains__onerow",{row:u[n],host:t.host,counter:h}));if(l&&l.length)for(n=0,o=l.length;o>n;n++)r.push(i("etrains__onerow",{row:l[n],host:t.host,counter:h}));s=i("etrains__track",{direction:i("etrains__directionLayout",{stfrom:a,stto:c}),times:r.join(""),trackClass:t.direction?"fwd":"rev"})}return s}),views("etrains__onerow",function(t,e,i){var n,o=t.row;return n=o.uid?t.host+"thread/"+o.uid:"javascript:void(0)",i("etrains__time",{href:n,hint:i("etrains__hint",{express:o.express?"&#32;":"",name:o.name||o.title}),time:o.stime||o.departure,timeClass:o.express?" etrains__time_express":"",stat:e.stat.getAdaptiveCounter(t.counter)})}),views("themes-promo__inner-header",'<a [% bem:attrs %] class="themes-promo__link link[% textMix %]"><span class="themes-promo__text">[% text %]</span></a><span class="themes-promo__close[% textMix %]" [% closeAttrs %]>&#10005;</span><div class="themes-promo__tail"></div><div class="themes-promo__top-wing"></div><div class="themes-promo__bottom-wing"></div><div class="themes-promo__top-arrow"></div><div class="themes-promo__bottom-arrow"></div>'),views("desk-notif-card__inner",function(t,e,i){var n="";return n+=t.link||"",n+=t.title?i("desk-notif-card__title",t):"",n+=t.details?i("desk-notif-card__details",t):"",t.iconSrc&&(t.iconSrc=i("desk-notif-card__icon-src",t)),n+=t.iconSrc||t.iconClass?i("desk-notif-card__icon",t):"",n+=t.actions||"",n+=t.extraElems||""}),views("desk-notif-card__icon-src",function(t,e){var i=t.iconSrc;if(i){var n=".svg";return e.isOperaPresto&&(n=".png"),home.getAttributes({style:"background-image: url("+i+n+")"})}}),views("desk-notif-card__icon",'<div class="desk-notif-card__icon [% iconClass %]" [% data:iconSrc %]></div>'),views("desk-notif-card__details",'<div class="desk-notif-card__details">[% data:details %]</div>'),views("desk-notif-card__title",'<div class="desk-notif-card__title">[% data:title %]</div>')}();if(window.home&&home.mark){home.mark.add("main-js_end");}